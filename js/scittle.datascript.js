globalThis.datascript = {};(function(){
'use strict';var Oqa=function(a,b,c,d,e){this.kk=a;this.Lk=b;this.Mk=c;this.le=d;this.rj=e;this.D=2147484416;this.K=0},Qqa=function(a,b,c){var d=a.kk,e=a.Lk,f=a.Mk,g=a.le;a=a.rj;var k=f.g?f.g(b,null):f.call(null,b,null);if($APP.p(k))return new Oqa(d,$APP.Vi.j($APP.um.g(e,k),g,b),$APP.Vi.j(f,b,g),g+1,a);b=new Oqa($APP.Vi.j(d,b,c),$APP.Vi.j(e,g,b),$APP.Vi.j(f,b,g),g+1,a);return Pqa.h?Pqa.h(b):Pqa.call(null,b)},Pqa=function(a){if($APP.le(a.kk)>a.rj){var b=a.kk,c=a.Lk,d=a.Mk,e=a.le;a=a.rj;var f=$APP.y(c),
g=$APP.E.j(f,0,null);f=$APP.E.j(f,1,null);return new Oqa($APP.um.g(b,f),$APP.um.g(c,g),$APP.um.g(d,f),e,a)}return a},Rqa=function(a,b,c){if(null!=a&&null!=a.Kk)a=a.Kk(a,b,c);else{var d=Rqa[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=Rqa._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("ICache.-get",a);}return a},JY=function(){var a=$APP.Jg(new Oqa($APP.gg,$APP.PA(),$APP.gg,0,100));if("undefined"===typeof datascript||"undefined"===typeof Sqa||"undefined"===
typeof IY)IY=function(b,c,d){this.rj=b;this.rk=c;this.Ok=d;this.D=393216;this.K=0},IY.prototype.aa=function(b,c){return new IY(this.rj,this.rk,c)},IY.prototype.W=function(){return this.Ok},IY.prototype.Kk=function(b,c,d){b=$APP.Xe.j($APP.v(this.rk),c,null);return null==b?(d=d.s?d.s():d.call(null),$APP.pd(this.rk,$APP.Vi.j($APP.v(this.rk),c,d)),d):b},IY.Lc=!0,IY.hc="datascript.lru/t_datascript$lru27563",IY.Yc=function(b){return $APP.Rc(b,"datascript.lru/t_datascript$lru27563")};return new IY(100,a,
$APP.gg)},Tqa=function(a){return $APP.jf.j(function(b,c){b.push(c);return b},[],a)},Uqa=function(a){return a instanceof Array},Vqa=function(a,b,c,d){for(var e=0,f=$APP.rf(c);;)if(e<=f){c=e+f>>>1;var g=b[c];0>(a.g?a.g(g,d):a.call(null,g,d))?e=c+1:f=c-1}else return e},Wqa=function(a,b,c,d){for(var e=0,f=$APP.rf(c);;)if(e<=f){c=e+f>>>1;var g=b[c];0<(a.g?a.g(g,d):a.call(null,g,d))?f=c-1:e=c+1}else return e},Xqa=function(a,b,c){var d=b.length,e=Vqa(a,b,d-1,c);if(d=e<d)b=b[e],d=0===(a.g?a.g(b,c):a.call(null,
b,c));return d?e:-1},Yqa=function(a,b,c){var d=b.length;a=Vqa(a,b,d-1,c);return a===d?-1:a},Zqa=function(a,b,c,d,e,f){var g=f.length,k=d-b,l=k+g,h=Array(k+g+(c-e));d-=b;for(var r=0;;)if(r<d)h[r+0]=a[r+b],r+=1;else break;b=g-0;for(g=0;;)if(g<b)h[g+k]=f[g+0],g+=1;else break;c-=e;for(f=0;;)if(f<c)h[f+l]=a[f+e],f+=1;else break;return h},$qa=function(a,b,c,d){return Zqa(a,0,a.length,b,c,d)},ara=function(a,b){var c=a.length,d=b.length,e=c+d,f=e>>>1,g=Array(f);e=Array(e-f);if(c<=f){for(var k=c-0,l=0;;)if(l<
k)g[l+0]=a[l+0],l+=1;else break;a=f-c;for(k=0;;)if(k<a)g[k+c]=b[k+0],k+=1;else break;d-=f-c;for(a=0;;)if(a<d)e[a+0]=b[a+(f-c)],a+=1;else break}else{k=f-0;for(l=0;;)if(l<k)g[l+0]=a[l+0],l+=1;else break;k=c-f;for(l=0;;)if(l<k)e[l+0]=a[l+f],l+=1;else break;d-=0;for(a=0;;)if(a<d)e[a+(c-f)]=b[a+0],a+=1;else break}return[g,e]},bra=function(a,b,c,d,e,f){d-=c;if(f=d===f-0)for(f=0;;){if(f===d)return!0;var g=b[f+c],k=e[f+0];if(0!==(a.g?a.g(g,k):a.call(null,g,k)))return!1;f+=1}else return f},cra=function(a,
b){return $APP.p(a)?$APP.p(b)?[a,b]:[a]:[b]},dra=function(a,b,c){return $APP.p(a)?$APP.p(b)?$APP.p(c)?[a,b,c]:[a,b]:$APP.p(c)?[a,c]:[a]:$APP.p(b)?$APP.p(c)?[b,c]:[b]:[c]},era=function(a){if(null!=a&&null!=a.Ek)a=a.Ek(a);else{var b=era[$APP.pa(null==a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=era._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("INode.node-lim-key",a);}return a},KY=function(a){if(null!=a&&null!=a.Nk)a=a.keys.length;else{var b=KY[$APP.pa(null==a?null:a)];if(null!=
b)a=b.h?b.h(a):b.call(null,a);else if(b=KY._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("INode.node-len",a);}return a},fra=function(a,b){if(null!=a&&null!=a.Gk)a=a.Gk(a,b);else{var c=fra[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=fra._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("INode.node-merge",a);}return a},gra=function(a,b){if(null!=a&&null!=a.Hk)a=a.Hk(a,b);else{var c=gra[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,
a,b);else if(c=gra._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("INode.node-merge-n-split",a);}return a},hra=function(a,b,c){if(null!=a&&null!=a.Fk)a=a.Fk(a,b,c);else{var d=hra[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=hra._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("INode.node-lookup",a);}return a},ira=function(a,b,c){if(null!=a&&null!=a.Ck)a=a.Ck(a,b,c);else{var d=ira[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):
d.call(null,a,b,c);else if(d=ira._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("INode.node-conj",a);}return a},jra=function(a,b,c,d,e,f){if(null!=a&&null!=a.Dk)a=a.Dk(a,b,c,d,e,f);else{var g=jra[$APP.pa(null==a?null:a)];if(null!=g)a=g.ja?g.ja(a,b,c,d,e,f):g.call(null,a,b,c,d,e,f);else if(g=jra._,null!=g)a=g.ja?g.ja(a,b,c,d,e,f):g.call(null,a,b,c,d,e,f);else throw $APP.Gb("INode.node-disj",a);}return a},kra=function(a,b,c,d){if($APP.p(b))return[a];if(16<KY(a))return dra(c,a,d);if($APP.p($APP.p(c)?
16>=KY(c):c))return cra(fra(c,a),d);if($APP.p($APP.p(d)?16>=KY(d):d))return cra(c,fra(a,d));if($APP.p($APP.p(c)?null==d||KY(c)<KY(d):c))return a=gra(c,a),dra(a[0],a[1],d);a=gra(a,d);return dra(c,a[0],a[1])},LY=function(a,b){this.keys=a;this.wj=b},MY=function(a){this.keys=a},NY=function(a,b,c,d,e,f){this.root=a;this.shift=b;this.I=c;this.Oj=d;this.H=e;this.Ed=f;this.D=2297303311;this.K=8332},lra=function(a,b){var c=a.shift;for(a=a.root;;)if(0<c)a=a.wj[OY&b>>>c],c-=PY;else return a.keys},mra=function(a,
b,c,d){return new NY(b,c,d,a.Oj,a.H,null)},ora=function(a,b){return nra(a.root,b,a.shift)},pra=function(a,b){for(var c=0;;)if(0<b)c|=a.wj.length-1<<b,b-=PY,a=a.wj,a=a[a.length-1];else return c|a.keys.length-1<<0},rra=function(a,b){return qra(a.root,b,a.shift)},QY=function(a){if(0<KY(a.root)){var b=pra(a.root,a.shift)+1;return sra.j?sra.j(a,0,b):sra.call(null,a,0,b)}return null},tra=function(a,b,c){this.C=a;this.Db=b;this.end=c;this.D=524306;this.K=0},ura=function(a,b,c,d,e){this.set=a;this.left=b;
this.right=c;this.keys=d;this.idx=e;this.D=2309488832;this.K=1536},sra=function(a,b,c){return new ura(a,b,c,lra(a,b),OY&b>>>0)},vra=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.D=2308964544;this.K=0},wra=function(a,b,c){return new vra(a,b,c,lra(a,c),OY&c>>>0)},xra=function(a,b,c,d){a:if(null==b)b=0;else for(var e=a.root,f=0,g=a.shift;;){var k=KY(e);if(0===g){var l=e.keys;l=Vqa(d,l,k-1,b);b=k===l?-1:f|l<<0;break a}l=e.keys;l=Vqa(d,l,k-2,b);f|=l<<g;g-=PY;e=e.wj[l]}if(0>
b)return null;a:if(null==c)c=pra(a.root,a.shift)+1;else for(e=a.root,f=0,g=a.shift;;){l=KY(e);if(0===g){k=e.keys;l=Wqa(d,k,l-1,c);c=f|l<<0;break a}k=e.keys;l=Wqa(d,k,l-2,c);f|=l<<g;g-=PY;e=e.wj[l]}return c>b?new ura(a,b,c,lra(a,b),OY&b>>>0):null},yra=function(a,b){for(var c=b.length,d=0;;)if(d<c){var e=d;var f=b[d];f=a.h?a.h(f):a.call(null,f);b[e]=f;d+=1}else break;return b},zra=function(a){var b=a.length,c=$APP.Xc($APP.qh);if(0<b)for(var d=0;;){var e=b-d;if(32>=e){$APP.kh.g(c,a.slice(d));break}else 40<=
e?($APP.kh.g(c,a.slice(d,d+24)),d+=24):(e>>>=1,$APP.kh.g(c,a.slice(d,d+e)),d+=e)}return $APP.Yf($APP.Zc(c))},RY=function(a,b,c){b=ira(a.root,c,b);return null==b?a:1===b.length?mra(a,b[0],a.shift,a.I+1):mra(a,new LY(b.map(era),b),a.shift+PY,a.I+1)},SY=function(a,b,c){b=jra(a.root,c,b,!0,null,null);if(null==b)return a;b=b[0];return b instanceof LY&&1===b.wj.length?mra(a,b.wj[0],a.shift-PY,a.I-1):mra(a,b,a.shift,a.I-1)},TY=function(a,b,c){return xra(a,b,c,a.Oj)},Ara=function(a,b){for(var c=yra(function(g){return new MY(g)},
zra(b)),d=c,e=0;;){var f=$APP.le(d);switch(f){case 0:return new NY(new MY([]),0,0,a,null,null);case 1:return new NY($APP.y(d),e,b.length,a,null,null);default:d=yra(function(){return function(g){return new LY(g.map(era),g)}}(d,e,f,c),zra(d)),e+=PY}}},Bra=function(a){return new NY(new MY([]),0,0,a,null,null)},Cra=function(a){return"string"!==typeof a&&($APP.Se(a)||Uqa(a))},Dra=function(a,b,c){return $APP.y($APP.jf.j(function(d,e){var f=$APP.E.j(d,0,null);d=$APP.E.j(d,1,null);e=a.j?a.j(f,e,d):a.call(null,
f,e,d);return $APP.ae(e)?$APP.$d(new $APP.M(null,2,5,$APP.O,[e,d],null)):new $APP.M(null,2,5,$APP.O,[e,d+1],null)},new $APP.M(null,2,5,$APP.O,[b,0],null),c))},Era=function(a,b){return $APP.Ed(a,b)},Fra=function(a){if(null!=a&&null!=a.nj)a=a.nj(a);else{var b=Fra[$APP.pa(null==a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=Fra._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("IDatom.datom-tx",a);}return a},UY=function(a){if(null!=a&&null!=a.Xj)a=a.Xj(a);else{var b=UY[$APP.pa(null==
a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=UY._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("IDatom.datom-added",a);}return a},WY=function(a,b,c,d,e,f){this.e=a;this.a=b;this.v=c;this.tx=d;this.idx=e;this.Ed=f;this.D=2162164496;this.K=0},Gra=function(a){return a instanceof WY},Hra=function(a){return Era(Era($APP.Dd(a.e),$APP.Dd(a.a)),$APP.Dd(a.v))},Ira=function(a,b){return a.e===b.e&&$APP.B.g(a.a,b.a)&&$APP.B.g(a.v,b.v)},Jra=function(a){return new $APP.J(null,a.e,new $APP.J(null,
a.a,new $APP.J(null,a.v,new $APP.J(null,a.nj(null),new $APP.J(null,a.Xj(null),null,1,null),2,null),3,null),4,null),5,null)},Mra=function(a,b,c){return $APP.B.g(XY,b)?a.v:$APP.B.g("e",b)?a.e:$APP.B.g(Kra,b)?a.Xj(null):$APP.B.g("v",b)?a.v:$APP.B.g($APP.VM,b)?a.e:$APP.B.g("a",b)?a.a:$APP.B.g(Lra,b)?a.nj(null):$APP.B.g("added",b)?a.Xj(null):$APP.B.g("tx",b)?a.nj(null):$APP.B.g(eZ,b)?a.a:c},Pra=function(a){switch(arguments.length){case 2:return Nra(arguments[0],arguments[1]);case 3:return Ora(arguments[0],
arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}},Nra=function(a,b){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.nj(null);case 4:return a.Xj(null);default:throw Error(["Datom/-nth: Index out of bounds: ",$APP.t.h(b)].join(""));}},Ora=function(a,b,c){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.nj(null);case 4:return a.Xj(null);default:return c}},Rra=function(a,b,c){switch(b instanceof
$APP.K?b.ba:null){case "e":return gZ.J(c,a.a,a.v,a.nj(null),a.Xj(null));case "a":return gZ.J(a.e,c,a.v,a.nj(null),a.Xj(null));case "v":return gZ.J(a.e,a.a,c,a.nj(null),a.Xj(null));case "tx":return gZ.J(a.e,a.a,a.v,c,a.Xj(null));case "added":return gZ.J(a.e,a.a,a.v,a.nj(null),c);default:throw new Qra(["invalid key for #datascript/Datom: ",$APP.t.h(b)].join(""));}},Sra=function(a){return $APP.Dg.g(gZ,a)},Tra=function(a,b){return null==a?0:null==b?0:$APP.bf(a,b)},Ura=function(a,b){return $APP.db($APP.Hb($APP.Fb(a)),
$APP.Hb($APP.Fb(b)))},UZ=function(a,b){try{return $APP.B.g(a,b)?0:(null!=a?a.K&2048||$APP.Cd===a.Ic||(a.K?0:$APP.Eb($APP.ed,a)):$APP.Eb($APP.ed,a))?$APP.fd(a,b):$APP.Fb(a)===$APP.Fb(b)?"number"===typeof a||"string"===typeof a||$APP.Ab(a)||!0===a||!1===a?$APP.db(a,b):$APP.Dd(a)-$APP.Dd(b):Ura(a,b)}catch(d){if(d instanceof Error){var c=d;if($APP.Fb(a)===$APP.Fb(b))throw c;return Ura(a,b)}throw d;}},Vra=function(a,b){return null==a?0:null==b?0:UZ(a,b)},Wra=function(a,b){var c=a.e-b.e;return 0===c?(c=
Tra(a.a,b.a),0===c?(c=Vra(a.v,b.v),0===c?(a=a.nj(null)-b.nj(null),0===a?0:a):c):c):c},Xra=function(a,b){var c=Tra(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=Vra(a.v,b.v),0===c?(a=a.nj(null)-b.nj(null),0===a?0:a):c):c):c},Yra=function(a,b){var c=Tra(a.a,b.a);return 0===c?(c=Vra(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.nj(null)-b.nj(null),0===a?0:a):c):c):c},Zra=function(a,b){return a instanceof $APP.K?$APP.fd(a,b):$APP.db(a,b)},$ra=function(a,b){var c=a.e-b.e;return 0===c?(c=Zra(a.a,b.a),0===c?(a=UZ(a.v,
b.v),0===a?0:a):c):c},asa=function(a,b){var c=a.e-b.e;return 0===c?(c=Zra(a.a,b.a),0===c?(c=UZ(a.v,b.v),0===c?(a=a.nj(null)-b.nj(null),0===a?0:a):c):c):c},bsa=function(a,b){var c=Zra(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=UZ(a.v,b.v),0===c?(a=a.nj(null)-b.nj(null),0===a?0:a):c):c):c},csa=function(a,b){var c=Zra(a.a,b.a);return 0===c?(c=UZ(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.nj(null)-b.nj(null),0===a?0:a):c):c):c},dsa=function(){},WZ=function(a,b){if(null!=a&&null!=a.Bk)a=a.Bk(a,b);else{var c=
WZ[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=WZ._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("ISearch.-search",a);}return a},esa=function(a,b){return $APP.y(WZ(a,b))},YZ=function(a,b,c){if(null!=a&&null!=a.yk)a=a.yk(a,b,c);else{var d=YZ[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=YZ._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("IIndexAccess.-datoms",a);}return a},fsa=function(a,b,c){if(null!=
a&&null!=a.Ak)a=a.Ak(a,b,c);else{var d=fsa[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=fsa._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("IIndexAccess.-seek-datoms",a);}return a},gsa=function(a,b,c,d){if(null!=a&&null!=a.zk)a=a.zk(a,b,c,d);else{var e=gsa[$APP.pa(null==a?null:a)];if(null!=e)a=e.B?e.B(a,b,c,d):e.call(null,a,b,c,d);else if(e=gsa._,null!=e)a=e.B?e.B(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.Gb("IIndexAccess.-index-range",a);
}return a},ksa=function(a,b,c){if($APP.B.g(b,$Z)&&(b=$APP.y(c),null!=b&&!$APP.p(g_.g?g_.g(a,b):g_.call(null,a,b))))throw $APP.Gm.g(["Attribute ",$APP.bk.l($APP.I([b]))," should be marked as :db/index true"].join(""),new $APP.n(null,3,[$APP.SF,hsa,isa,$Z,jsa,c],null));},lsa=function(){},h_=function(a){if(null!=a&&null!=a.xk)a=a.xk(a);else{var b=h_[$APP.pa(null==a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=h_._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("IDB.-schema",a);}return a},
i_=function(a,b){if(null!=a&&null!=a.wk)a=a.wk(a,b);else{var c=i_[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=i_._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("IDB.-attrs-by",a);}return a},l_=function(a,b,c,d,e,f,g,k,l,h,r,q,u){this.Ej=a;this.vj=b;this.Gj=c;this.Cj=d;this.Mj=e;this.Nj=f;this.Jj=g;this.Ij=k;this.Hj=l;this.hash=h;this.G=r;this.A=q;this.F=u;this.D=2230716170;this.K=139264},msa=function(a){var b=$APP.um.l(a,m_,$APP.I([o_,q_,$Z,r_,t_,u_,
v_,w_,C_]));b=$APP.Ke(a)?$APP.Vh.g($APP.gg,b):b;return new l_(m_.h(a),o_.h(a),q_.h(a),$Z.h(a),r_.h(a),t_.h(a),u_.h(a),v_.h(a),w_.h(a),C_.h(a),null,$APP.ig(b),null)},D_=function(a,b,c,d,e,f){this.Kj=a;this.Pj=b;this.hash=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},nsa=function(a){return a instanceof D_?a.Kj:a},psa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "db.unique/identity":return new $APP.M(null,3,5,$APP.O,[E_,F_,G_],null);case "db.unique/value":return new $APP.M(null,
3,5,$APP.O,[E_,osa,G_],null);case "db.cardinality/many":return new $APP.M(null,1,5,$APP.O,[L_],null);case "db.type/ref":return new $APP.M(null,2,5,$APP.O,[M_,G_],null);default:return $APP.B.g(O_,a)&&!0===b?new $APP.M(null,1,5,$APP.O,[O_],null):$APP.B.g(G_,a)&&!0===b?new $APP.M(null,1,5,$APP.O,[G_],null):$APP.B.g(P_,a)?new $APP.M(null,2,5,$APP.O,[R_,G_],null):$APP.qh}},qsa=function(a,b){return $APP.jf.j(function(c,d){return Dra(function(e,f,g){return $APP.Ir.J(e,f,$APP.Vi,d,g)},c,P_.h($APP.Xe.g(a,
d)))},$APP.gg,R_.h(b))},tsa=function(a){var b=$APP.nf(function(c,d,e){return $APP.nf(function(f,g,k){return $APP.jf.j(function(l,h){return $APP.Ir.B(l,h,rsa,d)},f,psa(g,k))},c,e)},$APP.gg,a);return $APP.Vi.j(b,ssa,qsa(a,b))},c0=function(a,b,c,d){if(null!=c&&!$APP.Ze(d,c))throw $APP.Gm.g(["Bad attribute specification for ",$APP.bk.l($APP.I([$APP.fg([a,$APP.fg([b,c])])])),", expected one of ",$APP.t.h(d)].join(""),new $APP.n(null,4,[$APP.SF,S_,b0,a,$APP.AL,b,$APP.hJ,c],null));},vsa=function(a){for(var b=
$APP.x(a),c=null,d=0,e=0;;)if(e<d){var f=c.Y(null,e),g=$APP.E.j(f,0,null),k=$APP.E.j(f,1,null),l=O_.g(k,!1);c0(g,O_,O_.h(k),new $APP.Yi(null,new $APP.n(null,2,[!0,null,!1,null],null),null));if($APP.p(function(){var Q=l;return $APP.p(Q)?$APP.Ui.g(d0.h(k),M_):Q}()))throw $APP.Gm.g(["Bad attribute specification for ",$APP.bk.l($APP.I([g])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.n(null,3,[$APP.SF,S_,b0,g,$APP.AL,O_],null));c0(g,E_,E_.h(k),new $APP.Yi(null,
new $APP.n(null,2,[F_,null,osa,null],null),null));c0(g,d0,d0.h(k),new $APP.Yi(null,new $APP.n(null,2,[R_,null,M_,null],null),null));c0(g,e0,e0.h(k),new $APP.Yi(null,new $APP.n(null,2,[L_,null,usa,null],null),null));if($APP.B.g(R_,d0.h(k))&&!$APP.Ze(k,P_))throw $APP.Gm.g(["Bad attribute specification for ",$APP.bk.l($APP.I([g])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.n(null,3,[$APP.SF,S_,b0,g,$APP.AL,d0],null));if($APP.Ze(k,P_)){f=new $APP.n(null,3,[$APP.SF,
S_,b0,g,$APP.AL,P_],null);if($APP.B.g(L_,e0.h(k)))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),f);var h=P_.h(k);if(!$APP.Ie(h))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs must be a sequential collection, got: ",$APP.bk.l($APP.I([h]))].join(""),f);if($APP.Ee(h))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t be empty"].join(""),f);h=$APP.x(h);for(var r=null,q=0,u=0;;)if(u<q){var C=r.Y(null,u),F=$APP.Vi.j(f,$APP.hJ,
C);if($APP.Ze($APP.Xe.g(a,C),P_))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.bk.l($APP.I([C]))].join(""),F);if($APP.B.g(L_,e0.h($APP.Xe.g(a,C))))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.bk.l($APP.I([C]))].join(""),F);u+=1}else if(h=$APP.x(h)){if($APP.Me(h))q=$APP.hd(h),h=$APP.id(h),r=q,q=$APP.le(q);else{r=$APP.y(h);q=$APP.Vi.j(f,$APP.hJ,r);if($APP.Ze($APP.Xe.g(a,r),P_))throw $APP.Gm.g([$APP.bk.l($APP.I([g])),
" :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.bk.l($APP.I([r]))].join(""),q);if($APP.B.g(L_,e0.h($APP.Xe.g(a,r))))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.bk.l($APP.I([r]))].join(""),q);h=$APP.z(h);r=null;q=0}u=0}else break}e+=1}else if(g=$APP.x(b)){b=g;if($APP.Me(b))c=$APP.hd(b),b=$APP.id(b),g=c,d=$APP.le(c),c=g;else{c=$APP.y(b);g=$APP.E.j(c,0,null);k=$APP.E.j(c,1,null);var N=O_.g(k,!1);c0(g,O_,O_.h(k),new $APP.Yi(null,
new $APP.n(null,2,[!0,null,!1,null],null),null));if($APP.p(function(){var Q=N;return $APP.p(Q)?$APP.Ui.g(d0.h(k),M_):Q}()))throw $APP.Gm.g(["Bad attribute specification for ",$APP.bk.l($APP.I([g])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.n(null,3,[$APP.SF,S_,b0,g,$APP.AL,O_],null));c0(g,E_,E_.h(k),new $APP.Yi(null,new $APP.n(null,2,[F_,null,osa,null],null),null));c0(g,d0,d0.h(k),new $APP.Yi(null,new $APP.n(null,2,[R_,null,M_,null],null),null));c0(g,
e0,e0.h(k),new $APP.Yi(null,new $APP.n(null,2,[L_,null,usa,null],null),null));if($APP.B.g(R_,d0.h(k))&&!$APP.Ze(k,P_))throw $APP.Gm.g(["Bad attribute specification for ",$APP.bk.l($APP.I([g])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.n(null,3,[$APP.SF,S_,b0,g,$APP.AL,d0],null));if($APP.Ze(k,P_)){c=new $APP.n(null,3,[$APP.SF,S_,b0,g,$APP.AL,P_],null);if($APP.B.g(L_,e0.h(k)))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),
c);d=P_.h(k);if(!$APP.Ie(d))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs must be a sequential collection, got: ",$APP.bk.l($APP.I([d]))].join(""),c);if($APP.Ee(d))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t be empty"].join(""),c);d=$APP.x(d);e=null;for(h=f=0;;)if(h<f){r=e.Y(null,h);q=$APP.Vi.j(c,$APP.hJ,r);if($APP.Ze($APP.Xe.g(a,r),P_))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.bk.l($APP.I([r]))].join(""),
q);if($APP.B.g(L_,e0.h($APP.Xe.g(a,r))))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.bk.l($APP.I([r]))].join(""),q);h+=1}else if(d=$APP.x(d)){if($APP.Me(d))f=$APP.hd(d),d=$APP.id(d),e=f,f=$APP.le(f);else{e=$APP.y(d);f=$APP.Vi.j(c,$APP.hJ,e);if($APP.Ze($APP.Xe.g(a,e),P_))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.bk.l($APP.I([e]))].join(""),f);if($APP.B.g(L_,e0.h($APP.Xe.g(a,
e))))throw $APP.Gm.g([$APP.bk.l($APP.I([g]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.bk.l($APP.I([e]))].join(""),f);d=$APP.z(d);e=null;f=0}h=0}else break}b=$APP.z(b);c=null;d=0}e=0}else return null},wsa=function(a){var b=$APP.VM.h,c=gZ.B(536870911,null,null,2147483647),d=gZ.B(0,null,null,536870912);a=xra(a,d,c,a.Oj);a=null==a?null:$APP.Lc(a);b=b.call($APP.VM,$APP.y(a));return $APP.p(b)?b:0},xsa=function(a){var b=$APP.v(a.hash);return 0===b?$APP.Hg(a.hash,Era($APP.Dd(a.Ej),
$APP.Dd(a.vj))):b},ysa=function(a){var b=$APP.v(a.hash);(function(){var c=YZ(a,o_,$APP.qh);return $APP.p(c)?c:$APP.Zi})();return 0===b?(b=function(){var c=YZ(a,o_,$APP.qh);return $APP.p(c)?c:$APP.Zi}(),$APP.Hg(a.hash,Era($APP.Dd(h_(a)),$APP.Vd(b)))):b},zsa=function(a,b){var c;if(c=b instanceof l_||b instanceof D_)if(c=$APP.B.g(h_(a),h_(b)))a:for(a=YZ(a,o_,$APP.qh),c=YZ(b,o_,$APP.qh),b=$APP.x(a),a=$APP.x(c);;){if(null==b){c=null==a;break a}if($APP.B.g($APP.y(b),$APP.y(a)))b=$APP.z(b),a=$APP.z(a);else{c=
!1;break a}}return c},Asa=function(a,b,c){$APP.Rc(b,"#datascript/DB {");$APP.Rc(b,":schema ");$APP.Cj(h_(a),b,c);$APP.Rc(b,", :datoms ");$APP.wj(b,function(d,e,f){return $APP.wj(e,$APP.Cj,"["," ","]",f,new $APP.M(null,4,5,$APP.O,[d.e,d.a,d.v,Fra(d)],null))},"["," ","]",c,YZ(a,o_,$APP.qh));return $APP.Rc(b,"}")},Bsa=function(a){var b=$APP.hg(a);a=$APP.Xe.g(b,m_);b=$APP.Xe.g(b,g0);return h0.g($APP.Dj.g(function(c){var d=$APP.E.j(c,0,null),e=$APP.E.j(c,1,null),f=$APP.E.j(c,2,null);c=$APP.E.j(c,3,null);
return gZ.B(d,e,f,c)},b),a)},z0=function(a,b,c,d,e,f,g){if($APP.p(c)){var k=new $APP.J(null,Csa,new $APP.J(null,n0,new $APP.J(null,b,new $APP.J(null,c,new $APP.J(null,d,new $APP.J(null,e,null,1,null),2,null),3,null),4,null),5,null),6,null);r0.g?r0.g(c,k):r0.call(null,c,k)}return gZ.B(function(){var l=Dsa.g?Dsa.g(a,b):Dsa.call(null,a,b);return $APP.p(l)?l:f}(),c,$APP.p(function(){var l=null!=d;return l?s0.g?s0.g(a,c):s0.call(null,a,c):l}())?y0.g?y0.g(a,d):y0.call(null,a,d):d,function(){var l=Dsa.g?
Dsa.g(a,e):Dsa.call(null,a,e);return $APP.p(l)?l:g}())},A0=function(a,b,c,d,e){var f=$APP.E.j(c,0,null),g=$APP.E.j(c,1,null),k=$APP.E.j(c,2,null);c=$APP.E.j(c,3,null);b=b instanceof $APP.K?b.ba:null;switch(b){case "eavt":return z0(a,f,g,k,c,d,e);case "aevt":return z0(a,g,f,k,c,d,e);case "avet":return z0(a,k,f,g,c,d,e);default:throw Error(["No matching clause: ",$APP.t.h(b)].join(""));}},B0=function(a,b,c,d,e,f,g,k){this.ak=a;this.$j=b;this.ck=c;this.bk=d;this.dk=e;this.G=f;this.A=g;this.F=k;this.D=
2230716170;this.K=139264},Esa=function(a){var b=$APP.um.l(a,G0,$APP.I([H0,I0,J0,O0]));b=$APP.Ke(a)?$APP.Vh.g($APP.gg,b):b;return new B0(G0.h(a),H0.h(a),I0.h(a),J0.h(a),O0.h(a),null,$APP.ig(b),null)},W0=function(a,b,c){return $APP.Ze(i_(a,c),b)},X0=function(a,b){return W0(a,b,L_)},s0=function(a,b){return W0(a,b,M_)},g_=function(a,b){return W0(a,b,G_)},Y0=function(a,b){for(;;){if("number"===typeof b&&0<b){if(2147483647<b)throw $APP.Gm.g(["Highest supported entity id is ",$APP.bk.l($APP.I([2147483647])),
", got ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,2,[$APP.SF,Fsa,$APP.hJ,b],null));return b}if($APP.Ie(b)){var c=b,d=$APP.E.j(c,0,null);c=$APP.E.j(c,1,null);if($APP.Ui.g($APP.le(b),2))throw $APP.Gm.g(["Lookup ref should contain 2 elements: ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,2,[$APP.SF,Gsa,Fsa,b],null));if(W0(a,d,E_))return null==c?null:$APP.VM.h($APP.y(YZ(a,$Z,b)));throw $APP.Gm.g(["Lookup ref attribute should be marked as :db/unique: ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,
2,[$APP.SF,Hsa,Fsa,b],null));}if($APP.Ab(b))b=$APP.I(b);else{if(b instanceof $APP.K)return $APP.VM.h($APP.y(YZ(a,$Z,new $APP.M(null,2,5,$APP.O,[Isa,b],null))));throw $APP.Gm.g(["Expected number or lookup ref for entity id, got ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,2,[$APP.SF,Jsa,Fsa,b],null));}}},y0=function(a,b){a=Y0(a,b);if($APP.p(a))return a;throw $APP.Gm.g(["Nothing found for entity id ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,2,[$APP.SF,Ksa,Fsa,b],null));},Dsa=function(a,
b){return $APP.p(b)?y0(a,b):null},r0=function(a,b){if(a instanceof $APP.K||"string"===typeof a)return null;throw $APP.Gm.g(["Bad entity attribute ",$APP.bk.l($APP.I([a]))," at ",$APP.bk.l($APP.I([b])),", expected keyword or string"].join(""),new $APP.n(null,3,[$APP.SF,$0,b0,a,Lsa,b],null));},Msa=function(a,b){if(null==a)throw $APP.Gm.g(["Cannot store nil as a value at ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,3,[$APP.SF,$0,$APP.hJ,a,Lsa,b],null));return null},a1=function(a){return $APP.Mp.g(a,
new $APP.M(null,2,5,$APP.O,[G0,t_],null))+1},Osa=function(a){return $APP.B.g(a,Nsa)||$APP.B.g(a,":db/current-tx")||$APP.B.g(a,"datomic.tx")||$APP.B.g(a,"datascript.tx")},f1=function(a){return"number"===typeof a&&0>a||"string"===typeof a},Psa=function(a,b){return b>r_.h(a)&&536870912>b?$APP.Vi.j(a,r_,b):a},Qsa=function(a,b,c){var d=Osa(b)?$APP.Ir.J(a,J0,$APP.Vi,b,c):a;d=f1(b)?$APP.Ir.J(d,J0,$APP.Vi,b,c):d;if(b=!f1(b))a=H0.h(a),b=c>r_.h(a)&&536870912>c;a=b?$APP.Ir.J(d,J0,$APP.Vi,c,c):d;return $APP.Ir.B(a,
H0,Psa,c)},Rsa=function(a,b,c,d,e){return $APP.nf(function(f,g,k){var l=$APP.Xe.g(f,g);$APP.p(l)||(l=XY.h($APP.y(YZ(c,o_,new $APP.M(null,2,5,$APP.O,[d,g],null)))),l=$APP.p(l)?l:$APP.rh($APP.lp.g($APP.le(P_.h($APP.Xe.g(h_(c),g))),null)));k=$APP.Vi.j(l,k,e);return $APP.Vi.j(f,g,k)},a,b)},Vsa=function(a,b){var c=H0.h(a),d=eZ.h(b),e=$APP.Ir.B,f=$APP.Vi.j;var g=b.Xj(null);g=$APP.p(g)?W0(c,b.a,E_):g;if($APP.p(g)&&(g=$APP.ig(YZ(c,$Z,new $APP.M(null,2,5,$APP.O,[b.a,b.v],null))),null!=g))throw $APP.Gm.g(["Cannot add ",
$APP.bk.l($APP.I([b]))," because of unique constraint: ",$APP.bk.l($APP.I([g]))].join(""),new $APP.n(null,3,[$APP.SF,Ssa,b0,b.a,Tsa,b],null));g=g_(c,b.a);if($APP.p(b.Xj(null))){var k=$APP.Ir.J(c,o_,RY,b,asa);k=$APP.Ir.J(k,q_,RY,b,bsa);g=g?$APP.Ir.J(k,$Z,RY,b,csa):k;g=Psa(g,b.e);g=$APP.Vi.j(g,C_,$APP.fk.h(0))}else if(k=esa(c,new $APP.M(null,3,5,$APP.O,[b.e,b.a,b.v],null)),null==k)g=c;else{var l=$APP.Ir.J(c,o_,SY,k,asa);l=$APP.Ir.J(l,q_,SY,k,bsa);g=g?$APP.Ir.J(l,$Z,SY,k,csa):l;g=$APP.Vi.j(g,C_,$APP.fk.h(0))}a=
e.call($APP.Ir,f.call($APP.Vi,a,H0,g),I0,$APP.Af,b);return W0(c,d,ssa)?(e=$APP.VM.h(b),b=$APP.p(UY(b))?XY.h(b):null,f=$APP.Xe.g(Usa.h(a),e),f=$APP.p(f)?f:$APP.gg,d=$APP.Xe.g(i_(c,ssa),d),c=Rsa(f,d,c,e,b),$APP.Ir.J(a,Usa,$APP.Vi,e,c)):a},Wsa=function(a){if(a instanceof $APP.K)return $APP.B.g("_",$APP.E.g($APP.ej(a),0));if("string"===typeof a)return $APP.Te($APP.qj(/(?:([^\/]+)\/)?_([^\/]+)/,a));throw $APP.Gm.g(["Bad attribute type: ",$APP.bk.l($APP.I([a])),", expected keyword or string"].join(""),
new $APP.n(null,2,[$APP.SF,$0,b0,a],null));},Xsa=function(a){if(a instanceof $APP.K)return Wsa(a)?$APP.Ej.g($APP.Hf(a),$APP.sj.g($APP.ej(a),1)):$APP.Ej.g($APP.Hf(a),["_",$APP.ej(a)].join(""));if("string"===typeof a){var b=$APP.qj(/(?:([^\/]+)\/)?([^\/]+)/,a);$APP.E.j(b,0,null);a=$APP.E.j(b,1,null);b=$APP.E.j(b,2,null);return $APP.B.g("_",$APP.E.g(b,0))?$APP.p(a)?[$APP.t.h(a),"/",$APP.sj.g(b,1)].join(""):$APP.sj.g(b,1):$APP.p(a)?[$APP.t.h(a),"/_",$APP.t.h(b)].join(""):["_",$APP.t.h(b)].join("")}throw $APP.Gm.g(["Bad attribute type: ",
$APP.bk.l($APP.I([a])),", expected keyword or string"].join(""),new $APP.n(null,2,[$APP.SF,$0,b0,a],null));},Ysa=function(a,b){function c(f,g){return $APP.jf.j(function(k,l){var h=d(f,l);return null==h?$APP.Ir.B(k,0,$APP.Af,l):$APP.Ir.J(k,1,$APP.Vi,l,h)},new $APP.M(null,2,5,$APP.O,[$APP.qh,$APP.gg],null),g)}function d(f,g){return $APP.VM.h($APP.y(YZ(a,$Z,new $APP.M(null,2,5,$APP.O,[f,g],null))))}var e=$APP.ig(i_(a,F_));return null==e?new $APP.M(null,2,5,$APP.O,[b,null],null):$APP.nf(function(f,g,
k){var l=$APP.E.j(f,0,null);f=$APP.E.j(f,1,null);if($APP.Ze(e,g)){if(X0(a,g)&&(Uqa(k)||$APP.Fe(k)&&!$APP.Je(k))){var h=c(g,k);k=$APP.E.j(h,0,null);h=$APP.E.j(h,1,null);return new $APP.M(null,2,5,$APP.O,[$APP.Ee(k)?l:$APP.Vi.j(l,g,k),$APP.Ee(h)?f:$APP.Vi.j(f,g,h)],null)}h=d(g,k);return null==h?new $APP.M(null,2,5,$APP.O,[$APP.Vi.j(l,g,k),f],null):new $APP.M(null,2,5,$APP.O,[l,$APP.Vi.j(f,g,$APP.fg([k,h]))],null)}return new $APP.M(null,2,5,$APP.O,[$APP.Vi.j(l,g,k),f],null)},new $APP.M(null,2,5,$APP.O,
[$APP.gg,$APP.gg],null),b)},bta=function(a,b){var c=$APP.nf(function(g,k,l){return $APP.nf(function(h,r,q){return $APP.Vi.j(h,q,new $APP.M(null,2,5,$APP.O,[k,r],null))},g,l)},$APP.gg,b);if(2<=$APP.le(c)){b=$APP.y(c);a=$APP.E.j(b,0,null);var d=$APP.E.j(b,1,null);b=$APP.E.j(d,0,null);d=$APP.E.j(d,1,null);var e=$APP.qe(c);c=$APP.E.j(e,0,null);var f=$APP.E.j(e,1,null);e=$APP.E.j(f,0,null);f=$APP.E.j(f,1,null);throw $APP.Gm.g(["Conflicting upserts: ",$APP.bk.l($APP.I([new $APP.M(null,2,5,$APP.O,[b,d],
null)]))," resolves to ",$APP.bk.l($APP.I([a])),", but ",$APP.bk.l($APP.I([new $APP.M(null,2,5,$APP.O,[e,f],null)]))," resolves to ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,3,[$APP.SF,Zsa,$sa,new $APP.M(null,3,5,$APP.O,[a,b,d],null),ata,new $APP.M(null,3,5,$APP.O,[c,e,f],null)],null));}d=$APP.y(c);b=$APP.E.j(d,0,null);c=$APP.E.j(d,1,null);d=$APP.E.j(c,0,null);c=$APP.E.j(c,1,null);a=g1.h(a);if(null!=b&&null!=a&&!f1(a)&&$APP.Ui.g(b,a))throw $APP.Gm.g(["Conflicting upsert: ",$APP.bk.l($APP.I([new $APP.M(null,
2,5,$APP.O,[d,c],null)]))," resolves to ",$APP.bk.l($APP.I([b])),", but entity already has :db/id ",$APP.bk.l($APP.I([a]))].join(""),new $APP.n(null,3,[$APP.SF,Zsa,$sa,new $APP.M(null,3,5,$APP.O,[b,d,c],null),ata,new $APP.n(null,1,[g1,a],null)],null));return b},cta=function(a,b,c){return Wsa(b)||X0(a,b)?Uqa(c)||$APP.Fe(c)&&!$APP.Je(c)?$APP.B.g($APP.le(c),2)&&W0(a,$APP.y(c),F_)?new $APP.M(null,1,5,$APP.O,[c],null):c:new $APP.M(null,1,5,$APP.O,[c],null):new $APP.M(null,1,5,$APP.O,[c],null)},dta=function(a,
b){var c=g1.h(b),d=$APP.Dg.g($APP.V,$APP.jf.j(function(e,f){var g=$APP.E.j(f,0,null);f=$APP.E.j(f,1,null);return $APP.Ir.B(e,W0(a,g,R_)?1:0,$APP.Af,new $APP.M(null,2,5,$APP.O,[g,f],null))},new $APP.M(null,2,5,$APP.O,[$APP.qh,$APP.qh],null),b));return function g(f){return new $APP.Pf(null,function(){for(var k=f;;){var l=$APP.x(k);if(l){var h=l,r=$APP.y(h),q=$APP.E.j(r,0,null),u=$APP.E.j(r,1,null);if($APP.Ui.g(q,g1)){var C=r0(q,$APP.fg([g1,c,q,u])),F=Wsa(q),N=F?Xsa(q):q;if(F&&!s0(a,N))throw $APP.Gm.g(["Bad attribute ",
$APP.bk.l($APP.I([q])),": reverse attribute name requires {:db/valueType :db.type/ref} in schema"].join(""),new $APP.n(null,3,[$APP.SF,$0,b0,q,Lsa,$APP.fg([g1,c,q,u])],null));if(l=$APP.x(function(Q,T,X,da,ha,ka,Y,D,A,ba,G,H){return function fa(ea){return new $APP.Pf(null,function(ma,sa,ta,ua,ya,Da,Ia,za,La,Xa,eb){return function(){for(;;){var Ib=$APP.x(ea);if(Ib){if($APP.Me(Ib)){var Yb=$APP.hd(Ib),qc=$APP.le(Yb),Ec=$APP.Sf(qc);a:for(var Hd=0;;)if(Hd<qc){var lc=$APP.we(Yb,Hd);$APP.Wf(Ec,s0(a,ua)&&
$APP.Je(lc)?$APP.Vi.j(lc,Xsa(Ia),eb):ta?new $APP.M(null,4,5,$APP.O,[h1,lc,ua,eb],null):new $APP.M(null,4,5,$APP.O,[h1,eb,ua,lc],null));Hd+=1}else{Yb=!0;break a}return Yb?$APP.Vf($APP.Xf(Ec),fa($APP.id(Ib))):$APP.Vf($APP.Xf(Ec),null)}Ec=$APP.y(Ib);return $APP.Df(s0(a,ua)&&$APP.Je(Ec)?$APP.Vi.j(Ec,Xsa(Ia),eb):ta?new $APP.M(null,4,5,$APP.O,[h1,Ec,ua,eb],null):new $APP.M(null,4,5,$APP.O,[h1,eb,ua,Ec],null),fa($APP.Qd(Ib)))}return null}}}(Q,T,X,da,ha,ka,Y,D,A,ba,G,H),null,null)}}(k,C,F,N,null,r,q,u,h,
l,c,d)(cta(a,q,u))))return $APP.V.g(l,g($APP.Qd(k)))}k=$APP.Qd(k)}else return null}},null,null)}(d)},gta=function(a,b){$APP.E.j(b,0,null);var c=$APP.E.j(b,1,null),d=$APP.E.j(b,2,null),e=$APP.E.j(b,3,null),f=$APP.E.j(b,4,null);r0(d,b);Msa(e,b);b=$APP.p(f)?f:a1(a);f=H0.h(a);c=y0(f,c);e=s0(f,d)?y0(f,e):e;var g=gZ.B(c,d,e,b);f=X0(f,d)?esa(f,new $APP.M(null,3,5,$APP.O,[c,d,e],null)):esa(f,new $APP.M(null,2,5,$APP.O,[c,d],null));return null==f?Vsa(a,g):$APP.B.g(f.v,e)?$APP.Ir.B(a,eta,fta,g):Vsa(Vsa(a,gZ.J(c,
d,f.v,b,!1)),g)},hta=function(a,b){var c=a1(a);return Vsa(a,gZ.J(b.e,b.a,b.v,c,!1))},jta=function(a,b){return $APP.Vh.j($APP.Zi,$APP.jp.g($APP.Xg.h(function(c){return W0(a,c.a,O_)}),$APP.Dj.h(function(c){return new $APP.M(null,2,5,$APP.O,[ita,c.v],null)})),b)},lta=function(a,b,c,d,e){if($APP.Ze(J0.h(a),d))throw $APP.Gm.g(["Conflicting upsert: ",$APP.bk.l($APP.I([d]))," resolves both to ",$APP.bk.l($APP.I([e]))," and ",$APP.bk.l($APP.I([$APP.Mp.g(a,new $APP.M(null,2,5,$APP.O,[J0,d],null))]))].join(""),
new $APP.n(null,1,[$APP.SF,Zsa],null));b=$APP.Vi.j(J0.h(b),d,e);a=$APP.Vi.j(a,J0,b);return kta.g?kta.g(a,c):kta.call(null,a,c)},ota=function(a){var b=H0.h(a);h_(b);i_(b,ssa);return $APP.nf(function(c,d,e){return $APP.nf(function(f,g,k){k=$APP.Ag($APP.zb,k)?null:k;var l=XY.h($APP.y(YZ(b,o_,new $APP.M(null,2,5,$APP.O,[d,g],null))));return $APP.B.g(k,l)?f:null==k?$APP.Af.g(f,$APP.Ae(new $APP.M(null,4,5,$APP.O,[mta,d,g,l],null),new $APP.n(null,1,[nta,!0],null))):$APP.Af.g(f,$APP.Ae(new $APP.M(null,4,
5,$APP.O,[h1,d,g,k],null),new $APP.n(null,1,[nta,!0],null)))},c,e)},$APP.qh,Usa.h(a))},qta=function(a){var b=pta.h(a);b=$APP.jf.j(function(c,d){return $APP.p(UY(d))?$APP.um.g(c,$APP.VM.h(d)):c},b,$APP.V.g(I0.h(a),eta.h(a)));if($APP.Ee(b))return $APP.um.l(a,pta,$APP.I([eta]));throw $APP.Gm.g(["Tempids used only as value in transaction: ",$APP.bk.l($APP.I([$APP.vl.h($APP.Si(b))]))].join(""),new $APP.n(null,2,[$APP.SF,$0,J0,b],null));},kta=function(a,b){if(null!=b&&!$APP.Ie(b))throw $APP.Gm.g(["Bad transaction data ",
$APP.bk.l($APP.I([b])),", expected sequential collection"].join(""),new $APP.n(null,2,[$APP.SF,$0,I0,b],null));for(var c=!$APP.Ee(i_(H0.h(a),R_)),d=c?$APP.ss.g(b,$APP.lp.h(rta)):b,e=a,f=d;;){if($APP.Ee(f))return $APP.Ir.J($APP.Ir.J(qta(e),J0,$APP.Vi,Nsa,a1(e)),H0,$APP.Ir,t_,$APP.Yd);var g=f,k=$APP.x(g),l=$APP.y(k),h=$APP.z(k),r=l,q=h;if(null==r)f=q;else if($APP.B.g(rta,r))if($APP.Ze(e,Usa)){var u=$APP.um.g(e,Usa);q=$APP.V.g(ota(e),q);e=u;f=q}else f=q;else{var C=H0.h(e),F=J0.h(e);if($APP.Je(r)){var N=
g1.h(r);if(Osa(N))u=a1(e),e=Qsa(e,N,u),f=q=$APP.Df($APP.Vi.j(r,g1,u),q);else if($APP.Ie(N))u=y0(C,N),f=q=$APP.Df($APP.Vi.j(r,g1,u),q);else{var Q=Ysa(C,r);u=$APP.E.j(Q,0,null);Q=$APP.E.j(Q,1,null);var T=bta(u,Q);if(null!=T){if(f1(N)&&$APP.Ze(F,N)&&$APP.Ui.g(T,$APP.Xe.g(F,N)))return lta(a,e,b,N,T);e=$APP.Ir.B(Qsa(e,N,T),eta,fta,gZ.B(T,null,null,536870912));f=q=$APP.V.g(dta(C,$APP.Vi.j(u,g1,T)),q)}else if("number"===typeof N||null==N||"string"===typeof N)u=null==N?r_.h(C)+1:f1(N)?function(){var ua=$APP.Xe.g(F,
N);return $APP.p(ua)?ua:r_.h(C)+1}():N,r=$APP.Vi.j(r,g1,u),e=Qsa(e,N,u),f=q=$APP.V.g(dta(C,r),q);else throw $APP.Gm.g(["Expected number, string or lookup ref for :db/id, got ",$APP.bk.l($APP.I([N]))].join(""),new $APP.n(null,2,[$APP.SF,Jsa,sta,r],null));}}else if($APP.Ie(r)){var X=r;Q=$APP.E.j(X,0,null);var da=$APP.E.j(X,1,null);u=$APP.E.j(X,2,null);var ha=$APP.E.j(X,3,null);if($APP.B.g(Q,tta)){u=$APP.x(r);r=$APP.y(u);u=$APP.z(u);var ka=r;r=$APP.y(u);u=$APP.z(u);f=q=$APP.V.g($APP.Dg.j(r,C,u),q)}else if(Q instanceof
$APP.K&&$APP.Bb(uta.h?uta.h(Q):uta.call(null,Q))){ka=Y0(C,Q);if(null==ka)throw $APP.Gm.g(["Can’t find entity for transaction fn ",$APP.bk.l($APP.I([Q]))].join(""),new $APP.n(null,3,[$APP.SF,$0,$APP.Vca,tta,I0,r],null));da=XY.h(esa(C,new $APP.M(null,2,5,$APP.O,[ka,vta],null)));u=$APP.z(r);if($APP.ye(da))f=q=$APP.V.g($APP.Dg.j(da,C,u),q);else throw $APP.Gm.g(["Entity ",$APP.bk.l($APP.I([Q]))," expected to have :db/fn attribute with fn? value"].join(""),new $APP.n(null,3,[$APP.SF,$0,$APP.Vca,tta,I0,
r],null));}else{if(f1(da)&&$APP.Ui.g(Q,h1))throw $APP.Gm.g(["Can't use tempid in '",$APP.bk.l($APP.I([r])),"'. Tempids are allowed in :db/add only"].join(""),new $APP.n(null,2,[$APP.SF,$0,$APP.Pca,r],null));if($APP.B.g(Q,wta)||$APP.B.g(Q,xta)){var Y=r;ka=$APP.E.j(Y,0,null);var D=$APP.E.j(Y,1,null),A=$APP.E.j(Y,2,null),ba=$APP.E.j(Y,3,null),G=$APP.E.j(Y,4,null),H=y0(C,D),aa=r0(A,r),ea=s0(C,A)?y0(C,ba):ba,fa=s0(C,A)?y0(C,G):G,ma=Msa(fa,r),sa=$APP.rh(WZ(C,new $APP.M(null,2,5,$APP.O,[H,A],null)));if(X0(C,
A))if($APP.p($APP.Bg(function(ua,ya,Da,Ia,za,La,Xa,eb,Ib,Yb,qc){return function(Ec){return $APP.B.g(Ec.v,qc)}}(e,f,Y,ka,D,A,ba,G,H,aa,ea,fa,ma,sa,X,Q,da,u,ha,C,F,g,k,l,h,r,q,a,c,d),sa)))e=gta(e,new $APP.M(null,4,5,$APP.O,[h1,H,A,fa],null)),f=q;else throw $APP.Gm.g([":db.fn/cas failed on datom [",$APP.bk.l($APP.I([H]))," ",$APP.bk.l($APP.I([A]))," ",$APP.bk.l($APP.I([$APP.Dj.g(XY,sa)])),"], expected ",$APP.bk.l($APP.I([ea]))].join(""),new $APP.n(null,4,[$APP.SF,yta,zta,sa,Ata,ea,Bta,fa],null));else if(Q=
XY.h($APP.y(sa)),$APP.B.g(Q,ea))e=gta(e,new $APP.M(null,4,5,$APP.O,[h1,H,A,fa],null)),f=q;else throw $APP.Gm.g([":db.fn/cas failed on datom [",$APP.bk.l($APP.I([H]))," ",$APP.bk.l($APP.I([A]))," ",$APP.bk.l($APP.I([Q])),"], expected ",$APP.bk.l($APP.I([ea]))].join(""),new $APP.n(null,4,[$APP.SF,yta,zta,$APP.y(sa),Ata,ea,Bta,fa],null));}else if(Osa(da))r=Qsa(e,da,a1(e)),q=$APP.Df(new $APP.M(null,4,5,$APP.O,[Q,a1(e),u,ha],null),q),e=r,f=q;else if(s0(C,u)&&Osa(ha))r=Qsa(e,ha,a1(e)),q=$APP.Df(new $APP.M(null,
4,5,$APP.O,[Q,da,u,a1(e)],null),q),e=r,f=q;else if(s0(C,u)&&f1(ha))ka=$APP.Xe.g(F,ha),null==ka?(r=r_.h(C)+1,e=$APP.Ir.J(Qsa(e,ha,r),pta,$APP.Vi,r,ha),f=q=f):(r=ka,e=$APP.Ir.J(e,pta,$APP.Vi,r,ha),f=q=$APP.Df(new $APP.M(null,4,5,$APP.O,[Q,da,u,r],null),q));else if(f1(da)){T=W0(C,u,F_)?$APP.VM.h($APP.y(YZ(C,$Z,new $APP.M(null,2,5,$APP.O,[u,ha],null)))):null;var ta=$APP.Xe.g(F,da);if($APP.p(function(){var ua=T;return $APP.p(ua)?(ua=ta,$APP.p(ua)?$APP.Ui.g(T,ta):ua):ua}()))return lta(a,e,b,da,T);r=function(){var ua=
T;if($APP.p(ua))return ua;ua=ta;return $APP.p(ua)?ua:r_.h(C)+1}();e=Qsa(e,da,r);f=q=$APP.Df(new $APP.M(null,4,5,$APP.O,[Q,r,u,ha],null),q)}else if($APP.Bb(nta.h($APP.Be(r)))&&W0(C,u,R_))if(D=$APP.Mp.g(C,new $APP.M(null,3,5,$APP.O,[m_,u,P_],null)),$APP.B.g($APP.le(D),$APP.le(ha))&&$APP.Ag($APP.Iba,ha)&&$APP.Ag(function(ua,ya,Da,Ia,za,La,Xa,eb,Ib){return function(Yb){var qc=$APP.E.j(Yb,0,null);Yb=$APP.E.j(Yb,1,null);qc=XY.h($APP.y(YZ(Ib,o_,new $APP.M(null,2,5,$APP.O,[La,qc],null))));return $APP.B.g(Yb,
qc)}}(e,f,D,X,Q,da,u,ha,C,F,g,k,l,h,r,q,a,c,d),$APP.Dj.j($APP.Wt,D,ha)))f=q;else throw $APP.Gm.g(["Can’t modify tuple attrs directly: ",$APP.bk.l($APP.I([r]))].join(""),new $APP.n(null,2,[$APP.SF,$0,I0,r],null));else if($APP.B.g(Q,h1))e=gta(e,r),f=q;else if($APP.B.g(Q,mta)&&null!=ha)ka=Y0(C,da),null==ka?f=q:(D=ka,Q=s0(C,u)?y0(C,ha):ha,r0(u,r),Msa(Q,r),u=esa(C,new $APP.M(null,3,5,$APP.O,[D,u,Q],null)),null==u?f=q:(e=hta(e,u),f=q));else if($APP.B.g(Q,Cta)||$APP.B.g(Q,mta))ka=Y0(C,da),null==ka?f=q:(D=
ka,ka=r0(u,r),sa=$APP.rh(WZ(C,new $APP.M(null,2,5,$APP.O,[D,u],null))),e=$APP.jf.j(hta,e,sa),f=q=$APP.V.g(jta(C,sa),q));else if($APP.B.g(Q,ita)||$APP.B.g(Q,Dta))ka=Y0(C,da),null==ka?f=q:(D=ka,sa=$APP.rh(WZ(C,new $APP.M(null,1,5,$APP.O,[D],null))),u=$APP.rh($APP.Vg.l(function(ua,ya,Da,Ia,za,La,Xa,eb,Ib,Yb,qc){return function(Ec){return WZ(qc,new $APP.M(null,3,5,$APP.O,[null,Ec,Ia],null))}}(e,f,sa,D,ka,X,Q,da,u,ha,C,F,g,k,l,h,r,q,a,c,d),$APP.I([i_(C,M_)]))),e=$APP.jf.j(hta,e,$APP.V.g(sa,u)),f=q=$APP.V.g(jta(C,
sa),q));else throw $APP.Gm.g(["Unknown operation at ",$APP.bk.l($APP.I([r])),", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident \x3ckeyword\x3e :db/fn \x3cIfn\x3e}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)"].join(""),new $APP.n(null,3,[$APP.SF,$0,$APP.Vca,Q,I0,r],null));}}else if(Gra(r))Q=r,da=$APP.E.j(Q,0,null),u=$APP.E.j(Q,1,null),ha=$APP.E.j(Q,
2,null),r=$APP.E.j(Q,3,null),Q=$APP.E.j(Q,4,null),$APP.p(Q)?(e=gta(e,new $APP.M(null,5,5,$APP.O,[h1,da,u,ha,r],null)),f=q):f=q=$APP.Df(new $APP.M(null,4,5,$APP.O,[mta,da,u,ha],null),q);else throw $APP.Gm.g(["Bad entity type at ",$APP.bk.l($APP.I([r])),", expected map or vector"].join(""),new $APP.n(null,2,[$APP.SF,$0,I0,r],null));}}},i1=function(a,b){b="number"===typeof b||$APP.Ie(b)||b instanceof $APP.K?Y0(a,b):null;if($APP.p(b)){var c=$APP.Jg(!1),d=$APP.Jg($APP.gg);return Eta.B?Eta.B(a,b,c,d):Eta.call(null,
a,b,c,d)}return null},Fta=function(a,b,c){return X0(a,b)?s0(a,b)?$APP.jf.j(function(d,e){return $APP.Af.g(d,i1(a,XY.h(e)))},$APP.Zi,c):$APP.jf.j(function(d,e){return $APP.Af.g(d,XY.h(e))},$APP.Zi,c):s0(a,b)?i1(a,XY.h($APP.y(c))):XY.h($APP.y(c))},Gta=function(a,b,c,d){b=$APP.ig(WZ(a,new $APP.M(null,3,5,$APP.O,[null,c,b],null)));return $APP.p(b)?W0(a,c,O_)?i1(a,$APP.VM.h($APP.y(b))):$APP.jf.j(function(e,f){return $APP.Af.g(e,i1(a,$APP.VM.h(f)))},$APP.Zi,b):d},Hta=function(a){return $APP.p(a)?$APP.Yf(a):
null},Ita=function(a){k1.h?k1.h(a):k1.call(null,a);return function d(c){return new $APP.Pf(null,function(){for(;;){var e=$APP.x(c);if(e){if($APP.Me(e)){var f=$APP.hd(e),g=$APP.le(f),k=$APP.Sf(g);a:for(var l=0;;)if(l<g){var h=$APP.we(f,l),r=$APP.E.j(h,0,null);h=$APP.E.j(h,1,null);$APP.Wf(k,X0(a.db,r)?new $APP.M(null,2,5,$APP.O,[r,Hta(h)],null):new $APP.M(null,2,5,$APP.O,[r,h],null));l+=1}else{f=!0;break a}return f?$APP.Vf($APP.Xf(k),d($APP.id(e))):$APP.Vf($APP.Xf(k),null)}f=$APP.y(e);k=$APP.E.j(f,
0,null);f=$APP.E.j(f,1,null);return $APP.Df(X0(a.db,k)?new $APP.M(null,2,5,$APP.O,[k,Hta(f)],null):new $APP.M(null,2,5,$APP.O,[k,f],null),d($APP.Qd(e)))}return null}},null,null)}($APP.v(a.cache))},Jta=function(a,b,c,d){this.db=a;this.eid=b;this.Ik=c;this.cache=d;this.D=2162164483;this.K=0},Eta=function(a,b,c,d){return new Jta(a,b,c,d)},Kta=function(a,b){return b instanceof Jta&&$APP.B.g(a.eid,b.eid)},Mta=function(a){switch(arguments.length){case 2:return Lta(arguments[0],arguments[1]);case 3:return l1(arguments[0],
arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}},Lta=function(a,b){return l1(a,b,null)},l1=function(a,b,c){if($APP.B.g(b,g1))return a.eid;if(Wsa(b))return Gta(a.db,a.eid,Xsa(b),c);var d=$APP.v(a.cache);d=d.h?d.h(b):d.call(null,b);if(null==d){if($APP.p($APP.v(a.Ik)))return c;d=$APP.ig(WZ(a.db,new $APP.M(null,2,5,$APP.O,[a.eid,b],null)));if(null==d)return c;c=Fta(a.db,b,d);$APP.Kg(a.cache,$APP.Vi.j($APP.v(a.cache),b,c));return c}return d},Nta=
function(a,b){return $APP.nf(function(c,d,e){return $APP.Vi.j(c,d,W0(a,d,O_)?X0(a,d)?$APP.cj($APP.Dj.g(k1,e)):k1.h?k1.h(e):k1.call(null,e):e)},$APP.gg,b)},Ota=function(a,b){return $APP.jf.j(function(c,d){var e=eZ.h($APP.y(d));return $APP.Vi.j(c,e,Fta(a,e,d))},$APP.gg,$APP.ZA.g(eZ,b))},k1=function(a){if(!$APP.p($APP.v(a.Ik))){var b=$APP.ig(WZ(a.db,new $APP.M(null,1,5,$APP.O,[a.eid],null)));$APP.p(b)&&($APP.Kg(a.cache,Nta(a.db,Ota(a.db,b))),$APP.pd(a.Ik,!0))}return a},Pta=function(a){return $APP.jf.j($APP.Yz,
0,a)},Qta=function(a){return Pta(a)/$APP.le(a)},Rta=function(a){var b=Qta(a);return Pta(function(){return function e(d){return new $APP.Pf(null,function(){for(;;){var f=$APP.x(d);if(f){if($APP.Me(f)){var g=$APP.hd(f),k=$APP.le(g),l=$APP.Sf(k);a:for(var h=0;;)if(h<k){var r=$APP.we(g,h)-b;l.add(r*r);h+=1}else{g=!0;break a}return g?$APP.Vf($APP.Xf(l),e($APP.id(f))):$APP.Vf($APP.Xf(l),null)}l=$APP.y(f)-b;return $APP.Df(l*l,e($APP.Qd(f)))}return null}},null,null)}(a)}())/$APP.le(a)},n1=function(a,b,c,
d,e,f,g,k,l,h,r,q,u,C,F){this.as=a;this.Lj=b;this.rj=c;this.name=d;this.pattern=e;this.zj=f;this.Aj=g;this.Dj=k;this.gf=l;this.yj=h;this.Bj=r;this.xj=q;this.G=u;this.A=C;this.F=F;this.D=2230716170;this.K=139264},Sta=function(a){var b=$APP.um.l(a,$APP.Er,$APP.I([$APP.Zn,o1,$APP.S,p1,q1,r1,t1,y1,z1,A1,B1]));b=$APP.Ke(a)?$APP.Vh.g($APP.gg,b):b;return new n1($APP.Er.h(a),$APP.Zn.h(a),o1.h(a),$APP.S.h(a),p1.h(a),q1.h(a),r1.h(a),t1.h(a),y1.h(a),z1.h(a),A1.h(a),B1.h(a),null,$APP.ig(b),null)},C1=function(a,
b,c,d,e,f,g,k){this.ij=a;this.Rj=b;this.Yj=c;this.Qj=d;this.Fj=e;this.G=f;this.A=g;this.F=k;this.D=2230716170;this.K=139264},Tta=function(a){var b=$APP.um.l(a,D1,$APP.I([F1,G1,I1,J1]));b=$APP.Ke(a)?$APP.Vh.g($APP.gg,b):b;return new C1(D1.h(a),F1.h(a),G1.h(a),I1.h(a),J1.h(a),null,$APP.ig(b),null)},K1=function(a,b,c){if($APP.p(a))return null;throw $APP.Gm.g(["Expected ",$APP.t.h(b),", got: ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,2,[$APP.SF,Uta,Vta,c],null));},Yta=function(a,b){var c=Wsa(b),
d=c?Xsa(b):b,e=s0(a,d),f=W0(a,d,O_);a=X0(a,d);if(c){K1(e,"reverse attribute having :db.type/ref",b);var g=!0}else g=null;return Sta($APP.Ai([y1,o1,t1,$APP.S,$APP.Er,B1,A1,z1,p1],[$APP.of,a?1E3:null,g,d,b,f?!0:null,e?!0:null,a?!0:null,e?c?Wta:f?Xta:Wta:null]))},Zta=function(a,b,c){K1("number"===typeof c&&0<c||null==c,"(positive-number | nil)",c);K1(X0(a,$APP.S.h(b)),"limit attribute having :db.cardinality/many",$APP.S.h(b))},aua=function(a,b){var c=function(){var d=$APP.y(b);return L1.g?L1.g(a,d):
L1.call(null,a,d)}();if(null==c)return null;K1($APP.Cg($APP.le($APP.z(b))),"even number of opts",b);return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);switch(f instanceof $APP.K?f.ba:null){case "as":return $APP.Vi.j(d,$APP.Er,e);case "limit":return Zta(a,d,e),$APP.Vi.j(d,o1,e);case "default":return $APP.Vi.j(d,$APP.Zn,e);case "xform":f=$APP.Vi.j;var g=$APP.ye(e)?e:null;if($APP.p(g))e=g;else if(g=$APP.Xe.g($ta,e),$APP.p(g))e=g;else throw $APP.Gm.g(["Can't resolve symbol ",
$APP.bk.l($APP.I([e]))].join(""),new $APP.n(null,2,[$APP.SF,Uta,Vta,e],null));return f.call($APP.Vi,d,y1,e);default:return K1(!1,"one of :as, :limit, :default, :xform",b)}},c,$APP.pp.g(2,$APP.z(b)))},L1=function(a,b){var c;!(c=b instanceof $APP.K)&&(c="string"===typeof b)&&(c=new $APP.Yi(null,new $APP.n(null,2,["limit",null,"default",null],null),null),c=c.h?c.h(b):c.call(null,b),c=$APP.Bb(c));if(c)return Yta(a,b);if($APP.Ie(b)){c=aua(a,b);if($APP.p(c))return c;c=$APP.y(b);var d=new $APP.Yi(null,new $APP.n(null,
2,[bua,null,"limit",null],null),null);c=d.h?d.h(c):d.call(null,c);$APP.p(c)?(K1($APP.B.g($APP.le(b),3),"['limit attr-name (positive-number | nil)]",b),$APP.E.j(b,0,null),d=$APP.E.j(b,1,null),c=$APP.E.j(b,2,null),d=L1.g?L1.g(a,d):L1.call(null,a,d),Zta(a,d,c),c=$APP.Vi.j(d,o1,c)):c=null;if($APP.p(c))return c;c=$APP.y(b);d=new $APP.Yi(null,new $APP.n(null,2,[$APP.TR,null,"default",null],null),null);c=d.h?d.h(c):d.call(null,c);$APP.p(c)?(K1($APP.B.g($APP.le(b),3),"['default attr-name any-value]",b),$APP.E.j(b,
0,null),d=$APP.E.j(b,1,null),c=$APP.E.j(b,2,null),a=L1.g?L1.g(a,d):L1.call(null,a,d),a=$APP.Vi.j(a,$APP.Zn,c)):a=null;return $APP.p(a)?a:K1(!1,"[attr-name attr-option+] | ['limit attr-name (positive-num | nil)] | ['default attr-name any-val]",b)}return null},cua=function(a,b){return $APP.Bg(function(c){var d=$APP.E.j(c,0,null);c=$APP.E.j(c,1,null);return $APP.p(a.h?a.h(d):a.call(null,d))?c:null},$APP.Dj.j($APP.Wt,b,$APP.Os.s()))},dua=function(a,b){var c=$APP.p(t1.h(b))?I1:D1,d=cua(function(e){return $APP.B.g($APP.Er.h(e),
$APP.Er.h(b))},$APP.Xe.g(a,c));return null==d?$APP.Ir.B(a,c,$APP.Af,b):$APP.Ir.J(a,c,$APP.Vi,d,b)},hua=function(a,b){K1($APP.Ie(b),"pattern to be sequential?",b);for(var c=Tta(new $APP.n(null,3,[D1,$APP.qh,I1,$APP.qh,J1,null],null));;){if($APP.Ee(b)){var d=c.ij,e=function(){return function(k){k=k.name;var l=new $APP.Yi(null,new $APP.n(null,2,[g1,null,":db/id",null],null),null);return l.h?l.h(k):l.call(null,k)}}(b,c,d);b=function(){return function(k){k=$APP.S.h(k);return k instanceof $APP.K?k:$APP.B.g(":",
$APP.sj.j(k,0,1))?$APP.Ej.h($APP.sj.g(k,1)):$APP.Ej.h(k)}}(b,c,d,e);d=$APP.p(function(){var k=c.Fj;return $APP.p(k)?$APP.Bb($APP.Bg(e,c.ij)):k}())?$APP.Af.g(d,eua):d;d=$APP.Yt.h($APP.Vz.g(b,d));var f=$APP.ts.g(e,d),g=$APP.y(f);f=$APP.ue(f);return Tta(new $APP.n(null,5,[D1,d,F1,g,G1,f,I1,$APP.Yt.h($APP.Vz.g(b,c.Qj)),J1,c.Fj],null))}g=$APP.y(b);if($APP.B.g($APP.QH,g)||$APP.B.g("*",g)||$APP.B.g(fua,g))b=$APP.z(b),c=d=$APP.Vi.j(c,J1,!0);else if($APP.Je(g))d=$APP.nf(function(){return function(k,l,h){var r=
L1(a,l);K1(null!=r,"attr-name | attr-expr",l);K1(s0(a,$APP.S.h(r)),"attribute having :db.type/ref",l);$APP.B.g(gua,h)||$APP.B.g("...",h)?l=$APP.Vi.l(r,p1,null,$APP.I([r1,!0,q1,null])):"number"===typeof h?(K1(0<h,"(positive-num | ...)",$APP.fg([l,h])),l=$APP.Vi.l(r,p1,null,$APP.I([r1,!0,q1,h]))):l=$APP.Vi.j(r,p1,hua.g?hua.g(a,h):hua.call(null,a,h));return dua(k,l)}}(b,c,g),c,g),b=$APP.z(b),c=d;else{d=L1(a,g);if(null==d)return K1(!1,"attr-name | attr-expr | map-spec | *",g);b=$APP.z(b);c=d=dua(c,d)}}},
Y1=function(a){return null==a?null:$APP.Wb(a)},Z1=function(a){return null==a?null:$APP.ac(a)},iua=function(a,b){return null==a?new $APP.J(null,b,null,1,null):$APP.Tb(a,b)},$1=function(a,b,c,d,e){this.db=a;this.ik=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},jua=function(a,b,c,d,e){a=a.ik;null==a||(a.B?a.B(b,c,d,e):a.call(null,b,c,d,e))},kua=function(a,b){if(null!=a&&null!=a.tk)a=a.tk(a,b);else{var c=kua[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=
kua._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("IFrame.-merge",a);}return a},lua=function(a,b){if(null!=a&&null!=a.mk)a=a.mk(a,b);else{var c=lua[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=lua._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("IFrame.-run",a);}return a},a2=function(a,b,c,d,e){this.value=a;this.jj=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},b2=function(a,b,c,d,e,f){this.tb=a;this.ab=b;this.jj=c;this.G=
d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},c2=function(a,b,c,d,e,f,g,k,l){this.lg=a;this.kj=b;this.tb=c;this.pattern=d;this.ab=e;this.jj=f;this.G=g;this.A=k;this.F=l;this.D=2230716170;this.K=139264},d2=function(a,b,c,d,e,f,g,k,l,h,r){this.lg=a;this.kj=b;this.tb=c;this.pattern=d;this.ab=e;this.ij=f;this.jj=g;this.id=k;this.G=l;this.A=h;this.F=r;this.D=2230716170;this.K=139264},e2=function(a,b,c,d,e,f,g,k,l,h){this.lg=a;this.kj=b;this.tb=c;this.pattern=d;this.ab=e;this.ij=f;this.id=g;this.G=
k;this.A=l;this.F=h;this.D=2230716170;this.K=139264},mua=function(a,b,c,d,e,f,g){return new e2(a,b,c,d,e,f,g,null,null,null)},f2=function(a,b,c,d,e,f){var g=e.Aj;$APP.p(g)||(g=e.xj,g=$APP.p(g)?e.pattern.Fj:g);if($APP.Bb(g))return d=e.pattern,nua.J?nua.J(a,b,c,d,f):nua.call(null,a,b,c,d,f);if($APP.p(b.h?b.h(f):b.call(null,f)))return new a2(new $APP.n(null,1,[g1,f],null),null,null,null,null);g=c.h?c.h(e):c.call(null,e);if($APP.p($APP.p(g)?0>=g:g))return new a2(null,null,null,null,null);b=$APP.Af.g(b,
f);c=$APP.p(g)?$APP.Ir.j(c,e,$APP.Xba):$APP.p(e.zj)?$APP.Vi.j(c,e,e.zj-1):c;d=$APP.p(e.Aj)?d:e.pattern;return nua.J?nua.J(a,b,c,d,f):nua.call(null,a,b,c,d,f)},nua=function(a,b,c,d,e){var f=a.db,g=$APP.p(function(){var k=d.Fj;return $APP.p(k)?f instanceof l_:k}())?TY(f.vj,gZ.B(e,null,null,536870912),gZ.B(e,null,null,2147483647)):$APP.p(d.Fj)?WZ(f,new $APP.M(null,1,5,$APP.O,[e],null)):null==d.Rj?null:function(){var k=d.Rj.name,l=d.Yj.name;return f instanceof l_?TY(f.vj,gZ.B(e,k,null,536870912),gZ.B(e,
l,null,2147483647)):fsa(f,o_,new $APP.M(null,1,5,$APP.O,[e],null))}();$APP.p(d.Fj)&&jua(a,oua,e,null,null);return new d2(b,c,$APP.Xc($APP.gg),d,Y1(d.ij),Z1(d.ij),g,e,null,null,null)},pua=function(a,b){var c=$APP.hg(a);a=$APP.Xe.g(c,Lsa);c=$APP.Xe.g(c,p1);b=Y0(a.db,b);if(null==b)return null;for(c=new $APP.J(null,nua(a,$APP.Zi,$APP.gg,c,b),null,1,null);;){b=Y1(c);var d=Z1(c);if(b instanceof a2){if(null==d)return b.value;c=Y1(d);d=Z1(d);c=iua(d,kua(c,b))}else c=$APP.jf.j(iua,d,lua(b,a))}},rua=function(a,
b,c){c=$APP.hg(c);c=$APP.Xe.g(c,qua);return new $APP.n(null,2,[p1,Rqa(nsa(a).Ij,b,function(){return hua(a,b)}),Lsa,new $1(a,c,null,null,null)],null)},sua=function(a,b){return $APP.Ab(a)?a[b]:$APP.E.g(a,b)},g2=function(a,b){return $APP.Je(a)?a.h?a.h(b):a.call(null,b):a[b]},tua=function(a,b){var c=Array($APP.le(b));$APP.jf.j(function(d,e){c[d]=a.h?a.h(e):a.call(null,e);return d+1},0,b);return c},uua=function(a,b){var c=Array($APP.le(b));$APP.jf.j(function(d,e){c[d]=a.g?a.g(d,e):a.call(null,d,e);return d+
1},0,b);return c},vua=function(a,b){return null==b.a?-1:0>=$APP.bf(a.a,b.a)?-1:1},wua=function(a){if($APP.Ee(q_.h(a)))return $APP.qh;for(var b=$APP.Xc(new $APP.M(null,1,5,$APP.O,[eZ.h($APP.y(q_.h(a)))],null));;){var c=$APP.E.g(b,$APP.le(b)-1),d=gZ.j(0,c,null),e=gZ.j(2147483647,null,null);c=eZ;var f=c.h,g=q_.h(a);d=xra(g,d,e,vua);c=f.call(c,$APP.y(d));if(null!=c)b=$APP.kh.g(b,c);else return $APP.Zc(b)}},xua=function(a){return 0==a.lastIndexOf(":",0)?$APP.Ej.h($APP.sj.g(a,1)):a},Aua=function(a,b){b=
$APP.hg(b);var c=$APP.Xe.j(b,yua,$APP.bk),d=$APP.Xe.j(b,zua,$APP.t),e=wua(a),f=$APP.Vh.g($APP.gg,$APP.Dj.j($APP.Wt,e,$APP.Os.s())),g=$APP.Jg($APP.Xc($APP.qh)),k=$APP.Jg($APP.Xc($APP.gg));b=uua(function(q,u){u.idx=q|0;q=u.e;var C=u.a;C=f.h?f.h(C):f.call(null,C);var F=u.v;if("string"!==typeof F)if("number"===typeof F)F=Infinity===F?[2]:-Infinity===F?[3]:$APP.p(isNaN(F))?[4]:F;else if(!$APP.Pe(F))if(F instanceof $APP.K){var N=$APP.Xe.g($APP.v(k),F);$APP.p(N)?F=N:(N=g.Jc(null,$APP.kh.g(g.Qa(null),F)),
N=$APP.le(N)-1,k.Jc(null,$APP.Yh.j(k.Qa(null),F,N)),F=N);F=[0,F]}else F=[1,c.h?c.h(F):c.call(null,F)];return[q,C,F,u.tx-536870912]},o_.h(a));var l=uua(function(q,u){return u.idx},q_.h(a)),h=uua(function(q,u){return u.idx},$Z.h(a)),r=function(){var q=m_.h(a);return c.h?c.h(q):c.call(null,q)}();e=tua(d,e);d=tua(d,$APP.Zc($APP.v(g)));return{count:$APP.le(o_.h(a)),tx0:536870912,"max-eid":r_.h(a),"max-tx":t_.h(a),schema:r,attrs:e,keywords:d,eavt:b,aevt:l,avet:h}},Bua=function(){},Cua=function(a,b,c){if(null!=
a&&null!=a.pj)a=a.pj(a,b,c);else{var d=Cua[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=Cua._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("ITraversable.-collect",a);}return a},Dua=function(a,b){if(null!=a&&null!=a.qj)a=a.qj(a,b);else{var c=Dua[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Dua._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("ITraversable.-collect-vars",a);}return a},Eua=function(a,
b){return $APP.Ie(a)&&$APP.B.g($APP.le(a),b)},h2=function(a,b){return $APP.Ie(b)?$APP.jf.j(function(c,d){d=a.h?a.h(d):a.call(null,d);return $APP.p(d)?$APP.Af.g(c,d):$APP.$d(null)},$APP.qh,b):null},Fua=function(a,b){return i2(a,b,$APP.qh)},i2=function(a,b,c){return $APP.p(a.h?a.h(b):a.call(null,b))?$APP.Af.g(c,b):(null!=b?$APP.Cd===b.oj||(b.Rd?0:$APP.Eb(Bua,b)):$APP.Eb(Bua,b))?Cua(b,a,c):Cra(b)?$APP.jf.j(function(d,e){return i2(a,e,d)},c,b):c},Gua=function(a){var b=$APP.Ee(a);return b?b:$APP.Dg.g($APP.ox,
a)},j2=function(a,b){return $APP.Ae(a,new $APP.n(null,1,[$APP.sm,b],null))},Hua=function(a){var b=$APP.sm.h($APP.Be(a));return $APP.p(b)?b:a},Iua=function(a,b,c){this.G=a;this.A=b;this.F=c;this.D=2230716170;this.K=139264},k2=function(a,b,c,d){this.mj=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},l2=function(a,b,c,d){this.mj=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},Jua=function(a,b,c){this.G=a;this.A=b;this.F=c;this.D=2230716170;this.K=139264},N2=function(a,b,c){this.G=
a;this.A=b;this.F=c;this.D=2230716170;this.K=139264},k3=function(a,b,c,d){this.value=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},o3=function(a,b,c,d){this.mj=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},D3=function(a){return a instanceof $APP.w&&$APP.B.g($APP.y($APP.ej(a)),"?")?new k2(a,null,null,null):null},Lua=function(a){var b=D3(a);if($APP.p(b))return b;throw $APP.Gm.g(["Cannot parse var, expected symbol starting with ?, got: ",$APP.bk.l($APP.I([a]))].join(""),
new $APP.n(null,2,[$APP.SF,Kua,$APP.QG,a],null));},Mua=function(a){return a instanceof $APP.w&&$APP.B.g($APP.y($APP.ej(a)),"$")?new l2(a,null,null,null):null},Nua=function(a){return a instanceof $APP.w&&$APP.B.g($APP.y($APP.ej(a)),"?")?null:new k3(a,null,null,null)},Oua=function(a){return a instanceof $APP.w&&$APP.Bb(D3(a))&&$APP.Bb(Mua(a))&&$APP.Bb($APP.B.g($APP.PH,a)?new N2(null,null,null):null)&&$APP.Bb($APP.B.g($APP.aI,a)?new Iua(null,null,null):null)?new o3(a,null,null,null):null},Pua=function(a){return $APP.p(Oua(a))?
new k2(a,null,null,null):null},Qua=function(a){var b=D3(a);if($APP.p(b))return b;b=Mua(a);return $APP.p(b)?b:Nua(a)},E3=function(a,b,c,d,e){this.required=a;this.fk=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},Sua=function(a){if($APP.Ie(a)){var b=$APP.Ie($APP.y(a))?new $APP.M(null,2,5,$APP.O,[$APP.y(a),$APP.z(a)],null):new $APP.M(null,2,5,$APP.O,[null,a],null),c=$APP.E.j(b,0,null);b=$APP.E.j(b,1,null);c=h2(Lua,c);b=h2(Lua,b);if($APP.Ee(c)&&$APP.Ee(b))throw $APP.Gm.g("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",
new $APP.n(null,2,[$APP.SF,Rua,$APP.QG,a],null));if(!$APP.p(Gua($APP.V.g(c,b))))throw $APP.Gm.g("Rule variables should be distinct",new $APP.n(null,2,[$APP.SF,Rua,$APP.QG,a],null));return new E3(c,b,null,null,null)}throw $APP.Gm.g("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.n(null,2,[$APP.SF,Rua,$APP.QG,a],null));},Tua=function(a){return $APP.V.g($APP.p(F3.h(a))?new $APP.M(null,1,5,$APP.O,[$APP.ep.g($APP.Hn,F3.h(a))],null):null,$APP.ep.g($APP.Hn,G3.h(a)))},
Uua=function(a){return new $APP.M(null,2,5,$APP.O,[$APP.le(F3.h(a)),$APP.le(G3.h(a))],null)},Vua=function(a,b,c){this.G=a;this.A=b;this.F=c;this.D=2230716170;this.K=139264},L3=function(a,b,c,d){this.tj=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},m4=function(a,b,c,d){this.Ge=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},n4=function(a,b,c,d){this.sj=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},Wua=function(a){return $APP.B.g($APP.aI,a)?j2(new Vua(null,
null,null),a):null},Xua=function(a){var b=Wua(a);return $APP.p(b)?b:o4.h?o4.h(a):o4.call(null,a)},Zua=function(a){var b=h2(Xua,a);if($APP.p(b)){if($APP.Ee(b))throw $APP.Gm.g("Tuple binding cannot be empty",new $APP.n(null,2,[$APP.SF,Yua,$APP.QG,a],null));return j2(new m4(b,null,null,null),a)}return null},o4=function(a){a:{if(Eua(a,2)&&$APP.B.g($APP.qe(a),gua)){var b=$APP.y(a);b=o4.h?o4.h(b):o4.call(null,b);if($APP.p(b)){b=j2(new n4(b,null,null,null),a);break a}throw $APP.Gm.g("Cannot parse collection binding",
new $APP.n(null,2,[$APP.SF,Yua,$APP.QG,a],null));}b=null}if($APP.p(b))return b;b=Eua(a,1)&&$APP.Ie($APP.y(a))?j2(new n4(Zua($APP.y(a)),null,null,null),a):null;if($APP.p(b))return b;b=Zua(a);if($APP.p(b))return b;b=Wua(a);if($APP.p(b))return b;b=D3(a);b=$APP.p(b)?j2(new L3(b,null,null,null),a):null;if($APP.p(b))return b;throw $APP.Gm.g("Cannot parse binding, expected (bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.n(null,2,[$APP.SF,Yua,$APP.QG,a],null));},$ua=function(a){if(null!=a&&null!=
a.sk)a=a.sk(a);else{var b=$ua[$APP.pa(null==a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=$ua._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("IFindVars.-find-vars",a);}return a},p4=function(a,b,c,d,e){this.wa=a;this.$d=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},q4=function(a,b,c,d,e,f){this.source=a;this.tj=b;this.pattern=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},ava=function(a){if(null!=a&&null!=a.lk)a=a.lk(a);else{var b=ava[$APP.pa(null==
a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=ava._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $APP.Gb("IFindElements.find-elements",a);}return a},r4=function(a,b,c,d){this.elements=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},s4=function(a,b,c,d){this.element=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},t4=function(a,b,c,d){this.element=a;this.G=b;this.A=c;this.F=d;this.D=2230716170;this.K=139264},u4=function(a,b,c,d){this.elements=a;this.G=b;this.A=
c;this.F=d;this.D=2230716170;this.K=139264},bva=function(a){return a instanceof p4},cva=function(a){return a instanceof q4},hva=function(a){var b=D3(a);if($APP.p(b))return b;a:{if($APP.Ie(a)&&$APP.B.g($APP.y(a),dva)){if(3<=$APP.le(a)&&4>=$APP.le(a)){var c=(b=$APP.B.g($APP.le(a),4))?$APP.E.g(a,1):eva;b=b?$APP.te(a):$APP.z(a);var d=$APP.E.j(b,0,null);b=$APP.E.j(b,1,null);c=Mua(c);d=D3(d);var e=D3(b);$APP.p(e)?b=e:(e=Pua(b),b=$APP.p(e)?e:Nua(b));if($APP.p($APP.p(c)?$APP.p(d)?b:d:c)){b=new q4(c,d,b,null,
null,null);break a}}throw $APP.Gm.g("Cannot parse pull expression, expect ['pull' src-var? variable (constant | variable | plain-symbol)]",new $APP.n(null,2,[$APP.SF,fva,Vta,a],null));}b=null}if($APP.p(b))return b;a:{if($APP.Ie(a)&&$APP.B.g($APP.y(a),gva)){if(3<=$APP.le(a)&&(b=$APP.x(a),$APP.y(b),c=$APP.z(b),b=$APP.y(c),c=$APP.z(c),b=D3(b),c=h2(Qua,c),$APP.p($APP.p(b)?c:b))){b=new p4(b,c,null,null,null);break a}throw $APP.Gm.g("Cannot parse custom aggregate call, expect ['aggregate' variable fn-arg+]",
new $APP.n(null,2,[$APP.SF,fva,Vta,a],null));}b=null}$APP.p(b)?a=b:$APP.Ie(a)&&2<=$APP.le(a)?(b=$APP.x(a),a=$APP.y(b),b=$APP.z(b),a=Oua(a),b=h2(Qua,b),a=$APP.p($APP.p(a)?b:a)?new p4(a,b,null,null,null):null):a=null;return a},iva=function(a){var b=h2(hva,a);b=null==b?null:new r4(b,null,null,null);if($APP.p(b))return b;a:{if($APP.Ie(a)&&$APP.B.g($APP.le(a),1)&&(b=$APP.y(a),$APP.Ie(b)&&$APP.B.g($APP.le(b),2)&&$APP.B.g($APP.qe(b),gua))){b=hva($APP.y(b));b=null==b?null:new s4(b,null,null,null);break a}b=
null}if($APP.p(b))return b;$APP.Ie(a)&&$APP.B.g($APP.le(a),2)&&$APP.B.g($APP.qe(a),$APP.jl)?(b=hva($APP.y(a)),b=null==b?null:new t4(b,null,null,null)):b=null;if($APP.p(b))return b;$APP.Ie(a)&&$APP.B.g($APP.le(a),1)?(b=$APP.y(a),b=h2(hva,b),b=null==b?null:new u4(b,null,null,null)):b=null;if($APP.p(b))return b;throw $APP.Gm.g("Cannot parse :find, expected: (find-rel | find-coll | find-tuple | find-scalar)",new $APP.n(null,2,[$APP.SF,fva,Vta,a],null));},v4=function(a,b,c,d,e){this.type=a;this.gk=b;this.G=
c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},jva=function(a,b){if(!$APP.Ee(b)&&$APP.Ag($APP.Fd,b))switch(a instanceof $APP.K?a.ba:null){case "keys":return new v4(a,$APP.ep.g($APP.Ej,b),null,null,null);case "syms":return new v4(a,$APP.rh(b),null,null,null);case "strs":return new v4(a,$APP.ep.g($APP.t,b),null,null,null);default:return null}else return null},kva=function(a){var b=Mua(a);$APP.p(b)||(b=$APP.B.g($APP.PH,a)?new N2(null,null,null):null,b=$APP.p(b)?b:Pua(a));return $APP.p(b)?j2(new L3(b,
null,null,null),a):o4(a)},mva=function(a){var b=h2(kva,a);if($APP.p(b))return b;throw $APP.Gm.g("Cannot parse :in clause, expected (src-var | % | plain-symbol | bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.n(null,2,[$APP.SF,lva,$APP.QG,a],null));},w4=function(a,b,c,d,e){this.source=a;this.pattern=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},x4=function(a,b,c,d,e){this.wa=a;this.$d=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},y4=function(a,b,c,d,e,f){this.wa=
a;this.$d=b;this.sj=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},z4=function(a,b,c,d,e,f){this.source=a;this.name=b;this.$d=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},A4=function(a,b,c,d,e,f){this.source=a;this.uj=b;this.lj=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},B4=function(a,b,c,d,e,f){this.source=a;this.Zj=b;this.lj=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},nva=function(a,b,c,d){this.lj=a;this.G=b;this.A=c;this.F=d;this.D=
2230716170;this.K=139264},ova=function(a){var b=$APP.B.g($APP.aI,a)?new Iua(null,null,null):null;if($APP.p(b))return b;b=D3(a);return $APP.p(b)?b:Nua(a)},pva=function(a){if($APP.Ie(a)){var b=Mua($APP.y(a));return $APP.p(b)?new $APP.M(null,2,5,$APP.O,[b,$APP.z(a)],null):new $APP.M(null,2,5,$APP.O,[new Jua(null,null,null),a],null)}return null},qva=function(a){if($APP.Ie(a)){var b=$APP.x(a);a=$APP.y(b);b=$APP.z(b);b=null==b?$APP.qh:b;var c=Oua(a);a=$APP.p(c)?c:D3(a);b=h2(Qua,b);return $APP.p($APP.p(a)?
b:a)?new $APP.M(null,2,5,$APP.O,[a,b],null):null}return null},rva=function(a,b,c){if($APP.Ee(a)&&$APP.Ee(b))throw $APP.Gm.g("Join variables should not be empty",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,c],null));},sva=function(a,b){rva(null,D4.h(a),b);return a},uva=function(a,b){var c=$APP.hg(a);c=$APP.Xe.g(c,tva);var d=$APP.hg(c);c=$APP.Xe.g(d,F3);d=$APP.Xe.g(d,G3);rva(c,d,b);return a},vva=function(a){if($APP.Ie(a)&&$APP.B.g($APP.hx,$APP.y(a))){var b=$APP.z(a);b=E4.h?E4.h(b):E4.call(null,b);if($APP.p($APP.ig(b)))return new nva(b,
null,null,null);throw $APP.Gm.g("Cannot parse 'and' clause, expected [ 'and' clause+ ]",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));}return null},xva=function(a){a:{var b=pva(a);if($APP.p(b)){var c=$APP.E.j(b,0,null);b=$APP.E.j(b,1,null);var d=$APP.x(b);b=$APP.y(d);d=$APP.z(d);if($APP.B.g($APP.RJ,b)){b=E4.h?E4.h(d):E4.call(null,d);if($APP.p(b)){c=sva(j2(new A4(c,$APP.rh($APP.UA.h(F4($APP.qh,b))),b,null,null,null),a),a);break a}throw $APP.Gm.g("Cannot parse 'not' clause, expected [ src-var? 'not' clause+ ]",
new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));}}c=null}if($APP.p(c))return c;a:{b=pva(a);if($APP.p(b)){c=$APP.E.j(b,0,null);b=$APP.E.j(b,1,null);d=$APP.x(b);b=$APP.y(d);var e=$APP.z(d);d=$APP.y(e);e=$APP.z(e);if($APP.B.g(wva,b)){b=h2(D3,d);d=E4.h?E4.h(e):E4.call(null,e);if($APP.p($APP.p(b)?d:b)){c=sva(j2(new A4(c,b,d,null,null,null),a),a);break a}throw $APP.Gm.g("Cannot parse 'not-join' clause, expected [ src-var? 'not-join' [variable+] clause+ ]",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));
}}c=null}if($APP.p(c))return c;a:{b=pva(a);if($APP.p(b)&&(c=$APP.E.j(b,0,null),b=$APP.E.j(b,1,null),d=$APP.x(b),b=$APP.y(d),d=$APP.z(d),$APP.B.g($APP.lx,b))){b=h2($APP.BA.g(vva,xva),d);if($APP.p(b)){c=uva(j2(new B4(c,new E3(null,$APP.rh($APP.UA.h(F4($APP.qh,b))),null,null,null),b,null,null,null),a),a);break a}throw $APP.Gm.g("Cannot parse 'or' clause, expected [ src-var? 'or' clause+ ]",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));}c=null}if($APP.p(c))return c;a:{b=pva(a);if($APP.p(b)&&(c=$APP.E.j(b,
0,null),b=$APP.E.j(b,1,null),d=$APP.x(b),b=$APP.y(d),e=$APP.z(d),d=$APP.y(e),e=$APP.z(e),$APP.B.g(yva,b))){b=Sua(d);d=h2($APP.BA.g(vva,xva),e);if($APP.p($APP.p(b)?d:b)){c=uva(j2(new B4(c,b,d,null,null,null),a),a);break a}throw $APP.Gm.g("Cannot parse 'or-join' clause, expected [ src-var? 'or-join' [variable+] clause+ ]",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));}c=null}if($APP.p(c))return c;a:{if(Eua(a,1)&&(b=qva($APP.y(a)),$APP.p(b))){c=$APP.E.j(b,0,null);b=$APP.E.j(b,1,null);c=j2(new x4(c,
b,null,null,null),a);break a}c=null}if($APP.p(c))return c;a:{if(Eua(a,2)&&(b=$APP.E.j(a,0,null),c=$APP.E.j(a,1,null),d=qva(b),$APP.p(d))){b=$APP.E.j(d,0,null);d=$APP.E.j(d,1,null);c=o4(c);c=$APP.p(c)?j2(new y4(b,d,c,null,null,null),a):null;break a}c=null}if($APP.p(c))return c;a:{b=pva(a);if($APP.p(b)&&(c=$APP.E.j(b,0,null),b=$APP.E.j(b,1,null),b=$APP.x(b),d=$APP.y(b),b=$APP.z(b),d=Oua(d),e=h2(ova,b),$APP.p(d))){if($APP.Ee(b))throw $APP.Gm.g("rule-expr requires at least one argument",new $APP.n(null,
2,[$APP.SF,C4,$APP.QG,a],null));if(null==e)throw $APP.Gm.g("Cannot parse rule-expr arguments, expected [ (variable | constant | '_')+ ]",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));c=new z4(c,d,e,null,null,null);break a}c=null}if($APP.p(c))return c;a:{b=pva(a);if($APP.p(b)&&(c=$APP.E.j(b,0,null),b=$APP.E.j(b,1,null),b=h2(ova,b),$APP.p(b))){if($APP.Ee(b))throw $APP.Gm.g("Pattern could not be empty",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));c=j2(new w4(c,b,null,null,null),a);break a}c=null}if($APP.p(c))return c;
throw $APP.Gm.g("Cannot parse clause, expected (data-pattern | pred-expr | fn-expr | rule-expr | not-clause | not-join-clause | or-clause | or-join-clause)",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));},E4=function(a){return h2(xva,a)},zva=function(a){var b=E4(a);if($APP.p(b))return b;throw $APP.Gm.g("Cannot parse :where clause, expected [clause+]",new $APP.n(null,2,[$APP.SF,C4,$APP.QG,a],null));},G4=function(a,b,c,d,e){this.uj=a;this.lj=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},
H4=function(a,b,c,d,e){this.name=a;this.ek=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},Bva=function(a){if($APP.Ie(a)){var b=$APP.x(a),c=$APP.y(b),d=$APP.z(b);if($APP.Ie(c)){b=$APP.x(c);var e=$APP.y(b);c=$APP.z(b);b=function(){var g=Oua(e);if($APP.p(g))return g;throw $APP.Gm.g("Cannot parse rule name, expected plain-symbol",new $APP.n(null,2,[$APP.SF,Ava,$APP.QG,a],null));}();c=Sua(c);var f=function(){var g=$APP.ig(E4(d));if($APP.p(g))return g;throw $APP.Gm.g("Rule branch should have clauses",
new $APP.n(null,2,[$APP.SF,Ava,$APP.QG,a],null));}();return new $APP.n(null,3,[$APP.S,b,D4,c,$APP.KT,f],null)}throw $APP.Gm.g(["Cannot parse rule head, expected [rule-name rule-vars], got: ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,2,[$APP.SF,Ava,$APP.QG,a],null));}throw $APP.Gm.g("Cannot parse rule, expected [rule-head clause+]",new $APP.n(null,2,[$APP.SF,Ava,$APP.QG,a],null));},Dva=function(a,b){var c=D4.h($APP.y(b)),d=Uua(c);b=$APP.x($APP.z(b));for(var e=null,f=0,g=0;;)if(g<f){var k=e.Y(null,
g);k=D4.h(k);if($APP.Ui.g(d,Uua(k)))throw $APP.Gm.g(["Arity mismatch for rule '",$APP.bk.l($APP.I([$APP.Hn.h(a)])),"': ",$APP.bk.l($APP.I([Tua(c)]))," vs. ",$APP.bk.l($APP.I([Tua(k)]))].join(""),new $APP.n(null,2,[$APP.SF,Ava,Cva,a],null));g+=1}else if(b=$APP.x(b)){if($APP.Me(b))f=$APP.hd(b),b=$APP.id(b),e=f,f=$APP.le(f);else{k=$APP.y(b);e=D4.h(k);if($APP.Ui.g(d,Uua(e)))throw $APP.Gm.g(["Arity mismatch for rule '",$APP.bk.l($APP.I([$APP.Hn.h(a)])),"': ",$APP.bk.l($APP.I([Tua(c)]))," vs. ",$APP.bk.l($APP.I([Tua(e)]))].join(""),
new $APP.n(null,2,[$APP.SF,Ava,Cva,a],null));b=$APP.z(b);e=null;f=0}g=0}else break},Eva=function(a){$APP.rh(function(){return function d(c){return new $APP.Pf(null,function(){for(;;){var e=$APP.x(c);if(e){var f=e;if($APP.Me(f)){var g=$APP.hd(f),k=$APP.le(g),l=$APP.Sf(k);return function(){for(var u=0;;)if(u<k){var C=$APP.we(g,u),F=$APP.E.j(C,0,null),N=$APP.E.j(C,1,null);C=$APP.ep.g(function(){return function(Q){return new G4(D4.h(Q),$APP.KT.h(Q),null,null,null)}}(u,C,F,N,g,k,l,f,e),N);N=l;Dva(F,C);
N.add(new H4(F,C,null,null,null));u+=1}else return!0}()?$APP.Vf($APP.Xf(l),d($APP.id(f))):$APP.Vf($APP.Xf(l),null)}var h=$APP.y(f),r=$APP.E.j(h,0,null),q=$APP.E.j(h,1,null);h=$APP.ep.g(function(){return function(u){return new G4(D4.h(u),$APP.KT.h(u),null,null,null)}}(h,r,q,f,e),q);Dva(r,h);return $APP.Df(new H4(r,h,null,null,null),d($APP.Qd(f)))}return null}},null,null)}($APP.jk($APP.S,h2(Bva,a)))}())},I4=function(a,b,c,d,e,f,g,k){this.Sj=a;this.Wj=b;this.Uj=c;this.Tj=d;this.Vj=e;this.G=f;this.A=
g;this.F=k;this.D=2230716170;this.K=139264},Fva=function(a){var b=$APP.um.l(a,J4,$APP.I([K4,L4,M4,N4]));b=$APP.Ke(a)?$APP.Vh.g($APP.gg,b):b;return new I4(J4.h(a),K4.h(a),L4.h(a),M4.h(a),N4.h(a),null,$APP.ig(b),null)},Gva=function(a){for(var b=$APP.gg,c=null;;){var d=$APP.y(a);if($APP.p(d))d instanceof $APP.K?(c=d,a=$APP.z(a)):(b=$APP.rm.B(b,new $APP.M(null,1,5,$APP.O,[c],null),$APP.ys.g($APP.Af,$APP.qh),d),a=$APP.z(a));else return b}},Hva=function(a){var b=$APP.sm.h(a);return a instanceof w4?b:null!=
b?b instanceof Jua?null:b:null},Lva=function(a,b,c){var d=$APP.cj(F4($APP.qh,J4.h(a))),e=$APP.cj(K4.h(a)),f=$APP.cj(F4($APP.qh,M4.h(a))),g=$APP.cj(F4($APP.qh,N4.h(a)));f=$APP.XU.g($APP.VU.g(d,e),$APP.VU.g(g,f));d=$APP.WU.g(d,e);if(!$APP.Ee(f))throw $APP.Gm.g(["Query for unknown vars: ",$APP.bk.l($APP.I([$APP.ep.g($APP.Hn,f)]))].join(""),new $APP.n(null,3,[$APP.SF,O4,D4,f,$APP.QG,b],null));if(!$APP.Ee(d))throw $APP.Gm.g([":find and :with should not use same variables: ",$APP.bk.l($APP.I([$APP.ep.g($APP.Hn,
d)]))].join(""),new $APP.n(null,3,[$APP.SF,O4,D4,d,$APP.QG,b],null));d=L4.h(a);if(null!=d){if(J4.h(a)instanceof t4)throw $APP.Gm.g([$APP.bk.l($APP.I([$APP.Am.h(d)]))," does not work with single-scalar :find"].join(""),new $APP.n(null,2,[$APP.SF,O4,$APP.QG,b],null));if(J4.h(a)instanceof s4)throw $APP.Gm.g([$APP.bk.l($APP.I([$APP.Am.h(d)]))," does not work with collection :find"].join(""),new $APP.n(null,2,[$APP.SF,O4,$APP.QG,b],null));}d=P4.h(L4.h(a));if(null!=d&&(e=ava(J4.h(a)),!$APP.B.g($APP.le(d),
$APP.le(e))))throw $APP.Gm.g(["Count of ",$APP.bk.l($APP.I([$APP.Am.h(L4.h(a))]))," must match count of :find"].join(""),new $APP.n(null,4,[$APP.SF,O4,Iva,$APP.Df($APP.Am.h(L4.h(a)),d),Jva,e,$APP.QG,b],null));if(1<$APP.le($APP.Xg.g($APP.Iba,new $APP.M(null,3,5,$APP.O,[$APP.YC.h(c),$APP.Su.h(c),Kva.h(c)],null))))throw $APP.Gm.g("Only one of :keys/:syms/:strs must be present",new $APP.n(null,2,[$APP.SF,O4,$APP.QG,b],null));var k=F4($APP.qh,M4.h(a)),l=Fua(function(r){return r instanceof l2},M4.h(a)),
h=Fua(function(r){return r instanceof N2},M4.h(a));if(!$APP.p(function(){var r=Gua(k);return $APP.p(r)?(r=Gua(l),$APP.p(r)?Gua(h):r):r}()))throw $APP.Gm.g("Vars used in :in should be distinct",new $APP.n(null,2,[$APP.SF,O4,$APP.QG,b],null));c=F4($APP.qh,K4.h(a));if(!$APP.p(Gua(c)))throw $APP.Gm.g("Vars used in :with should be distinct",new $APP.n(null,2,[$APP.SF,O4,$APP.QG,b],null));c=i2(function(r){return r instanceof l2},M4.h(a),$APP.Zi);d=i2(function(r){return r instanceof l2},N4.h(a),$APP.Zi);
c=$APP.XU.g(d,c);if(!$APP.Ee(c))throw $APP.Gm.g(["Where uses unknown source vars: ",$APP.bk.l($APP.I([$APP.ep.g($APP.Hn,c)]))].join(""),new $APP.n(null,3,[$APP.SF,O4,D4,c,$APP.QG,b],null));c=Fua(function(r){return r instanceof z4},N4.h(a));a=Fua(function(r){return r instanceof N2},M4.h(a));if(!$APP.Ee(c)&&$APP.Ee(a))throw $APP.Gm.g("Missing rules var '%' in :in",new $APP.n(null,2,[$APP.SF,O4,$APP.QG,b],null));},Qva=function(a){if($APP.Je(a))var b=a;else if($APP.Ie(a))b=Gva(a);else throw $APP.Gm.g("Query should be a vector or a map",
new $APP.n(null,2,[$APP.SF,O4,$APP.QG,a],null));var c=b,d=zva(Mva.g(c,$APP.qh));b=Fva(new $APP.n(null,5,[J4,iva(Jva.h(c)),K4,function(){var e=Nva.h(c);if($APP.p(e)){var f=h2(D3,e);if($APP.p(f))e=f;else throw $APP.Gm.g("Cannot parse :with clause, expected [ variable+ ]",new $APP.n(null,2,[$APP.SF,Ova,$APP.QG,e],null));}else e=null;return e}(),L4,function(){var e=jva($APP.YC,$APP.YC.h(c));if($APP.p(e))return e;e=jva($APP.Su,$APP.Su.h(c));return $APP.p(e)?e:jva(Kva,Kva.h(c))}(),M4,mva(function(){var e=
Pva.h(c);return $APP.p(e)?e:$APP.Ee(Fua(Hva,d))?$APP.qh:new $APP.M(null,1,5,$APP.O,[eva],null)}()),N4,d],null));Lva(b,a,c);return b},Q4=function(a,b,c,d,e,f){this.hk=a;this.sources=b;this.rules=c;this.G=d;this.A=e;this.F=f;this.D=2230716170;this.K=139264},R4=function(a,b,c,d,e){this.ij=a;this.jk=b;this.G=c;this.A=d;this.F=e;this.D=2230716170;this.K=139264},Rva=function(a,b){return $APP.WU.g($APP.cj($APP.Qi(a)),$APP.cj($APP.Qi(b)))},Sva=function(a,b){return $APP.B.g($APP.le(a),$APP.le(b))&&$APP.Ag(function(c){return $APP.Ze(b,
c)},$APP.Qi(a))&&$APP.Ag(function(c){return $APP.Ze(b,c)},$APP.Qi(a))},Tva=function(a){return a instanceof $APP.w&&$APP.B.g("$",$APP.y($APP.ej(a)))},S4=function(a){return a instanceof $APP.w&&$APP.B.g("?",$APP.y($APP.ej(a)))},Uva=function(a){return a instanceof $APP.K||"string"===typeof a},Vva=function(a){return T4(new $APP.M(null,2,5,$APP.O,[Uva,$APP.aI],null),a)},Wva=function(a,b,c,d){for(var e=b.length,f=d.length,g=Array(e+f),k=0;;)if(k<e)g[k]=a[b[k]],k+=1;else break;for(a=0;;)if(a<f)g[e+a]=c[d[a]],
a+=1;else break;return g},Xva=function(a){a=$APP.Dj.g($APP.Hn,$APP.rh($APP.UA.h(F4($APP.qh,a))));return new R4($APP.fj(a,$APP.Os.s()),$APP.qh,null,null,null)},Yva=function(a,b){if(null!=a&&null!=a.nk)a=a.nk(a,b);else{var c=Yva[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Yva._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("IBinding.in-\x3erel",a);}return a},Zva=function(a,b){var c=$APP.E.j(b,0,null);b=$APP.E.j(b,1,null);c instanceof L3&&U4.h(c)instanceof
l2?a=$APP.Ir.J(a,V4,$APP.Vi,$APP.Mp.g(c,new $APP.M(null,2,5,$APP.O,[U4,$APP.Hn],null)),b):c instanceof L3&&U4.h(c)instanceof N2?(c=$APP.Vi.j,b="string"===typeof b?$APP.sU.h(b):b,Eva(b),b=$APP.jk($APP.re,b),a=c.call($APP.Vi,a,W4,b)):a=$APP.Ir.B(a,X4,$APP.Af,Yva(c,b));return a},bwa=function(a,b,c){var d=$APP.le(b),e=$APP.le(c);if(d<e)throw $APP.Gm.g(["Extra inputs passed, expected: ",$APP.bk.l($APP.I([$APP.ep.g(function(f){return $APP.sm.h($APP.Be(f))},b)])),", got: ",$APP.bk.l($APP.I([e]))].join(""),
new $APP.n(null,3,[$APP.SF,$va,Ata,b,awa,c],null));if(d>e)throw $APP.Gm.g(["Too few inputs passed, expected: ",$APP.bk.l($APP.I([$APP.ep.g(function(f){return $APP.sm.h($APP.Be(f))},b)])),", got: ",$APP.bk.l($APP.I([e]))].join(""),new $APP.n(null,3,[$APP.SF,$va,Ata,b,awa,c],null));return $APP.jf.j(Zva,a,$APP.fj(b,c))},dwa=function(a,b){var c=a.h?a.h(b):a.call(null,b);return $APP.Ze(cwa,b)?function(d){d=d[c];return"number"===typeof d?d:$APP.Ie(d)?Y0(Y4,d):Uqa(d)?Y0(Y4,d):d}:function(d){return d[c]}},
ewa=function(a){if(1===$APP.le(a))return $APP.y(a);var b=$APP.Yf(a);return function(c){return $APP.Yt.h(b.map(function(d){return d.h?d.h(c):d.call(null,c)}))}},fwa=function(a,b){for(var c=$APP.Xc($APP.gg);;){var d=$APP.y(b);if(null==d)return $APP.Zc(c);var e=a.h?a.h(d):a.call(null,d);b=$APP.z(b);c=$APP.Yh.j(c,e,$APP.Af.g($APP.Xe.j(c,e,$APP.Pd),d))}},gwa=function(a,b){var c=Z4.h(a),d=Z4.h(b),e=D1.h(a),f=D1.h(b);a=$APP.rh(Rva(D1.h(a),D1.h(b)));var g=$APP.Dj.g(function(u){return dwa(e,u)},a),k=$APP.Dj.g(function(u){return dwa(f,
u)},a);a=$APP.Qi(e);b=$APP.rh($APP.XU.g($APP.cj($APP.Qi(f)),$APP.cj($APP.Qi(e))));var l=$APP.Yf($APP.Dj.g(e,a)),h=$APP.Yf($APP.Dj.g(f,b));g=ewa(g);var r=fwa(g,c),q=ewa(k);c=$APP.Zc($APP.jf.j(function(u,C){var F=q.h?q.h(C):q.call(null,C);F=$APP.Xe.g(r,F);return null==F?u:$APP.jf.j(function(N,Q){return $APP.kh.g(N,Wva(Q,l,C,h))},u,F)},$APP.Xc($APP.qh),d));return new R4($APP.fj($APP.V.g(a,b),$APP.Os.s()),c,null,null,null)},hwa=function(a,b){var c=$APP.hg(a),d=$APP.Xe.g(c,D1);c=$APP.Xe.g(c,Z4);b=$APP.hg(b);
var e=$APP.Xe.g(b,D1);b=$APP.Xe.g(b,Z4);var f=Rva(d,e),g=$APP.Dj.g(function(h){return dwa(e,h)},f);g=ewa(g);var k=fwa(g,b);b=$APP.Dj.g(function(h){return dwa(d,h)},f);var l=ewa(b);return $APP.Vi.j(a,Z4,$APP.dca(function(h){h=l.h?l.h(h):l.call(null,h);return null==(k.h?k.h(h):k.call(null,h))},c))},iwa=function(a,b){var c=$APP.ep.g(function(d){return $APP.B.g(d,$APP.aI)||S4(d)?null:d},b);a=WZ(a,c);b=$APP.Vh.g($APP.gg,$APP.Xg.g(function(d){var e=$APP.E.j(d,0,null);$APP.E.j(d,1,null);return S4(e)},$APP.Dj.j($APP.Wt,
b,new $APP.M(null,4,5,$APP.O,["e","a","v","tx"],null))));return new R4(b,a,null,null,null)},jwa=function(a,b){a=$APP.Xg.g(function(d){a:for(var e=b;;){var f=d;if($APP.p($APP.p(f)?e:f)){f=$APP.y(d);var g=$APP.y(e);if($APP.B.g(g,$APP.aI)||S4(g)||$APP.B.g(f,g))d=$APP.z(d),e=$APP.z(e);else{d=!1;break a}}else{d=!0;break a}}return d},a);var c=$APP.Vh.g($APP.gg,$APP.Xg.g(function(d){var e=$APP.E.j(d,0,null);$APP.E.j(d,1,null);return S4(e)},$APP.Dj.j($APP.Wt,b,$APP.Os.s())));return new R4(c,$APP.ep.g($APP.Yf,
a),null,null,null)},kwa=function(a,b){return(null!=a?$APP.Cd===a.Jk||(a.Rd?0:$APP.Eb(dsa,a)):$APP.Eb(dsa,a))?iwa(a,b):jwa(a,b)},lwa=function(a,b){for(var c=$APP.qh;;){var d=$APP.y(a);if(null==d)return $APP.Af.g(c,b);$APP.p($APP.ig(Rva(D1.h(b),D1.h(d))))?(a=$APP.z(a),b=gwa(d,b)):(a=$APP.z(a),c=$APP.Af.g(c,d))}},mwa=function(a,b){return $APP.Bg(function(c){return $APP.Ze(D1.h(c),b)?c:null},X4.h(a))},nwa=function(a,b){var c=mwa(a,b);if(null==c)return null;a=$APP.y(Z4.h(c));null==a?b=null:(c=D1.h(c),
b=c.h?c.h(b):c.call(null,b),b=a[b]);return b},owa=function(a,b){return $APP.Bg(function(c){return $APP.Ze(D1.h(a),c)},b)},pwa=function(a,b){var c=$APP.Xg.g(function(e){return owa(e,b)},X4.h(a)),d=$APP.jf.g($4,c);return new $APP.M(null,2,5,$APP.O,[$APP.Ir.j(a,X4,function(e){return $APP.ts.g($APP.cj(c),e)}),d],null)},qwa=function(a,b,c,d){a=V4.h(a);b=D1.h(b);for(var e=$APP.le(d),f=Array(e),g=Array(e),k=0;;)if(k<e){var l=$APP.E.g(d,k);if(l instanceof $APP.w){var h=$APP.Xe.g(a,l);null==h?g[k]=$APP.Xe.g(b,
l):f[k]=h}else f[k]=l;k+=1}else break;return c===$APP.Wt?function(r){for(var q=f.slice(0),u=0;;)if(u<e){var C=g[u];null!=C&&(q[u]=r[C]);u+=1}else break;return $APP.Dg.g(c,q)}:function(r){for(var q=0;;)if(q<e){var u=g[q];null!=u&&(f[q]=r[u]);q+=1}else break;return $APP.Dg.g(c,f)}},rwa=function(a,b){var c=$APP.E.j(b,0,null);c=$APP.x(c);var d=$APP.y(c),e=$APP.z(c),f=function(){var l=$APP.Xe.g($ta,d);if($APP.p(l))return l;l=nwa(a,d);if($APP.p(l))return l;if($APP.p(null))return null;if(null==mwa(a,d))throw $APP.Gm.g(["Unknown predicate '",
$APP.bk.l($APP.I([d]))," in ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,3,[$APP.SF,a5,$APP.QG,b,$APP.Jq,d],null));return null}();c=pwa(a,$APP.Xg.g($APP.Fd,e));var g=$APP.E.j(c,0,null),k=$APP.E.j(c,1,null);c=$APP.p(f)?function(){var l=qwa(g,k,f,e);return $APP.Ir.j(k,Z4,function(h){return $APP.Xg.g(l,h)})}():$APP.Vi.j(k,Z4,$APP.qh);return $APP.Ir.B(g,X4,$APP.Af,c)},swa=function(a,b){var c=$APP.E.j(b,0,null);c=$APP.x(c);var d=$APP.y(c),e=$APP.z(c);c=$APP.E.j(b,1,null);var f=o4(c),g=function(){var h=
$APP.Xe.g($ta,d);if($APP.p(h))return h;h=nwa(a,d);if($APP.p(h))return h;if($APP.p(null))return null;if(null==mwa(a,d))throw $APP.Gm.g(["Unknown function '",$APP.bk.l($APP.I([d]))," in ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,3,[$APP.SF,a5,$APP.QG,b,$APP.Jq,d],null));return null}();c=pwa(a,$APP.Xg.g($APP.Fd,e));var k=$APP.E.j(c,0,null),l=$APP.E.j(c,1,null);c=$APP.p(g)?function(){var h=qwa(k,l,g,e),r=function(){return function C(u){return new $APP.Pf(null,function(){for(var F=u;;)if(F=$APP.x(F)){if($APP.Me(F)){var N=
$APP.hd(F),Q=$APP.le(N),T=$APP.Sf(Q);a:for(var X=0;;)if(X<Q){var da=$APP.we(N,X),ha=h(da);null!=ha&&$APP.Wf(T,$4.g(new R4(D1.h(l),new $APP.M(null,1,5,$APP.O,[da],null),null,null,null),Yva(f,ha)));X+=1}else{N=!0;break a}return N?$APP.Vf($APP.Xf(T),C($APP.id(F))):$APP.Vf($APP.Xf(T),null)}T=$APP.y(F);N=h(T);if(null!=N)return $APP.Df($4.g(new R4(D1.h(l),new $APP.M(null,1,5,$APP.O,[T],null),null,null,null),Yva(f,N)),C($APP.Qd(F)));F=$APP.Qd(F)}else return null},null,null)}(Z4.h(l))}();return $APP.Ee(r)?
$4.g(l,Xva(f)):$APP.jf.g(C5,r)}():$4.g($APP.Vi.j(l,Z4,$APP.qh),Xva(f));return $APP.Ir.B(k,X4,lwa,c)},twa=function(a,b){if($APP.Ie(b)){var c=Tva($APP.y(b))?$APP.qe(b):$APP.y(b);if(c instanceof $APP.w){if(S4(c)||$APP.Ze(new $APP.Yi(null,new $APP.n(null,6,[$APP.hx,null,$APP.RJ,null,wva,null,yva,null,$APP.lx,null,$APP.aI,null],null),null),c))return!1;if($APP.Ze(W4.h(a),c))return!0;throw $APP.Gm.g(["Unknown rule '",$APP.bk.l($APP.I([c]))," in ",$APP.bk.l($APP.I([b]))].join(""),new $APP.n(null,2,[$APP.SF,
a5,$APP.QG,b],null));}}return!1},vwa=function(a,b){var c=$APP.x(a),d=$APP.y(c),e=$APP.z(c),f=$APP.gk.g(uwa,$APP.Yd),g=$APP.Xe.g(W4.h(b),d);return function h(l){return new $APP.Pf(null,function(){for(;;){var r=$APP.x(l);if(r){var q=r;if($APP.Me(q)){var u=$APP.hd(q),C=$APP.le(u),F=$APP.Sf(C);return function(){for(var aa=0;;)if(aa<C){var ea=$APP.we(u,aa),fa=ea,ma=$APP.x(fa),sa=$APP.y(ma),ta=$APP.z(ma),ua=sa,ya=$APP.x(ua),Da=$APP.y(ya),Ia=$APP.z(ya),za=Da,La=Ia,Xa=ta,eb=$APP.fj(La,e);$APP.Wf(F,$APP.mv(function(Ib,
Yb,qc,Ec,Hd,lc,Qh,$r,kw,lw,as,mw,nw,ow,pw,ad,Zl,bs,qw,rw,cs,sw,tw,uw,vw,Lk){return function(nd){if(S4(nd)){var ds=nw.h?nw.h(nd):nw.call(null,nd);return null==ds?$APP.Nj.h([$APP.ej(nd),"__auto__",$APP.t.h(Lk)].join("")):ds}return nd}}(aa,fa,ma,sa,ta,ua,ya,Da,Ia,za,La,Xa,eb,ea,u,C,F,q,r,a,c,d,e,d,e,f,g),Xa));aa+=1}else return!0}()?$APP.Vf($APP.Xf(F),h($APP.id(q))):$APP.Vf($APP.Xf(F),null)}var N=$APP.y(q),Q=N,T=$APP.x(Q),X=$APP.y(T),da=$APP.z(T),ha=X,ka=$APP.x(ha),Y=$APP.y(ka),D=$APP.z(ka),A=Y,ba=D,
G=da,H=$APP.fj(ba,e);return $APP.Df($APP.mv(function(aa,ea,fa,ma,sa,ta,ua,ya,Da,Ia,za,La,Xa,eb,Ib,Yb,qc,Ec,Hd,lc,Qh,$r){return function(kw){if(S4(kw)){var lw=La.h?La.h(kw):La.call(null,kw);return null==lw?$APP.Nj.h([$APP.ej(kw),"__auto__",$APP.t.h($r)].join("")):lw}return kw}}(Q,T,X,da,ha,ka,Y,D,A,ba,G,H,N,q,r,a,c,d,e,d,e,f,g),G),h($APP.Qd(q)))}return null}},null,null)}(g)},wwa=function(a,b){a=$APP.ts.g(function(c){var d=$APP.E.j(c,0,null);c=$APP.E.j(c,1,null);return $APP.B.g(d,c)},$APP.Dj.j($APP.Wt,
a,b));return new $APP.M(null,2,5,$APP.O,[$APP.Dj.g($APP.y,a),$APP.Dj.g($APP.qe,a)],null)},ywa=function(a,b){a=$APP.x(a);var c=$APP.y(a),d=$APP.z(a);return function g(f){return new $APP.Pf(null,function(){for(;;){var k=$APP.x(f);if(k){if($APP.Me(k)){var l=$APP.hd(k),h=$APP.le(l),r=$APP.Sf(h);a:for(var q=0;;)if(q<h){var u=$APP.we(l,q),C=wwa(d,u);u=$APP.E.j(C,0,null);C=$APP.E.j(C,1,null);$APP.Wf(r,new $APP.M(null,1,5,$APP.O,[$APP.V.l(new $APP.M(null,1,5,$APP.O,[xwa],null),u,$APP.I([C]))],null));q+=1}else{l=
!0;break a}return l?$APP.Vf($APP.Xf(r),g($APP.id(k))):$APP.Vf($APP.Xf(r),null)}r=$APP.y(k);l=wwa(d,r);r=$APP.E.j(l,0,null);l=$APP.E.j(l,1,null);return $APP.Df(new $APP.M(null,1,5,$APP.O,[$APP.V.l(new $APP.M(null,1,5,$APP.O,[xwa],null),r,$APP.I([l]))],null),g($APP.Qd(k)))}return null}},null,null)}($APP.Xe.g(b,c))},zwa=function(a){var b=$APP.fk.h($APP.qh);$APP.mv(function(c){$APP.p(S4.h?S4.h(c):S4.call(null,c))&&$APP.gk.j(b,$APP.Af,c);return c},a);return $APP.v(b)},Awa=function(a,b){function c(e){e=
$APP.E.j(e,0,null);e=$APP.x(e);$APP.y(e);e=$APP.z(e);return $APP.Ag(d,e)}var d=$APP.cj(zwa(a));return new $APP.M(null,2,5,$APP.O,[$APP.Xg.g(c,b),$APP.ts.g(c,b)],null)},Hwa=function(a,b){function c(ta){return $APP.Bg(function(ua){return $APP.Ee(Z4.h(ua))},X4.h(ta))}function d(ta,ua){return $APP.jf.j(G5,ta,ua)}for(var e=$APP.Xg.g(S4,b),f=$APP.fj(e,$APP.Os.s()),g=new $APP.J(null,new $APP.n(null,5,[Bwa,$APP.qh,Cwa,a,$APP.KT,new $APP.M(null,1,5,$APP.O,[b],null),Dwa,$APP.gg,Ewa,$APP.gg],null),null,1,null),
k=new R4(f,$APP.qh,null,null,null);;){var l=$APP.y(g);if(null==l)return k;var h=l,r=$APP.oj(function(){return function(ta){return!twa(a,ta)}}(g,k,h,l,e,f,d,c),$APP.KT.h(h)),q=$APP.E.j(r,0,null),u=$APP.E.j(r,1,null),C=$APP.x(u),F=$APP.y(C),N=$APP.z(C),Q=F,T=N;if(null==Q){b=d(Cwa.h(h),q);b=Fwa?Fwa(b,e):Gwa.call(null,b,e);var X=new R4(f,b,null,null,null);b=$APP.z(g);X=C5(k,X);g=b;k=X}else{var da=Q,ha=$APP.x(da),ka=$APP.y(ha),Y=$APP.z(ha),D=ka,A=Y,ba=ywa(Q,Dwa.h(h)),G=Awa($APP.V.g(Bwa.h(h),q),$APP.V.g(ba,
Ewa.h(h))),H=$APP.E.j(G,0,null),aa=$APP.E.j(G,1,null);if($APP.p($APP.Bg(function(){return function(ta){return $APP.B.g(ta,new $APP.M(null,1,5,$APP.O,[$APP.P(xwa)],null))}}(g,k,da,ha,ka,Y,D,A,ba,G,H,aa,r,q,u,C,F,N,Q,T,h,l,e,f,d,c),H)))b=$APP.z(g),X=k,g=b,k=X;else{var ea=$APP.V.g(q,H),fa=d(Cwa.h(h),ea);if($APP.p(c(fa)))b=$APP.z(g),X=k,g=b,k=X;else{var ma=$APP.Vi.j(Dwa.h(h),D,$APP.Af.g($APP.Xe.j(Dwa.h(h),D,$APP.qh),A)),sa=vwa(Q,a);b=$APP.V.g(function(){return function(ta,ua,ya,Da,Ia,za,La,Xa,eb,Ib,Yb,
qc,Ec,Hd,lc,Qh,$r,kw,lw,as,mw,nw,ow,pw,ad,Zl,bs,qw,rw,cs){return function uw(tw){return new $APP.Pf(null,function(vw,Lk,nd,ds,es,fs,gs,hs,is,js,Mk,ks,ls,ms,Id,ns,os,ps,ph,Qe,Mf,nc,ud,Zb){return function(){for(;;){var Nf=$APP.x(tw);if(Nf){if($APP.Me(Nf)){var bN=$APP.hd(Nf),cN=$APP.le(bN),df=$APP.Sf(cN);a:for(var dN=0;;)if(dN<cN){var eN=$APP.we(bN,dN);$APP.Wf(df,new $APP.n(null,5,[Bwa,es,Cwa,fs,$APP.KT,$APP.Vh.j($APP.qh,$APP.Wj,$APP.I([eN,Zb])),Dwa,nd,Ewa,ns],null));dN+=1}else{bN=!0;break a}return bN?
$APP.Vf($APP.Xf(df),uw($APP.id(Nf))):$APP.Vf($APP.Xf(df),null)}df=$APP.y(Nf);return $APP.Df(new $APP.n(null,5,[Bwa,es,Cwa,fs,$APP.KT,$APP.Vh.j($APP.qh,$APP.Wj,$APP.I([df,Zb])),Dwa,nd,Ewa,ns],null),uw($APP.Qd(Nf)))}return null}}}(ta,ua,ya,Da,Ia,za,La,Xa,eb,Ib,Yb,qc,Ec,Hd,lc,Qh,$r,kw,lw,as,mw,nw,ow,pw,ad,Zl,bs,qw,rw,cs),null,null)}}(g,k,ma,sa,ea,fa,da,ha,ka,Y,D,A,ba,G,H,aa,r,q,u,C,F,N,Q,T,h,l,e,f,d,c)(sa)}(),$APP.z(g));X=k;g=b;k=X}}}}},Iwa=function(a,b){if(null!=a?$APP.Cd===a.vk||(a.Rd?0:$APP.Eb(lsa,
a)):$APP.Eb(lsa,a)){var c=$APP.E.j(b,0,null),d=$APP.E.j(b,1,null),e=$APP.E.j(b,2,null),f=$APP.E.j(b,3,null);return $APP.Jl.j(new $APP.M(null,4,5,$APP.O,[$APP.p(function(){var g=Vva(c);return $APP.p(g)?g:Uva(c)}())?y0(a,c):c,d,$APP.p(function(){if($APP.p(e)){var g=Uva(d);return g?(g=s0(a,d))?(g=Vva(e),$APP.p(g)?g:Uva(e)):g:g}return e}())?y0(a,e):e,$APP.p(Vva(f))?y0(a,f):f],null),0,$APP.le(b))}return b},Jwa=function(a,b){var c=$APP.E.j(b,0,null),d=$APP.E.j(b,1,null),e=$APP.E.j(b,2,null);b=$APP.E.j(b,
3,null);c=S4(c)?$APP.Af.g($APP.Zi,c):$APP.Zi;c=S4(b)?$APP.Af.g(c,b):c;return S4(e)&&!S4(d)&&s0(a,d)?$APP.Af.g(c,e):c},Kwa=function(a,b){return $APP.Vi.j(a,X4,$APP.gp.g(function(c){var d=$APP.ig($APP.Wi(D1.h(c),b));return null==d?null:$APP.Vi.j(c,D1,d)},X4.h(a)))},Lwa=function(a){return $APP.Vh.g($APP.Zi,$APP.Vg.l(function(b){return $APP.Qi(D1.h(b))},$APP.I([X4.h(a)])))},Mwa=function(a,b,c){if($APP.jca(b,a))return null;a=$APP.XU.g($APP.cj(b),a);throw $APP.Gm.g(["Insufficient bindings: ",$APP.bk.l($APP.I([a])),
" not bound in ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,3,[$APP.SF,a5,$APP.QG,c,D4,a],null));},Nwa=function(a,b,c){b=$APP.ep.g(function(d){return $APP.XU.g($APP.cj(zwa(d)),a)},b);if($APP.p($APP.Dg.g($APP.B,b)))return null;throw $APP.Gm.g(["All clauses in 'or' must use same set of free vars, had ",$APP.bk.l($APP.I([b]))," in ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,3,[$APP.SF,a5,$APP.QG,c,D4,b],null));},Owa=function(a,b,c){for(var d=$APP.cj($APP.ts.g(a,b)),e=$APP.x(c),f=null,g=
0,k=0;;)if(k<g){c=f.Y(null,k);var l=$APP.ig($APP.XU.g(d,$APP.cj(zwa(c))));if(null!=l)throw e=l,$APP.hB.l($APP.I([c,a,b,d])),$APP.Gm.g(["All clauses in 'or' must use same set of free vars, had ",$APP.bk.l($APP.I([e]))," not bound in ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,3,[$APP.SF,a5,$APP.QG,c,D4,e],null));k+=1}else if(c=$APP.x(e)){e=c;if($APP.Me(e))f=$APP.hd(e),e=$APP.id(e),c=f,g=$APP.le(f),f=c;else{c=$APP.y(e);f=$APP.ig($APP.XU.g(d,$APP.cj(zwa(c))));if(null!=f)throw e=f,$APP.hB.l($APP.I([c,
a,b,d])),$APP.Gm.g(["All clauses in 'or' must use same set of free vars, had ",$APP.bk.l($APP.I([e]))," not bound in ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,3,[$APP.SF,a5,$APP.QG,c,D4,e],null));e=$APP.z(e);f=null;g=0}k=0}else return null},Pwa=function(a,b){var c=Y4;Y4=$APP.Xe.g(V4.h(a),eva);try{return $APP.jf.j(K5,a,b)}finally{Y4=c}},Gwa=function(a){switch(arguments.length){case 2:return Fwa(arguments[0],arguments[1]);case 3:return Qwa(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",
$APP.t.h(arguments.length)].join(""));}},Fwa=function(a,b){a=X4.h(a);return Qwa(new $APP.M(null,1,5,$APP.O,[Array($APP.le(b))],null),a,b)},Qwa=function(a,b,c){for(;;){var d=$APP.y(b);if(null==d)return a;if($APP.Ee(Z4.h(d)))return $APP.qh;var e=$APP.Wi(D1.h(d),c);if($APP.Ee(e)){var f=a,g=$APP.z(b),k=c;a=f;b=g;c=k}else{var l=$APP.Yf($APP.Dj.g(function(r,q,u,C){return function(F){return $APP.Xe.g(C,F)}}(a,b,c,e,d),c)),h=$APP.le(c);f=function(){return function(r,q,u,C,F,N,Q){return function da(X){return new $APP.Pf(null,
function(ha,ka,Y,D,A,ba,G){return function(){for(var H=X;;){var aa=$APP.x(H);if(aa){var ea=aa,fa=$APP.y(ea);if(aa=$APP.x(function(ma,sa,ta,ua,ya,Da,Ia,za,La,Xa,eb){return function qc(Yb){return new $APP.Pf(null,function(Ec,Hd,lc,Qh,$r,kw,lw,as,mw){return function(){for(;;){var nw=$APP.x(Yb);if(nw){if($APP.Me(nw)){var ow=$APP.hd(nw),pw=$APP.le(ow),ad=$APP.Sf(pw);return function(){for(var bs=0;;)if(bs<pw){for(var qw=$APP.we(ow,bs),rw=ad,cs=$APP.Kb($r),sw=0;;)if(sw<mw){var tw=as[sw];null!=tw&&(cs[sw]=
qw[tw]);sw+=1}else break;rw.add(cs);bs+=1}else return!0}()?$APP.Vf($APP.Xf(ad),qc($APP.id(nw))):$APP.Vf($APP.Xf(ad),null)}var Zl=$APP.y(nw);return $APP.Df(function(){for(var bs=$APP.Kb($r),qw=0;;)if(qw<mw){var rw=as[qw];null!=rw&&(bs[qw]=Zl[rw]);qw+=1}else break;return bs}(),qc($APP.Qd(nw)))}return null}}}(ma,sa,ta,ua,ya,Da,Ia,za,La,Xa,eb),null,null)}}(H,ha,ka,Y,fa,ea,aa,D,A,ba,G)(Z4.h(G))))return $APP.V.g(aa,da($APP.Qd(H)));H=$APP.Qd(H)}else return null}}}(r,q,u,C,F,N,Q),null,null)}}(a,b,c,l,h,e,
d)(a)}();g=$APP.z(b);k=c;a=f;b=g;c=k}}},Rwa=function(a,b){return $APP.cj($APP.Dj.g($APP.rh,Fwa(a,b)))},P5=function(a,b){if(null!=a&&null!=a.pk)a=a.pk(a,b);else{var c=P5[$APP.pa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=P5._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $APP.Gb("IContextResolve.-context-resolve",a);}return a},Swa=function(a,b,c){return $APP.ep.B(function(d,e,f){if(bva(d)){e=P5($APP.Kq.h(d),b);d=$APP.Dj.g(function(k){return P5(k,b)},$APP.dj($APP.oI.h(d)));
var g=$APP.Dj.g(function(k){return $APP.E.g(k,f)},c);return $APP.Dg.g(e,$APP.V.g(d,new $APP.M(null,1,5,$APP.O,[g],null)))}return e},a,$APP.y(c),$APP.Os.s())},Twa=function(a){var b=$APP.Eg(bva);return $APP.ts.g($APP.zb,$APP.Dj.j(function(c,d){return $APP.p(b.h?b.h(c):b.call(null,c))?d:null},a,$APP.Os.s()))},Uwa=function(a,b,c){var d=Twa(a);return function g(f){return new $APP.Pf(null,function(){for(;;){var k=$APP.x(f);if(k){if($APP.Me(k)){var l=$APP.hd(k),h=$APP.le(l),r=$APP.Sf(h);a:for(var q=0;;)if(q<
h){var u=$APP.we(l,q);$APP.E.j(u,0,null);u=$APP.E.j(u,1,null);$APP.Wf(r,Swa(a,b,u));q+=1}else{l=!0;break a}return l?$APP.Vf($APP.Xf(r),g($APP.id(k))):$APP.Vf($APP.Xf(r),null)}r=$APP.y(k);$APP.E.j(r,0,null);r=$APP.E.j(r,1,null);return $APP.Df(Swa(a,b,r),g($APP.Qd(k)))}return null}},null,null)}($APP.jk(function(f){return $APP.Dj.g(function(g){return $APP.E.g(f,g)},d)},c))},Vwa=function(a,b){return $APP.jf.j(function(c,d){return $APP.Af.g(c,a.h?a.h(d):a.call(null,d))},$APP.ve(b),b)},Wwa=function(a,b){var c=
P4.h(a),d=$APP.Os.g(0,$APP.le(c));return Vwa(function(e){return $APP.jf.j(function(f,g){return $APP.Vi.j(f,$APP.E.g(c,g),$APP.E.g(e,g))},$APP.gg,d)},b)},Xwa=function(a,b,c){if(null!=a&&null!=a.qk)a=a.qk(a,b,c);else{var d=Xwa[$APP.pa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=Xwa._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Gb("IPostProcess.-post-process",a);}return a},Ywa=function(a,b,c){var d=function(){return function g(f){return new $APP.Pf(null,
function(){for(;;){var k=$APP.x(f);if(k){if($APP.Me(k)){var l=$APP.hd(k),h=$APP.le(l),r=$APP.Sf(h);return function(){for(var u=0;;)if(u<h){var C=$APP.we(l,u),F=r;if(cva(C)){var N=P5($APP.sm.h(C),b);C=P5(p1.h(C),b);N=rua(N,C,null)}else N=null;F.add(N);u+=1}else return!0}()?$APP.Vf($APP.Xf(r),g($APP.id(k))):$APP.Vf($APP.Xf(r),null)}var q=$APP.y(k);return $APP.Df(cva(q)?function(){var u=P5($APP.sm.h(q),b),C=P5(p1.h(q),b);return rua(u,C,null)}():null,g($APP.Qd(k)))}return null}},null,null)}(a)}();return function g(f){return new $APP.Pf(null,
function(){for(;;){var k=$APP.x(f);if(k){var l=k;if($APP.Me(l)){var h=$APP.hd(l),r=$APP.le(h),q=$APP.Sf(r);return function(){for(var C=0;;)if(C<r){var F=$APP.we(h,C);$APP.Wf(q,$APP.ep.j(function(){return function(N,Q){return $APP.p(N)?pua(N,Q):Q}}(C,F,h,r,q,l,k,d),d,F));C+=1}else return!0}()?$APP.Vf($APP.Xf(q),g($APP.id(l))):$APP.Vf($APP.Xf(q),null)}var u=$APP.y(l);return $APP.Df($APP.ep.j(function(){return function(C,F){return $APP.p(C)?pua(C,F):F}}(u,l,k,d),d,u),g($APP.Qd(l)))}return null}},null,
null)}(c)},Zwa=function(a,b){if(a instanceof D_){var c=a.Pj,d=a.Kj;return new D_(d,function(e){var f=c.h?c.h(e):c.call(null,e);return $APP.p(f)?b.g?b.g(d,e):b.call(null,d,e):f},$APP.fk.h(0),null,null,null)}return new D_(a,function(e){return b.g?b.g(a,e):b.call(null,a,e)},$APP.fk.h(0),null,null,null)},S5=function(a){switch(arguments.length){case 2:return S5.g(arguments[0],arguments[1]);case 3:return S5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));
}},$wa=function(a,b){return H0.h(S5.g(a,b))},axa=function(a,b,c,d){return gsa(a,b,c,d)},cxa=function(a){return $APP.fk.l(a,$APP.I([$APP.ob,new $APP.n(null,1,[bxa,$APP.fk.h($APP.gg)],null)]))},dxa=function(a,b,c){var d=$APP.fk.h(null);$APP.gk.g(a,function(e){e=S5.j(e,b,c);$APP.Hg(d,e);return H0.h(e)});return $APP.v(d)},exa=function(a){return $APP.v(a)},fxa=function(a,b){a=a.toString(16);var c=$APP.le(a);return c>b?$APP.sj.j(a,0,b):c<b?[$APP.t.h($APP.Dg.g($APP.t,$APP.lp.g(b-c,"0"))),$APP.t.h(a)].join(""):
a},gxa=function gxa(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return gxa.l(0<c.length?new $APP.Md(c.slice(0),0,null):null)};gxa.l=function(a){return $APP.fca(a,$APP.Vi.j($APP.ub(),$APP.mb,!1))};gxa.o=0;gxa.P=function(a){return this.l($APP.x(a))};
var hxa=new $APP.w(null,"ground","ground",-1460862835,null),ixa=new $APP.w("datascript","Datom","datascript/Datom",-901340080,null),p1=new $APP.K(null,"pattern","pattern",242135423),jxa=new $APP.w("datascript.core","squuid","datascript.core/squuid",-408746813,null),Kua=new $APP.K("parser","rule-var","parser/rule-var",-1584354459),F_=new $APP.K("db.unique","identity","db.unique/identity",1675950722),mta=new $APP.K("db","retract","db/retract",-1549825231),kxa=new $APP.w("datascript.core","create-conn",
"datascript.core/create-conn",-768042587,null),Bta=new $APP.K(null,"new","new",-2085437848),isa=new $APP.K(null,"index","index",-1531685915),lxa=new $APP.w("datascript.db","IDatom","datascript.db/IDatom",293960966,null),mxa=new $APP.K(null,"incomparable","incomparable",1634329662),nxa=new $APP.w(null,"datom-tx","datom-tx",1349109608,null),Kva=new $APP.K(null,"strs","strs",1175537277),usa=new $APP.K("db.cardinality","one","db.cardinality/one",1428352190),Zsa=new $APP.K("transact","upsert","transact/upsert",
412688078),L4=new $APP.K(null,"qreturn-map","qreturn-map",1841215994),oxa=new $APP.w("datascript.core","empty-db","datascript.core/empty-db",-807971396,null),pxa=new $APP.w(null,"stddev","stddev",775056588,null),qxa=new $APP.w(null,"msec","msec",-1372914914,null),Fsa=new $APP.K(null,"entity-id","entity-id",1485898093),rxa=new $APP.w(null,"datom-added","datom-added",-363961980,null),W4=new $APP.K(null,"rules","rules",1198912366),sxa=new $APP.w("datascript.core","filter","datascript.core/filter",-1276765471,
null),xta=new $APP.K("db","cas","db/cas",-451542322),T5=new $APP.K(null,"acc","acc",838566312),txa=new $APP.w("datascript.core","from-serializable","datascript.core/from-serializable",-1560031101,null),Hsa=new $APP.K("lookup-ref","unique","lookup-ref/unique",-960647710),t_=new $APP.K(null,"max-tx","max-tx",1119558339),Ava=new $APP.K("parser","rule","parser/rule",-464044566),F1=new $APP.K(null,"first-attr","first-attr",-1993039831),uxa=new $APP.w("datascript.core","q","datascript.core/q",2106686416,
null),A1=new $APP.K(null,"ref?","ref?",1932693720),vxa=new $APP.w(null,"added","added",-596784081,null),wxa=new $APP.w(null,"sum","sum",1777518341,null),fva=new $APP.K("parser","find","parser/find",-801023103),U5=new $APP.K(null,"attr","attr",-604132353),qua=new $APP.K(null,"visitor","visitor",-1026865865),b6=new $APP.K(null,"elements","elements",657646735),xxa=new $APP.w(null,"entity","entity",1189561251,null),yxa=new $APP.K("datascript.impl.entity","nf","datascript.impl.entity/nf",-953741353),J1=
new $APP.K(null,"wildcard?","wildcard?",-686044101),eta=new $APP.K("datascript.db","tx-redundant","datascript.db/tx-redundant",-1117921977),a5=new $APP.K("query","where","query/where",-1935159429),O4=new $APP.K("parser","query","parser/query",1877320671),Lsa=new $APP.K(null,"context","context",-830191113),zxa=new $APP.w("datascript.db","validate-schema","datascript.db/validate-schema",-783030261,null),G1=new $APP.K(null,"last-attr","last-attr",-526000708),ata=new $APP.K(null,"conflict","conflict",
1978796605),Axa=new $APP.w(null,"!\x3d","!\x3d",-201205829,null),X4=new $APP.K(null,"rels","rels",1770187185),vta=new $APP.K("db","fn","db/fn",-1175261470),Bxa=new $APP.w("datascript.core","init-db","datascript.core/init-db",1493526573,null),Cxa=new $APP.w("datascript.core","touch","datascript.core/touch",632058772,null),G0=new $APP.K(null,"db-before","db-before",-553691536),q1=new $APP.K(null,"recursion-limit","recursion-limit",52345639),pta=new $APP.K("datascript.db","value-tempids","datascript.db/value-tempids",
244806162),Tsa=new $APP.K(null,"datom","datom",-371556090),Ssa=new $APP.K("transact","unique","transact/unique",-940992320),M_=new $APP.K("db.type","ref","db.type/ref",-1728373079),Dxa=new $APP.w("datascript.db","datom","datascript.db/datom",399198004,null),Exa=new $APP.w(null,"variance","variance",-1522424942,null),Fxa=new $APP.w("datascript.core","reset-conn!","datascript.core/reset-conn!",-458464444,null),Gxa=new $APP.w("datascript.core","with","datascript.core/with",-1124098173,null),g1=new $APP.K("db",
"id","db/id",-1388397098),zta=new $APP.K(null,"old","old",-1825222690),Cta=new $APP.K("db.fn","retractAttribute","db.fn/retractAttribute",937402164),Hxa=new $APP.w("datascript.db","datom-added","datascript.db/datom-added",-560586371,null),F3=new $APP.K(null,"required","required",1807647006),Ixa=new $APP.K("db.pull","attr","db.pull/attr",-533298746),Gsa=new $APP.K("lookup-ref","syntax","lookup-ref/syntax",-317304012),Jxa=new $APP.w("datascript.core","conn-from-db","datascript.core/conn-from-db",1590561228,
null),oua=new $APP.K("db.pull","wildcard","db.pull/wildcard",116316031),v_=new $APP.K(null,"pull-patterns","pull-patterns",-343695048),Kxa=new $APP.w(null,"init-db","init-db",-1059254491,null),Lxa=new $APP.w("datascript.core","db","datascript.core/db",667170070,null),Mxa=new $APP.w(null,"-index-range","-index-range",898114142,null),I0=new $APP.K(null,"tx-data","tx-data",934159761),Dwa=new $APP.K(null,"used-args","used-args",23596256),Ata=new $APP.K(null,"expected","expected",1583670997),Nxa=new $APP.w(null,
"datom-from-reader","datom-from-reader",1334075127,null),U4=new $APP.K(null,"variable","variable",-281346492),N4=new $APP.K(null,"qwhere","qwhere",-1645067378),Isa=new $APP.K("db","ident","db/ident",-737096),Oxa=new $APP.w(null,"transact!","transact!",817805717,null),J0=new $APP.K(null,"tempids","tempids",1767509089),ssa=new $APP.K("db","attrTuples","db/attrTuples",860541631),Pva=new $APP.K(null,"in","in",-1531184865),J4=new $APP.K(null,"qfind","qfind",1529332972),B1=new $APP.K(null,"component?",
"component?",407783990),Pxa=new $APP.w("datascript.core","serializable","datascript.core/serializable",-630048076,null),eva=new $APP.w(null,"$","$",-1580747756,null),Cwa=new $APP.K(null,"prefix-context","prefix-context",-1269613591),L_=new $APP.K("db.cardinality","many","db.cardinality/many",772806234),Usa=new $APP.K("datascript.db","queued-tuples","datascript.db/queued-tuples",-762852029),gva=new $APP.w(null,"aggregate","aggregate",-1142967327,null),h1=new $APP.K("db","add","db/add",235286841),Qxa=
new $APP.w(null,"q","q",-1965434072,null),Rxa=new $APP.w("datascript.core","pull","datascript.core/pull",-1213970902,null),w_=new $APP.K(null,"pull-attrs","pull-attrs",-974863177),H0=new $APP.K(null,"db-after","db-after",-571884666),C4=new $APP.K("parser","where","parser/where",-966053850),c6=new $APP.K(null,"seen","seen",-518999789),Sxa=new $APP.w("clojure.string","starts-with?","clojure.string/starts-with?",656256322,null),osa=new $APP.K("db.unique","value","db.unique/value",276903088),Lra=new $APP.K(null,
"tx","tx",466630418),Yua=new $APP.K("parser","binding","parser/binding",-346395752),ita=new $APP.K("db.fn","retractEntity","db.fn/retractEntity",-1423535441),D4=new $APP.K(null,"vars","vars",-2046957217),Txa=new $APP.w(null,"attr","attr",1036399174,null),Ksa=new $APP.K("entity-id","missing","entity-id/missing",1234588374),Uxa=new $APP.w("datascript.db","datom-from-reader","datascript.db/datom-from-reader",2070683374,null),h6=new $APP.K(null,"element","element",1974019749),Vxa=new $APP.w(null,"DB",
"DB",1622874957,null),yva=new $APP.w(null,"or-join","or-join",591375469,null),Wxa=new $APP.K("db.pull","reverse","db.pull/reverse",1999788297),Xxa=new $APP.w(null,"db-from-reader","db-from-reader",1527469533,null),Yxa=new $APP.w(null,"get-some","get-some",409442058,null),Zxa=new $APP.w(null,"avg","avg",1837937727,null),$xa=new $APP.K(null,"unfiltered-db","unfiltered-db",-1363720391),aya=new $APP.w(null,"println-str","println-str",-2049216703,null),D1=new $APP.K(null,"attrs","attrs",-2090668713),jsa=
new $APP.K(null,"components","components",-1073188942),Ova=new $APP.K("parser","with","parser/with",-386255821),bya=new $APP.w(null,"missing?","missing?",-1710383910,null),cya=new $APP.w("clojure.string","ends-with?","clojure.string/ends-with?",-745964149,null),dya=new $APP.w("datascript.core","transact!","datascript.core/transact!",1506351773,null),$Z=new $APP.K(null,"avet","avet",1383857032),Kra=new $APP.K(null,"added","added",2057651688),bua=new $APP.w(null,"limit","limit",284709164,null),i6=new $APP.w(null,
"schema","schema",58529736,null),sta=new $APP.K(null,"entity","entity",-450970276),eya=new $APP.w("datascript.db","datom-tx","datascript.db/datom-tx",2084964209,null),lva=new $APP.K("parser","in","parser/in",1617442048),fya=new $APP.K(null,"init-db","init-db",1595181278),gya=new $APP.w(null,"create-conn","create-conn",2071410861,null),C_=new $APP.K(null,"hash","hash",-13781596),y1=new $APP.K(null,"xform","xform",-1725711008),hya=new $APP.w(null,"rschema","rschema",444397473,null),iya=new $APP.w(null,
"with","with",104234651,null),wva=new $APP.w(null,"not-join","not-join",-645515756,null),K4=new $APP.K(null,"qwith","qwith",-45809392),z1=new $APP.K(null,"multival?","multival?",1072388383),Nva=new $APP.K(null,"with","with",-1536296876),jya=new $APP.w("datascript.core","datoms","datascript.core/datoms",961250077,null),Uta=new $APP.K("parser","pull","parser/pull",-2147427204),kya=new $APP.w(null,"tx","tx",2107161945,null),Rua=new $APP.K("parser","rule-vars","parser/rule-vars",-1493174969),lya=new $APP.w("datascript.core",
"tx0","datascript.core/tx0",1432817831,null),mya=new $APP.w("datascript.core","entity","datascript.core/entity",-1406213973,null),j6=new $APP.w(null,"tx-data","tx-data",-1720276008,null),I1=new $APP.K(null,"reverse-attrs","reverse-attrs",630097702),S_=new $APP.K("schema","validation","schema/validation",1178447161),nya=new $APP.w(null,"reset-conn!","reset-conn!",1315177148,null),awa=new $APP.K(null,"got","got",-1674745710),tva=new $APP.K(null,"rule-vars","rule-vars",1665972520),d0=new $APP.K("db",
"valueType","db/valueType",1827971944),oya=new $APP.w(null,"Datom","Datom",1208901035,null),t1=new $APP.K(null,"reverse?","reverse?",-1672868474),q_=new $APP.K(null,"aevt","aevt",-585148059),pya=new $APP.K("datascript","db","datascript/db",-1190971692),$va=new $APP.K("query","inputs","query/inputs",1042810394),e0=new $APP.K("db","cardinality","db/cardinality",-104975659),qya=new $APP.w(null,"serializable","serializable",1941609404,null),rya=new $APP.K(null,"thaw-fn","thaw-fn",-240544261),k6=new $APP.K(null,
"binding","binding",539932593),sya=new $APP.w("datascript.db","db-from-reader","datascript.db/db-from-reader",266573302,null),$sa=new $APP.K(null,"assertion","assertion",-1645134882),g0=new $APP.K(null,"datoms","datoms",-290874434),tya=new $APP.w(null,"count-distinct","count-distinct",-1566572514,null),dva=new $APP.w(null,"pull","pull",779986722,null),uya=new $APP.w(null,"listen!","listen!",-115577950,null),vya=new $APP.w(null,"db-with","db-with",233242042,null),tta=new $APP.K("db.fn","call","db.fn/call",
-151594418),l6=new $APP.w(null,"datascript.core","datascript.core",-1034255346,null),wya=new $APP.w("datascript.core","conn-from-datoms","datascript.core/conn-from-datoms",253878827,null),xya=new $APP.K(null,"pred","pred",1927423397),yya=new $APP.w(null,"untuple","untuple",-606149900,null),m6=new $APP.w(null,"c1","c1",-1521904966,null),q6=new $APP.w(null,"c2","c2",78651156,null),zya=new $APP.w(null,"c3","c3",468715789,null),Aya=new $APP.w(null,"c4","c4",-1626390159,null),Bwa=new $APP.K(null,"prefix-clauses",
"prefix-clauses",1294180028),Bya=new $APP.w(null,"index-range","index-range",1044940937,null),xwa=new $APP.w(null,"-differ?","-differ?",1465687357,null),O_=new $APP.K("db","isComponent","db/isComponent",423352398),n0=new $APP.w(null,"db","db",-1661185010,null),Cya=new $APP.w(null,"touch","touch",-1158163300,null),Dya=new $APP.w(null,"sample","sample",1719555128,null),Eya=new $APP.w(null,"datom","datom",1268975437,null),Fya=new $APP.K(null,"serialize","serialize",-69216574),P_=new $APP.K("db","tupleAttrs",
"db/tupleAttrs",250080092),Gya=new $APP.w("datascript.core","datom","datascript.core/datom",-1596234155,null),Nsa=new $APP.K("db","current-tx","db/current-tx",1600722132),r1=new $APP.K(null,"recursive?","recursive?",1340075244),u6=new $APP.w(null,"conn","conn",1918841190,null),Hya=new $APP.K(null,"thaw-kw","thaw-kw",1076733097),Ewa=new $APP.K(null,"pending-guards","pending-guards",-1255527308),Iya=new $APP.K("query","binding","query/binding",698240489),Iva=new $APP.K(null,"return-map","return-map",
1620104901),Z4=new $APP.K(null,"tuples","tuples",-676032639),Jya=new $APP.K(null,"branches","branches",-1240337268),C6=new $APP.w(null,"datoms","datoms",1349657093,null),yta=new $APP.K("transact","cas","transact/cas",816687170),Kya=new $APP.w("clojure.string","blank?","clojure.string/blank?",1772874244,null),hsa=new $APP.K(null,"index-access","index-access",-1548960265),Lya=new $APP.w(null,"validate-schema","validate-schema",758884380,null),bxa=new $APP.K(null,"listeners","listeners",394544445),o_=
new $APP.K(null,"eavt","eavt",-666437073),M4=new $APP.K(null,"qin","qin",1372651151),r_=new $APP.K(null,"max-eid","max-eid",2134868075),Mya=new $APP.w("datascript.core","index-range","datascript.core/index-range",-1484576383,null),Nya=new $APP.w(null,"tuple","tuple",1167864243,null),P4=new $APP.K(null,"symbols","symbols",1211743),Dta=new $APP.K("db","retractEntity","db/retractEntity",-1452737935),Oya=new $APP.w("datascript.core","listen!","datascript.core/listen!",1659161258,null),Pya=new $APP.w(null,
"squuid","squuid",-1898207797,null),Vta=new $APP.K(null,"fragment","fragment",826775688),Qya=new $APP.K("transaction","filtered","transaction/filtered",1699706605),b0=new $APP.K(null,"attribute","attribute",-2074029119),Mva=new $APP.K(null,"where","where",-2044795965),nta=new $APP.K("datascript.db","internal","datascript.db/internal",-249301114),m_=new $APP.K(null,"schema","schema",-1582001791),u_=new $APP.K(null,"rschema","rschema",-1196134054),Rya=new $APP.w(null,"conn-from-datoms","conn-from-datoms",
-1502002909,null),Sya=new $APP.w("datascript.db","DB","datascript.db/DB",348347258,null),Tya=new $APP.w(null,"median","median",-2084869638,null),Uya=new $APP.w("clojure.string","includes?","clojure.string/includes?",-1842146260,null),Vya=new $APP.w(null,"empty-db","empty-db",1486862004,null),XY=new $APP.K(null,"v","v",21465059),$0=new $APP.K("transact","syntax","transact/syntax",-299207078),Wya=new $APP.w("datascript.db","Datom","datascript.db/Datom",1951800754,null),D6=new $APP.K(null,"recursion-limits",
"recursion-limits",1762857814),gua=new $APP.w(null,"...","...",-1926939749,null),zua=new $APP.K(null,"freeze-kw","freeze-kw",391758233),R_=new $APP.K("db.type","tuple","db.type/tuple",938234914),G_=new $APP.K("db","index","db/index",-1531680669),Jva=new $APP.K(null,"find","find",496279456),eZ=new $APP.K(null,"a","a",-2123407586),Xya=new $APP.w("datascript","DB","datascript/DB",-487332776,null),fua=new $APP.K(null,"*","*",-1294732318),yua=new $APP.K(null,"freeze-fn","freeze-fn",-575885995),Yya=new $APP.w("datascript.core",
"db-with","datascript.core/db-with",-1263574350,null),G3=new $APP.K(null,"free","free",801364328),F6=new $APP.w(null,"datascript.db","datascript.db",-444456104,null),wta=new $APP.K("db.fn","cas","db.fn/cas",-379352172),Zya=new $APP.w(null,"tx0","tx0",-4656209,null),Cva=new $APP.K(null,"rule","rule",729973257),E_=new $APP.K("db","unique","db/unique",329396388),$ya=new $APP.w(null,"from-serializable","from-serializable",945516427,null),Csa=new $APP.w(null,"resolve-datom","resolve-datom",-294110827,
null),aza=new $APP.w("datascript.db","rschema","datascript.db/rschema",1982085018,null),Jsa=new $APP.K("entity-id","syntax","entity-id/syntax",1921317045),V4=new $APP.K(null,"sources","sources",-321166424),bza=new $APP.w(null,"get-else","get-else",1312024065,null),rta=new $APP.K("datascript.db","flush-tuples","datascript.db/flush-tuples",-797350002),G6=new $APP.w(null,"tx-meta","tx-meta",-1495152575,null),o1=new $APP.K(null,"limit","limit",-1355822363),O0=new $APP.K(null,"tx-meta","tx-meta",1159283194),
cza=new $APP.w(null,"pull-many","pull-many",1857679657,null),dza=new $APP.w("datascript.core","pull-many","datascript.core/pull-many",394351057,null),eza=new $APP.w(null,"conn-from-db","conn-from-db",-184109372,null);var Sqa,IY;datascript={};Sqa={};$APP.m=Oqa.prototype;$APP.m.ia=function(a,b,c){return Qqa.j?Qqa.j(this,b,c):Qqa.call(null,this,b,c)};$APP.m.Pa=function(a,b){return $APP.dc(this.kk,b)};$APP.m.ma=function(a,b){return $APP.Nz(this.kk,b,null)};$APP.m.O=function(a,b,c){return $APP.Nz(this.kk,b,c)};$APP.m.R=function(a,b,c){return $APP.Tc(this.kk,b,c)};var PY=$APP.y($APP.Xg.g(function(a){return 0!=(32&1<<a)},$APP.Os.j(31,-1,-1)))+1,OY=(1<<PY)-1;$APP.m=LY.prototype;$APP.m.Ek=function(){var a=this.keys;return a[a.length-1]};$APP.m.Nk=function(){return this.keys.length};$APP.m.Gk=function(a,b){return new LY(this.keys.concat(b.keys),this.wj.concat(b.wj))};$APP.m.Hk=function(a,b){a=ara(this.keys,b.keys);b=ara(this.wj,b.wj);return cra(new LY(a[0],b[0]),new LY(a[1],b[1]))};
$APP.m.Fk=function(a,b,c){a=Yqa(b,this.keys,c);return-1===a?null:hra(this.wj[a],b,c)};$APP.m.Ck=function(a,b,c){a=Vqa(b,this.keys,this.keys.length-2,c);c=ira(this.wj[a],b,c);if($APP.p(c)){var d=this.keys,e=a+1,f=c.map(era);b=bra(b,d,a,e,f,f.length)?d:$qa(d,a,e,f);a=$qa(this.wj,a,a+1,c);if(32>=a.length)return[new LY(b,a)];c=a.length>>>1;return[new LY(b.slice(0,c),a.slice(0,c)),new LY(b.slice(c),a.slice(c))]}return null};
$APP.m.Dk=function(a,b,c,d,e,f){var g=Yqa(b,this.keys,c);if(-1===g)return null;a=0<=g-1?this.wj[g-1]:null;var k=g+1<this.wj.length?this.wj[g+1]:null;c=jra(this.wj[g],b,c,!1,a,k);if($APP.p(c)){a=$APP.p(a)?g-1:g;g=$APP.p(k)?2+g:1+g;k=this.keys;var l=c.map(era);b=bra(b,k,a,g,l,l.length)?k:$qa(k,a,g,l);c=$qa(this.wj,a,g,c);return kra(new LY(b,c),d,e,f)}return null};$APP.m=MY.prototype;$APP.m.Ek=function(){var a=this.keys;return a[a.length-1]};$APP.m.Nk=function(){return this.keys.length};
$APP.m.Gk=function(a,b){return new MY(this.keys.concat(b.keys))};$APP.m.Hk=function(a,b){a=ara(this.keys,b.keys);return cra(new MY(a[0]),new MY(a[1]))};$APP.m.Fk=function(a,b,c){a=Xqa(b,this.keys,c);return-1===a?null:this.keys[a]};
$APP.m.Ck=function(a,b,c){a=Vqa(b,this.keys,this.keys.length-1,c);var d=this.keys.length,e;if(e=a<d)e=this.keys[a],e=0===(b.g?b.g(c,e):b.call(null,c,e));return e?null:32===d?(b=d+1>>>1,a>b?[new MY(this.keys.slice(0,b)),new MY(Zqa(this.keys,b,d,a,a,[c]))]:[new MY(Zqa(this.keys,0,b,a,a,[c])),new MY(this.keys.slice(b,d))]):[new MY($qa(this.keys,a,a,[c]))]};$APP.m.Dk=function(a,b,c,d,e,f){a=Xqa(b,this.keys,c);if(-1===a)return null;a=$qa(this.keys,a,a+1,[]);return kra(new MY(a),d,e,f)};$APP.m=NY.prototype;
$APP.m.toString=function(){return $APP.td(this)};$APP.m.ma=function(a,b){return hra(this.root,this.Oj,b)};$APP.m.O=function(a,b,c){a=hra(this.root,this.Oj,b);return $APP.p(a)?a:c};$APP.m.R=function(a,b,c){return $APP.wj(b,$APP.Cj,"#{"," ","}",c,$APP.x(this))};$APP.m.W=function(){return this.H};$APP.m.da=function(){return new NY(this.root,this.shift,this.I,this.Oj,this.H,this.Ed)};$APP.m.fa=function(){return this.I};$APP.m.Vc=function(){return $APP.Lc(QY.h?QY.h(this):QY.call(null,this))};
$APP.m.X=function(){var a=this.Ed;return null!=a?a:this.Ed=a=$APP.Vd(this)};$APP.m.N=function(a,b){var c=this;return $APP.Ge(b)&&this.I===$APP.le(b)&&$APP.Ag(function(d){return $APP.Ze(c,d)},b)};$APP.m.Ld=function(){return this};$APP.m.sa=function(){return new NY(new MY([]),0,0,this.Oj,this.H,null)};$APP.m.Hf=function(a,b){return SY.j?SY.j(this,b,this.Oj):SY.call(null,this,b,this.Oj)};$APP.m.Ta=function(a,b){a=QY.h?QY.h(this):QY.call(null,this);return $APP.p(a)?$APP.Pz(a,b):b.s?b.s():b.call(null)};
$APP.m.Ua=function(a,b,c){a=QY.h?QY.h(this):QY.call(null,this);return $APP.p(a)?$APP.Pz(a,b,c):c};$APP.m.Qd=function(a,b){return RY.j?RY.j(this,b,this.Oj):RY.call(null,this,b,this.Oj)};$APP.m.fe=function(){return this};$APP.m.ca=function(){return QY.h?QY.h(this):QY.call(null,this)};$APP.m.Lg=function(a,b){return SY.j?SY.j(this,b,this.Oj):SY.call(null,this,b,this.Oj)};$APP.m.aa=function(a,b){return new NY(this.root,this.shift,this.I,this.Oj,b,this.Ed)};
$APP.m.ha=function(a,b){return RY.j?RY.j(this,b,this.Oj):RY.call(null,this,b,this.Oj)};$APP.m.call=function(a){switch(arguments.length-1){case 1:return this.h(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length-1)].join(""));}};$APP.m.apply=function(a,b){return this.call.apply(this,[this].concat($APP.Kb(b)))};$APP.m.h=function(a){return this.ma(null,a)};$APP.m.g=function(a,b){return this.O(null,a,b)};
var nra=function nra(a,b,c){var e=OY&b>>>c;if(0<c){var f=a.wj[e],g=c-PY;b=nra.j?nra.j(f,b,g):nra.call(null,f,b,g);return-1===b?e+1<a.wj.length?0|e+1<<c:-1:b|e<<c}return e+1<a.keys.length?0|e+1<<0:-1},qra=function qra(a,b,c){var e=OY&b>>>c;if(0<c){var f=c-PY,g=a.wj[e];b=qra.j?qra.j(g,b,f):qra.call(null,g,b,f);return-1===b?0<=e-1?(--e,pra(a.wj[e],f)|e<<c):-1:b|e<<c}return 0<=e-1?0|e-1<<0:-1};$APP.m=tra.prototype;$APP.m.fa=function(){return this.end-this.Db};
$APP.m.Y=function(a,b){return this.C[this.Db+b]};$APP.m.ob=function(a,b,c){return 0<=b&&b<this.end-this.Db?this.C[this.Db+b]:c};$APP.m.zf=function(){if(this.Db===this.end)throw Error("-drop-first of empty chunk");return new $APP.Tf(this.C,this.Db+1,this.end)};$APP.m.Ta=function(a,b){return this.Db===this.end?b.s?b.s():b.call(null):$APP.Pz(this.zf(null),b,this.C[this.Db])};
$APP.m.Ua=function(a,b,c){for(a=this.Db;;)if(a<this.end){var d=this.C[a];c=b.g?b.g(c,d):b.call(null,c,d);if($APP.ae(c))return $APP.v(c);a+=1}else return c};$APP.m=ura.prototype;$APP.m.toString=function(){return $APP.td(this)};$APP.m.R=function(a,b,c){return $APP.wj(b,$APP.Cj,"("," ",")",c,$APP.x(this))};
$APP.m.Ra=function(){if($APP.p(this.keys)){if(this.idx+1<this.keys.length)return this.left+1<this.right?new ura(this.set,this.left+1,this.right,this.keys,this.idx+1):null;var a=ora(this.set,this.left);return $APP.Ui.g(-1,a)&&a<this.right?this.uk(a,this.right):null}return null};$APP.m.Vc=function(){if($APP.p(this.keys)){var a=this.set,b=rra(this.set,this.left),c=rra(this.set,this.right);return wra.j?wra.j(a,b,c):wra.call(null,a,b,c)}return null};$APP.m.N=function(a,b){return $APP.wf(this,b)};
$APP.m.Ta=function(a,b){if(null==this.keys)return b.s?b.s():b.call(null);a=this.Na(null);var c=this.Ra(null);return null==c?a:$APP.Pz(c,b,a)};$APP.m.Ua=function(a,b,c){a=this.left;for(var d=this.keys,e=this.idx;;){if(null==d)return c;var f=d[e];c=b.g?b.g(c,f):b.call(null,c,f);if($APP.ae(c))return $APP.v(c);if(e+1<d.length)if(a+1<this.right)e+=1,a+=1;else return c;else if(a=ora(this.set,a),-1!==a&&a<this.right)d=lra(this.set,a),e=OY&a>>>0;else return c}};
$APP.m.Na=function(){return $APP.p(this.keys)?this.keys[this.idx]:null};$APP.m.Va=function(){var a=this.Ra(null);return $APP.p(a)?a:$APP.Pd};$APP.m.ca=function(){return $APP.p(this.keys)?this:null};$APP.m.de=function(){var a=$APP.B.g(this.left|OY,this.right|OY)?this.right&OY:this.keys.length;return new tra(this.keys,this.idx,a)};$APP.m.fd=function(){var a=this.ce();return $APP.p(a)?a:$APP.Pd};$APP.m.uk=function(a,b){return new ura(this.set,a,b,lra(this.set,a),OY&a>>>0)};
$APP.m.ce=function(){var a=ora(this.set,this.left+(this.keys.length-this.idx-1));return $APP.Ui.g(-1,a)&&a<this.right?this.uk(a,this.right):null};$APP.m=vra.prototype;$APP.m.toString=function(){return $APP.td(this)};$APP.m.R=function(a,b,c){return $APP.wj(b,$APP.Cj,"("," ",")",c,$APP.x(this))};
$APP.m.Ra=function(){if($APP.p(this.keys)){if(0<=this.idx-1)return this.right-1>this.left?new vra(this.set,this.left,this.right-1,this.keys,this.idx-1):null;var a=rra(this.set,this.right);return $APP.Ui.g(-1,a)&&a>this.left?this.uk(this.left,a):null}return null};$APP.m.Vc=function(){if($APP.p(this.keys)){var a=-1===this.left?0:ora(this.set,this.left),b=ora(this.set,this.right);return sra(this.set,a,-1===b?this.right+1:b)}return null};$APP.m.N=function(a,b){return $APP.wf(this,b)};
$APP.m.Na=function(){return $APP.p(this.keys)?this.keys[this.idx]:null};$APP.m.Va=function(){var a=this.Ra(null);return $APP.p(a)?a:$APP.Pd};$APP.m.ca=function(){return $APP.p(this.keys)?this:null};$APP.m.uk=function(a,b){return new vra(this.set,a,b,lra(this.set,b),OY&b>>>0)};var Qra=Error,fta=$APP.ys.g($APP.Af,$APP.qh),rsa=$APP.ys.g($APP.Af,$APP.Zi);$APP.m=WY.prototype;$APP.m.nj=function(){return 0<this.tx?this.tx:-this.tx};$APP.m.Xj=function(){return 0<this.tx};$APP.m.X=function(){return 0===this.Ed?this.Ed=Hra.h?Hra.h(this):Hra.call(null,this):this.Ed};$APP.m.N=function(a,b){return(a=b instanceof WY)?Ira.g?Ira.g(this,b):Ira.call(null,this,b):a};$APP.m.ca=function(){return Jra.h?Jra.h(this):Jra.call(null,this)};
$APP.m.ma=function(a,b){return Mra.j?Mra.j(this,b,null):Mra.call(null,this,b,null)};$APP.m.O=function(a,b,c){return Mra.j?Mra.j(this,b,c):Mra.call(null,this,b,c)};$APP.m.Y=function(a,b){return Nra?Nra(this,b):Pra.call(null,this,b)};$APP.m.ob=function(a,b,c){return Ora?Ora(this,b,c):Pra.call(null,this,b,c)};$APP.m.ia=function(a,b,c){return Rra.j?Rra.j(this,b,c):Rra.call(null,this,b,c)};
$APP.m.R=function(a,b,c){return $APP.wj(b,$APP.Cj,"#datascript/Datom ["," ","]",c,new $APP.M(null,5,5,$APP.O,[this.e,this.a,this.v,this.nj(null),this.Xj(null)],null))};$APP.Gba("datascript.db.Datom",WY);
var gZ=function gZ(a){switch(arguments.length){case 3:return gZ.j(arguments[0],arguments[1],arguments[2]);case 4:return gZ.B(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return gZ.J(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};gZ.j=function(a,b,c){return new WY(a,b,c,536870912,0,0)};gZ.B=function(a,b,c,d){return new WY(a,b,c,d,0,0)};
gZ.J=function(a,b,c,d,e){return new WY(a,b,c,$APP.p(e)?d:-d,0,0)};gZ.o=5;$APP.m=l_.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "schema":return this.Ej;case "eavt":return this.vj;case "aevt":return this.Gj;case "avet":return this.Cj;case "max-eid":return this.Mj;case "max-tx":return this.Nj;case "rschema":return this.Jj;case "pull-patterns":return this.Ij;case "pull-attrs":return this.Hj;case "hash":return this.hash;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.db.DB{",", ","}",c,$APP.V.g(new $APP.M(null,10,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[m_,this.Ej],null),new $APP.M(null,2,5,$APP.O,[o_,this.vj],null),new $APP.M(null,2,5,$APP.O,[q_,this.Gj],null),new $APP.M(null,2,5,$APP.O,[$Z,this.Cj],null),new $APP.M(null,2,5,$APP.O,[r_,this.Mj],null),new $APP.M(null,2,5,$APP.O,[t_,this.Nj],null),new $APP.M(null,2,5,$APP.O,[u_,this.Jj],null),new $APP.M(null,
2,5,$APP.O,[v_,this.Ij],null),new $APP.M(null,2,5,$APP.O,[w_,this.Hj],null),new $APP.M(null,2,5,$APP.O,[C_,this.hash],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,10,new $APP.M(null,10,5,$APP.O,[m_,o_,q_,$Z,r_,t_,u_,v_,w_,C_],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,this.A,this.F)};
$APP.m.fa=function(){return 10+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1515640948^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.Ej,b.Ej)&&$APP.B.g(this.vj,b.vj)&&$APP.B.g(this.Gj,b.Gj)&&$APP.B.g(this.Cj,b.Cj)&&$APP.B.g(this.Mj,b.Mj)&&$APP.B.g(this.Nj,b.Nj)&&$APP.B.g(this.Jj,b.Jj)&&$APP.B.g(this.Ij,b.Ij)&&$APP.B.g(this.Hj,b.Hj)&&$APP.B.g(this.hash,b.hash)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,10,[m_,null,t_,null,C_,null,q_,null,$Z,null,r_,null,o_,null,w_,null,v_,null,u_,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "schema":case "eavt":case "aevt":case "avet":case "max-eid":case "max-tx":case "rschema":case "pull-patterns":case "pull-attrs":case "hash":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(m_,b):$APP.Gf.call(null,m_,b))?new l_(c,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(o_,b):$APP.Gf.call(null,o_,b))?new l_(this.Ej,c,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(q_,b):$APP.Gf.call(null,q_,b))?new l_(this.Ej,this.vj,c,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,
this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($Z,b):$APP.Gf.call(null,$Z,b))?new l_(this.Ej,this.vj,this.Gj,c,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(r_,b):$APP.Gf.call(null,r_,b))?new l_(this.Ej,this.vj,this.Gj,this.Cj,c,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(t_,b):$APP.Gf.call(null,t_,b))?new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,c,this.Jj,this.Ij,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?
$APP.Gf.g(u_,b):$APP.Gf.call(null,u_,b))?new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,c,this.Ij,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(v_,b):$APP.Gf.call(null,v_,b))?new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,c,this.Hj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(w_,b):$APP.Gf.call(null,w_,b))?new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,c,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(C_,b):$APP.Gf.call(null,
C_,b))?new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,c,this.G,this.A,null):new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,10,5,$APP.O,[new $APP.$e(m_,this.Ej,null),new $APP.$e(o_,this.vj,null),new $APP.$e(q_,this.Gj,null),new $APP.$e($Z,this.Cj,null),new $APP.$e(r_,this.Mj,null),new $APP.$e(t_,this.Nj,null),new $APP.$e(u_,this.Jj,null),new $APP.$e(v_,this.Ij,null),new $APP.$e(w_,this.Hj,null),new $APP.$e(C_,this.hash,null)],null),this.A))};
$APP.m.aa=function(a,b){return new l_(this.Ej,this.vj,this.Gj,this.Cj,this.Mj,this.Nj,this.Jj,this.Ij,this.Hj,this.hash,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};
$APP.m.bi=function(a,b){a:for(var c=o_.h(b),d=b=a=$APP.qh,e=this.vj;;){if($APP.Ee(e)){var f=new $APP.M(null,3,5,$APP.O,[$APP.ig(a),$APP.ig($APP.Vh.g(b,c)),$APP.ig(d)],null);break a}if($APP.Ee(c)){f=new $APP.M(null,3,5,$APP.O,[$APP.ig($APP.Vh.g(a,e)),$APP.ig(b),$APP.ig(d)],null);break a}var g=$APP.y(e),k=$APP.y(c);try{f=$ra.g?$ra.g(g,k):$ra.call(null,g,k)}catch(l){if(l instanceof Error)f=mxa;else throw l;}if($APP.B.g(f,mxa))a=$APP.Af.g(a,g),b=$APP.Af.g(b,k),e=$APP.z(e),c=$APP.z(c);else if(0===f)d=
$APP.Af.g(d,g),e=$APP.z(e),c=$APP.z(c);else if(0>f)a=$APP.Af.g(a,g),e=$APP.z(e);else if(0<f)b=$APP.Af.g(b,k),c=$APP.z(c);else{f=null;break a}}return f};$APP.m.na=$APP.Cd;$APP.m.R=function(a,b,c){return Asa.j?Asa.j(this,b,c):Asa.call(null,this,b,c)};$APP.m.Nh=$APP.Cd;$APP.m.fa=function(){return $APP.le(this.vj)};$APP.m.Xi=$APP.Cd;$APP.m.Vc=function(){return $APP.Lc(this.vj)};$APP.m.Bf=$APP.Cd;$APP.m.X=function(){return xsa.h?xsa.h(this):xsa.call(null,this)};
$APP.m.N=function(a,b){return zsa.g?zsa.g(this,b):zsa.call(null,this,b)};$APP.m.Oh=$APP.Cd;$APP.m.Ld=function(){return $APP.Ir.j($APP.Ir.j($APP.Ir.j(this,o_,$APP.aca),q_,$APP.aca),$Z,$APP.aca)};$APP.m.Ph=$APP.Cd;$APP.m.sa=function(){var a=this.Ej;a=H6.h?H6.h(a):H6.call(null,a);return $APP.Ae(a,$APP.Be(this))};$APP.m.Qd=function(){throw $APP.Gm.g("datascript.DB/conj! is not supported",$APP.gg);};$APP.m.fe=function(){return $APP.Ir.j($APP.Ir.j($APP.Ir.j(this,o_,$APP.bca),q_,$APP.bca),$Z,$APP.bca)};
$APP.m.ci=function(){return pya};$APP.m.yk=function(a,b,c){ksa(this,b,c);return TY($APP.Xe.g(this,b),A0.J?A0.J(this,b,c,0,536870912):A0.call(null,this,b,c,0,536870912),A0.J?A0.J(this,b,c,2147483647,2147483647):A0.call(null,this,b,c,2147483647,2147483647))};$APP.m.Ak=function(a,b,c){ksa(this,b,c);return TY($APP.Xe.g(this,b),A0.J?A0.J(this,b,c,0,536870912):A0.call(null,this,b,c,0,536870912),gZ.B(2147483647,null,null,2147483647))};
$APP.m.zk=function(a,b,c,d){ksa(this,$Z,new $APP.M(null,1,5,$APP.O,[b],null));a=new $APP.J(null,Mxa,new $APP.J(null,n0,new $APP.J(null,b,new $APP.J(null,c,new $APP.J(null,d,null,1,null),2,null),3,null),4,null),5,null);r0.g?r0.g(b,a):r0.call(null,b,a);return TY(this.Cj,z0.Ha?z0.Ha(this,null,b,c,null,0,536870912):z0.call(null,this,null,b,c,null,0,536870912),z0.Ha?z0.Ha(this,null,b,d,null,2147483647,2147483647):z0.call(null,this,null,b,d,null,2147483647,2147483647))};$APP.m.vk=$APP.Cd;$APP.m.xk=function(){return this.Ej};
$APP.m.wk=function(a,b){a=this.Jj;return a.h?a.h(b):a.call(null,b)};$APP.m.Jk=$APP.Cd;
$APP.m.Bk=function(a,b){a=$APP.E.j(b,0,null);var c=$APP.E.j(b,1,null),d=$APP.E.j(b,2,null),e=$APP.E.j(b,3,null);b=this.vj;var f=this.Gj,g=this.Cj;$APP.Ze(i_(this,L_),c);return $APP.p(a)?$APP.p(c)?null!=d?$APP.p(e)?TY(b,gZ.B(a,c,d,e),gZ.B(a,c,d,e)):TY(b,gZ.B(a,c,d,536870912),gZ.B(a,c,d,2147483647)):$APP.p(e)?$APP.Xg.g(function(k){return $APP.B.g(e,k.nj(null))},TY(b,gZ.B(a,c,null,536870912),gZ.B(a,c,null,2147483647))):TY(b,gZ.B(a,c,null,536870912),gZ.B(a,c,null,2147483647)):null!=d?$APP.p(e)?$APP.Xg.g(function(k){return $APP.B.g(d,
k.v)&&$APP.B.g(e,k.nj(null))},TY(b,gZ.B(a,null,null,536870912),gZ.B(a,null,null,2147483647))):$APP.Xg.g(function(k){return $APP.B.g(d,k.v)},TY(b,gZ.B(a,null,null,536870912),gZ.B(a,null,null,2147483647))):$APP.p(e)?$APP.Xg.g(function(k){return $APP.B.g(e,k.nj(null))},TY(b,gZ.B(a,null,null,536870912),gZ.B(a,null,null,2147483647))):TY(b,gZ.B(a,null,null,536870912),gZ.B(a,null,null,2147483647)):$APP.p(c)?null!=d?$APP.p(e)?$APP.p(g_.g?g_.g(this,c):g_.call(null,this,c))?$APP.Xg.g(function(k){return $APP.B.g(e,
k.nj(null))},TY(g,gZ.B(0,c,d,536870912),gZ.B(2147483647,c,d,2147483647))):$APP.Xg.g(function(k){return $APP.B.g(d,k.v)&&$APP.B.g(e,k.nj(null))},TY(f,gZ.B(0,c,null,536870912),gZ.B(2147483647,c,null,2147483647))):$APP.p(g_.g?g_.g(this,c):g_.call(null,this,c))?TY(g,gZ.B(0,c,d,536870912),gZ.B(2147483647,c,d,2147483647)):$APP.Xg.g(function(k){return $APP.B.g(d,k.v)},TY(f,gZ.B(0,c,null,536870912),gZ.B(2147483647,c,null,2147483647))):$APP.p(e)?$APP.Xg.g(function(k){return $APP.B.g(e,k.nj(null))},TY(f,gZ.B(0,
c,null,536870912),gZ.B(2147483647,c,null,2147483647))):TY(f,gZ.B(0,c,null,536870912),gZ.B(2147483647,c,null,2147483647)):null!=d?$APP.p(e)?$APP.Xg.g(function(k){return $APP.B.g(d,k.v)&&$APP.B.g(e,k.nj(null))},b):$APP.Xg.g(function(k){return $APP.B.g(d,k.v)},b):$APP.p(e)?$APP.Xg.g(function(k){return $APP.B.g(e,k.nj(null))},b):b};$APP.m=D_.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "unfiltered-db":return this.Kj;case "pred":return this.Pj;case "hash":return this.hash;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.db.FilteredDB{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$xa,this.Kj],null),new $APP.M(null,2,5,$APP.O,[xya,this.Pj],null),new $APP.M(null,2,5,$APP.O,[C_,this.hash],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[$xa,xya,C_],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new D_(this.Kj,this.Pj,this.hash,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-351969977^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.Kj,b.Kj)&&$APP.B.g(this.Pj,b.Pj)&&$APP.B.g(this.hash,b.hash)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[C_,null,xya,null,$xa,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new D_(this.Kj,this.Pj,this.hash,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "unfiltered-db":case "pred":case "hash":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($xa,b):$APP.Gf.call(null,$xa,b))?new D_(c,this.Pj,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(xya,b):$APP.Gf.call(null,xya,b))?new D_(this.Kj,c,this.hash,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(C_,b):$APP.Gf.call(null,C_,b))?new D_(this.Kj,this.Pj,c,this.G,this.A,null):new D_(this.Kj,this.Pj,this.hash,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e($xa,this.Kj,null),new $APP.$e(xya,this.Pj,null),new $APP.$e(C_,this.hash,null)],null),this.A))};$APP.m.aa=function(a,b){return new D_(this.Kj,this.Pj,this.hash,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.Th=$APP.Cd;$APP.m.ma=function(){throw Error("-lookup is not supported on FilteredDB");};
$APP.m.O=function(){throw Error("-lookup is not supported on FilteredDB");};$APP.m.na=$APP.Cd;$APP.m.R=function(a,b,c){return Asa.j?Asa.j(this,b,c):Asa.call(null,this,b,c)};$APP.m.Nh=$APP.Cd;$APP.m.fa=function(){return $APP.le(YZ(this,o_,$APP.qh))};$APP.m.Bf=$APP.Cd;$APP.m.X=function(){return ysa.h?ysa.h(this):ysa.call(null,this)};$APP.m.N=function(a,b){return zsa.g?zsa.g(this,b):zsa.call(null,this,b)};$APP.m.Ph=$APP.Cd;$APP.m.sa=function(){throw Error("-empty is not supported on FilteredDB");};
$APP.m.Dg=$APP.Cd;$APP.m.Pa=function(){throw Error("-contains-key? is not supported on FilteredDB");};$APP.m.ia=function(){throw Error("-assoc is not supported on FilteredDB");};$APP.m.yk=function(a,b,c){return $APP.Xg.g(this.Pj,YZ(this.Kj,b,c))};$APP.m.Ak=function(a,b,c){return $APP.Xg.g(this.Pj,fsa(this.Kj,b,c))};$APP.m.zk=function(a,b,c,d){return $APP.Xg.g(this.Pj,gsa(this.Kj,b,c,d))};$APP.m.vk=$APP.Cd;$APP.m.xk=function(){return h_(this.Kj)};$APP.m.wk=function(a,b){return i_(this.Kj,b)};
$APP.m.Jk=$APP.Cd;$APP.m.Bk=function(a,b){return $APP.Xg.g(this.Pj,WZ(this.Kj,b))};var H6=function H6(a){switch(arguments.length){case 0:return H6.s();case 1:return H6.h(arguments[0]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};H6.s=function(){return H6.h(null)};
H6.h=function(a){vsa(a);return msa($APP.Ai([m_,t_,C_,q_,$Z,r_,o_,w_,v_,u_],[a,536870912,$APP.fk.h(0),Bra(Xra),Bra(Yra),0,Bra(Wra),JY(),JY(),tsa($APP.tm.l($APP.I([new $APP.n(null,1,[Isa,new $APP.n(null,1,[E_,F_],null)],null),a])))]))};H6.o=1;var h0=function h0(a){switch(arguments.length){case 1:return h0.h(arguments[0]);case 2:return h0.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};h0.h=function(a){return h0.g(a,null)};
h0.g=function(a,b){var c=$APP.y($APP.nj.g(Gra,a));if(null!=c)throw $APP.Gm.g(["init-db expects list of Datoms, got ",$APP.bk.l($APP.I([$APP.Fb(c)]))].join(""),new $APP.n(null,1,[$APP.SF,fya],null));vsa(b);c=tsa($APP.tm.l($APP.I([new $APP.n(null,1,[Isa,new $APP.n(null,1,[E_,F_],null)],null),b])));var d=G_.h(c),e=Uqa(a)?a:Tqa(a);e.sort(asa);var f=Ara(Wra,e);e.sort(bsa);e=Ara(Xra,e);a=$APP.Xg.g(function(l){return $APP.Ze(d,l.a)},a);a=$APP.Yf(a);a.sort(csa);a=Ara(Yra,a);var g=wsa(f),k=$APP.Xz.B($APP.Dj.h(function(l){return l.nj(null)}),
$APP.ip,536870912,f);return msa($APP.Ai([m_,t_,C_,q_,$Z,r_,o_,w_,v_,u_],[b,k,$APP.fk.h(0),e,a,g,f,JY(),JY(),c]))};h0.o=2;$APP.m=B0.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "db-before":return this.ak;case "db-after":return this.$j;case "tx-data":return this.ck;case "tempids":return this.bk;case "tx-meta":return this.dk;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.db.TxReport{",", ","}",c,$APP.V.g(new $APP.M(null,5,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[G0,this.ak],null),new $APP.M(null,2,5,$APP.O,[H0,this.$j],null),new $APP.M(null,2,5,$APP.O,[I0,this.ck],null),new $APP.M(null,2,5,$APP.O,[J0,this.bk],null),new $APP.M(null,2,5,$APP.O,[O0,this.dk],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,5,new $APP.M(null,5,5,$APP.O,[G0,H0,I0,J0,O0],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new B0(this.ak,this.$j,this.ck,this.bk,this.dk,this.G,this.A,this.F)};$APP.m.fa=function(){return 5+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-2022644885^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.ak,b.ak)&&$APP.B.g(this.$j,b.$j)&&$APP.B.g(this.ck,b.ck)&&$APP.B.g(this.bk,b.bk)&&$APP.B.g(this.dk,b.dk)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,5,[J0,null,H0,null,G0,null,I0,null,O0,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new B0(this.ak,this.$j,this.ck,this.bk,this.dk,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "db-before":case "db-after":case "tx-data":case "tempids":case "tx-meta":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(G0,b):$APP.Gf.call(null,G0,b))?new B0(c,this.$j,this.ck,this.bk,this.dk,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(H0,b):$APP.Gf.call(null,H0,b))?new B0(this.ak,c,this.ck,this.bk,this.dk,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(I0,b):$APP.Gf.call(null,I0,b))?new B0(this.ak,this.$j,c,this.bk,this.dk,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(J0,b):$APP.Gf.call(null,J0,b))?new B0(this.ak,this.$j,this.ck,c,this.dk,this.G,this.A,
null):$APP.p($APP.Gf.g?$APP.Gf.g(O0,b):$APP.Gf.call(null,O0,b))?new B0(this.ak,this.$j,this.ck,this.bk,c,this.G,this.A,null):new B0(this.ak,this.$j,this.ck,this.bk,this.dk,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,5,5,$APP.O,[new $APP.$e(G0,this.ak,null),new $APP.$e(H0,this.$j,null),new $APP.$e(I0,this.ck,null),new $APP.$e(J0,this.bk,null),new $APP.$e(O0,this.dk,null)],null),this.A))};
$APP.m.aa=function(a,b){return new B0(this.ak,this.$j,this.ck,this.bk,this.dk,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};var uta=new $APP.Yi(null,new $APP.n(null,8,[tta,null,xta,null,ita,null,Dta,null,mta,null,Cta,null,wta,null,h1,null],null),null);$APP.m=Jta.prototype;$APP.m.entry_set=function(){return $APP.Yf($APP.Dj.g($APP.Yf,Ita(this)))};
$APP.m.forEach=function(){function a(d,e){for(var f=$APP.x(Ita(this)),g=null,k=0,l=0;;)if(l<k){var h=g.Y(null,l),r=$APP.E.j(h,0,null);h=$APP.E.j(h,1,null);d.call(e,h,r,this);l+=1}else if(f=$APP.x(f))$APP.Me(f)?(g=$APP.hd(f),f=$APP.id(f),r=g,k=$APP.le(g),g=r):(g=$APP.y(f),r=$APP.E.j(g,0,null),h=$APP.E.j(g,1,null),d.call(e,h,r,this),f=$APP.z(f),g=null,k=0),l=0;else return null}function b(d){for(var e=$APP.x(Ita(this)),f=null,g=0,k=0;;)if(k<g){var l=f.Y(null,k),h=$APP.E.j(l,0,null);l=$APP.E.j(l,1,null);
d.j?d.j(l,h,this):d.call(null,l,h,this);k+=1}else if(e=$APP.x(e))$APP.Me(e)?(f=$APP.hd(e),e=$APP.id(e),h=f,g=$APP.le(f),f=h):(f=$APP.y(e),h=$APP.E.j(f,0,null),l=$APP.E.j(f,1,null),d.j?d.j(l,h,this):d.call(null,l,h,this),e=$APP.z(e),f=null,g=0),k=0;else return null}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$APP.m.get=function(a){if($APP.B.g(a,":db/id"))return this.eid;if(Wsa(a))return Hta(Gta(this.db,this.eid,Xsa(a),null));var b=Lta?Lta(this,a):Mta.call(null,this,a);return X0(this.db,a)?Hta(b):b};$APP.m.key_set=function(){return $APP.Yf($APP.Qi(this))};$APP.m.entries=function(){return new $APP.Kh($APP.x(Ita(this)))};$APP.m.value_set=function(){return $APP.Yf($APP.Dj.g($APP.qe,Ita(this)))};$APP.m.toString=function(){return $APP.td(this)};$APP.m.keys=function(){return $APP.Sd($APP.Qi(this))};
$APP.m.values=function(){return $APP.Sd($APP.Dj.g($APP.qe,Ita(this)))};$APP.m.equiv=function(a){return Kta.g?Kta.g(this,a):Kta.call(null,this,a)};$APP.m.has=function(a){return null!=this.get(a)};$APP.m.ma=function(a,b){return l1?l1(this,b,null):Mta.call(null,this,b,null)};$APP.m.O=function(a,b,c){return l1?l1(this,b,c):Mta.call(null,this,b,c)};$APP.m.R=function(a,b,c){return $APP.Tc($APP.Vi.j($APP.v(this.cache),g1,this.eid),b,c)};$APP.m.fa=function(){k1.h?k1.h(this):k1.call(null,this);return $APP.le($APP.v(this.cache))};
$APP.m.X=function(){return $APP.Dd(this.eid)};$APP.m.N=function(a,b){return Kta.g?Kta.g(this,b):Kta.call(null,this,b)};$APP.m.Pa=function(a,b){return $APP.Ui.g(yxa,l1?l1(this,b,yxa):Mta.call(null,this,b,yxa))};$APP.m.ca=function(){k1.h?k1.h(this):k1.call(null,this);return $APP.x($APP.v(this.cache))};
$APP.m.call=function(a){switch(arguments.length-1){case 1:return this.h(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length-1)].join(""));}};$APP.m.apply=function(a,b){return this.call.apply(this,[this].concat($APP.Kb(b)))};$APP.m.h=function(a){return Lta?Lta(this,a):Mta.call(null,this,a)};$APP.m.g=function(a,b){return l1?l1(this,a,b):Mta.call(null,this,a,b)};$APP.Gba("datascript.impl.entity.Entity",Jta);var fza=function fza(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return fza.l(0<c.length?new $APP.Md(c.slice(0),0,null):null)};fza.l=function(a){var b=$APP.le(a);return $APP.Ui.g($APP.Qg.g(b/2,a),$APP.Lg.g(b/2,a))};fza.o=0;fza.P=function(a){return this.l($APP.x(a))};var gza=function gza(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return gza.l(arguments[0],arguments[1],2<c.length?new $APP.Md(c.slice(2),0,null):null)};
gza.l=function(a,b,c){return $APP.jf.j(function(d,e){d=$APP.y(WZ(a,new $APP.M(null,2,5,$APP.O,[b,e],null)));return null==d?null:$APP.$d(new $APP.M(null,2,5,$APP.O,[eZ.h(d),XY.h(d)],null))},null,c)};gza.o=2;gza.P=function(a){var b=$APP.y(a),c=$APP.z(a);a=$APP.y(c);c=$APP.z(c);return this.l(b,a,c)};var hza=function hza(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return hza.l(0<c.length?new $APP.Md(c.slice(0),0,null):null)};
hza.l=function(a){return $APP.jf.j(function(b,c){return $APP.p(c)?c:$APP.$d(c)},!0,a)};hza.o=0;hza.P=function(a){return this.l($APP.x(a))};var iza=function iza(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return iza.l(0<c.length?new $APP.Md(c.slice(0),0,null):null)};iza.l=function(a){return $APP.jf.j(function(b,c){return $APP.p(c)?$APP.$d(c):c},null,a)};iza.o=0;iza.P=function(a){return this.l($APP.x(a))};
var I6=function I6(a){switch(arguments.length){case 1:return I6.h(arguments[0]);case 2:return I6.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return I6.l(arguments[0],arguments[1],new $APP.Md(c.slice(2),0,null))}};I6.h=function(){return!0};I6.g=function(a,b){return 0>UZ(a,b)};I6.l=function(a,b,c){for(;;)if(I6.g(a,b))if($APP.z(c))a=b,b=$APP.y(c),c=$APP.z(c);else return I6.g(b,$APP.y(c));else return!1};
I6.P=function(a){var b=$APP.y(a),c=$APP.z(a);a=$APP.y(c);c=$APP.z(c);return this.l(b,a,c)};I6.o=2;var J6=function J6(a){switch(arguments.length){case 1:return J6.h(arguments[0]);case 2:return J6.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return J6.l(arguments[0],arguments[1],new $APP.Md(c.slice(2),0,null))}};J6.h=function(){return!0};J6.g=function(a,b){return 0<UZ(a,b)};
J6.l=function(a,b,c){for(;;)if(J6.g(a,b))if($APP.z(c))a=b,b=$APP.y(c),c=$APP.z(c);else return J6.g(b,$APP.y(c));else return!1};J6.P=function(a){var b=$APP.y(a),c=$APP.z(a);a=$APP.y(c);c=$APP.z(c);return this.l(b,a,c)};J6.o=2;
var K6=function K6(a){switch(arguments.length){case 1:return K6.h(arguments[0]);case 2:return K6.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return K6.l(arguments[0],arguments[1],new $APP.Md(c.slice(2),0,null))}};K6.h=function(){return!0};K6.g=function(a,b){return!(0<UZ(a,b))};K6.l=function(a,b,c){for(;;)if(K6.g(a,b))if($APP.z(c))a=b,b=$APP.y(c),c=$APP.z(c);else return K6.g(b,$APP.y(c));else return!1};
K6.P=function(a){var b=$APP.y(a),c=$APP.z(a);a=$APP.y(c);c=$APP.z(c);return this.l(b,a,c)};K6.o=2;var L6=function L6(a){switch(arguments.length){case 1:return L6.h(arguments[0]);case 2:return L6.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return L6.l(arguments[0],arguments[1],new $APP.Md(c.slice(2),0,null))}};L6.h=function(){return!0};L6.g=function(a,b){return!(0>UZ(a,b))};
L6.l=function(a,b,c){for(;;)if(L6.g(a,b))if($APP.z(c))a=b,b=$APP.y(c),c=$APP.z(c);else return L6.g(b,$APP.y(c));else return!1};L6.P=function(a){var b=$APP.y(a),c=$APP.z(a);a=$APP.y(c);c=$APP.z(c);return this.l(b,a,c)};L6.o=2;
var $ta=$APP.Ai([$APP.EK,$APP.hx,$APP.CD,bza,$APP.NI,$APP.LE,$APP.zI,$APP.LD,Yxa,$APP.ZB,yya,$APP.ZK,$APP.In,$APP.Zaa,$APP.zR,$APP.RJ,$APP.Faa,xwa,Nya,$APP.uH,$APP.uI,Sxa,$APP.AI,$APP.zM,$APP.SH,$APP.mJ,bya,hxa,$APP.QF,$APP.pM,$APP.HI,$APP.LB,$APP.jS,$APP.oS,$APP.hS,$APP.wE,$APP.QH,$APP.xL,aya,$APP.BE,$APP.JF,Axa,$APP.LG,$APP.JR,$APP.tI,$APP.dF,$APP.rK,$APP.OE,$APP.EE,$APP.xI,$APP.qaa,$APP.sM,$APP.TH,$APP.naa,$APP.dD,$APP.uG,$APP.UJ,$APP.IL,$APP.nE,cya,$APP.TI,$APP.JQ,Uya,$APP.uM,$APP.IK,$APP.MC,
$APP.tQ,$APP.NC,Kya,$APP.IM,$APP.lx,$APP.tM,$APP.RF,$APP.sG],[$APP.Kba,hza,$APP.cca,function(a,b,c,d){if(null==d)throw $APP.Gm.g("get-else: nil default value is not supported",new $APP.n(null,1,[$APP.SF,a5],null));a=$APP.y(WZ(a,new $APP.M(null,2,5,$APP.O,[b,c],null)));return null==a?d:XY.h(a)},L6,$APP.fB,J6,$APP.le,gza,$APP.zb,$APP.of,$APP.Yd,$APP.$z,$APP.tf,$APP.Oe,$APP.Bb,$APP.of,fza,$APP.Wt,$APP.eca,K6,$APP.Ol,$APP.B,$APP.eA,$APP.Yz,$APP.ej,function(a,b,c){return null==$APP.Xe.g(i1(a,b),c)},$APP.of,
$APP.ik,$APP.Eg,$APP.Il,$APP.tp,$APP.bf,$APP.Os,$APP.ip,$APP.Ee,$APP.Zz,$APP.bk,gxa,$APP.Be,$APP.Zba,$APP.Ui,$APP.dB,$APP.Xba,$APP.tj,$APP.Wt,$APP.Ui,$APP.Xe,$APP.t,I6,$APP.Hf,$APP.Ej,$APP.bx,$APP.Iba,$APP.Yba,$APP.pB,$APP.qj,$APP.P,$APP.Ze,$APP.ica,$APP.sj,$APP.sf,$APP.Pl,$APP.Yu,$APP.uf,$APP.Cg,$APP.Fb,$APP.$ba,$APP.Nl,$APP.ig,iza,$APP.yb,$APP.cj,$APP.rj]),jza=function jza(a){switch(arguments.length){case 1:return jza.h(arguments[0]);case 2:return jza.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",
$APP.t.h(arguments.length)].join(""));}};jza.h=function(a){return $APP.jf.j(function(b,c){return 0>$APP.bf(c,b)?c:b},$APP.y(a),$APP.z(a))};jza.g=function(a,b){return $APP.rh($APP.jf.j(function(c,d){return $APP.le(c)<a?$APP.vl.g($APP.bf,$APP.Af.g(c,d)):0>$APP.bf(d,$APP.ue(c))?$APP.vl.g($APP.bf,$APP.Af.g($APP.dj(c),d)):c},$APP.qh,b))};jza.o=2;
var kza=function kza(a){switch(arguments.length){case 1:return kza.h(arguments[0]);case 2:return kza.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};kza.h=function(a){return $APP.jf.j(function(b,c){return 0<$APP.bf(c,b)?c:b},$APP.y(a),$APP.z(a))};kza.g=function(a,b){return $APP.rh($APP.jf.j(function(c,d){return $APP.le(c)<a?$APP.vl.g($APP.bf,$APP.Af.g(c,d)):0<$APP.bf(d,$APP.y(c))?$APP.vl.g($APP.bf,$APP.Af.g($APP.z(c),d)):c},$APP.qh,b))};
kza.o=2;var lza=function lza(a){switch(arguments.length){case 1:return lza.h(arguments[0]);case 2:return lza.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};lza.h=function(a){return $APP.gca(a)};lza.g=function(a,b){return $APP.rh($APP.rt.g(a,function(){return $APP.gca(b)}))};lza.o=2;
var mza=$APP.Ai([Exa,$APP.LD,Tya,wxa,$APP.zM,$APP.hS,tya,$APP.eK,Zxa,pxa,$APP.uG,Dya],[Rta,$APP.le,function(a){var b=$APP.vl.h(a);a=$APP.le(a);var c=a>>1,d=$APP.E.g(b,c);return $APP.Cg(a)?(d+$APP.E.g(b,c-1))/2:d},Pta,jza,kza,function(a){return $APP.le($APP.UA.h(a))},$APP.cj,Qta,function(a){return Math.sqrt(Rta(a))},lza,function(a,b){return $APP.rh($APP.Qg.g(a,$APP.Wba(b)))}]);$APP.m=n1.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "as":return this.as;case "default":return this.Lj;case "limit":return this.rj;case "name":return this.name;case "pattern":return this.pattern;case "recursion-limit":return this.zj;case "recursive?":return this.Aj;case "reverse?":return this.Dj;case "xform":return this.gf;case "multival?":return this.yj;case "ref?":return this.Bj;case "component?":return this.xj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-parser.PullAttr{",", ","}",c,$APP.V.g(new $APP.M(null,12,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Er,this.as],null),new $APP.M(null,2,5,$APP.O,[$APP.Zn,this.Lj],null),new $APP.M(null,2,5,$APP.O,[o1,this.rj],null),new $APP.M(null,2,5,$APP.O,[$APP.S,this.name],null),new $APP.M(null,2,5,$APP.O,[p1,this.pattern],null),new $APP.M(null,2,5,$APP.O,[q1,this.zj],null),new $APP.M(null,2,5,$APP.O,
[r1,this.Aj],null),new $APP.M(null,2,5,$APP.O,[t1,this.Dj],null),new $APP.M(null,2,5,$APP.O,[y1,this.gf],null),new $APP.M(null,2,5,$APP.O,[z1,this.yj],null),new $APP.M(null,2,5,$APP.O,[A1,this.Bj],null),new $APP.M(null,2,5,$APP.O,[B1,this.xj],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,12,new $APP.M(null,12,5,$APP.O,[$APP.Er,$APP.Zn,o1,$APP.S,p1,q1,r1,t1,y1,z1,A1,B1],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,this.F)};$APP.m.fa=function(){return 12+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1743810262^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.as,b.as)&&$APP.B.g(this.default,b.default)&&$APP.B.g(this.rj,b.rj)&&$APP.B.g(this.name,b.name)&&$APP.B.g(this.pattern,b.pattern)&&$APP.B.g(this.zj,b.zj)&&$APP.B.g(this.Aj,b.Aj)&&$APP.B.g(this.Dj,b.Dj)&&$APP.B.g(this.gf,b.gf)&&$APP.B.g(this.yj,b.yj)&&$APP.B.g(this.Bj,b.Bj)&&$APP.B.g(this.xj,b.xj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,12,[y1,null,o1,null,t1,null,q1,null,$APP.Zn,null,$APP.S,null,$APP.Er,null,r1,null,B1,null,A1,null,z1,null,p1,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "as":case "default":case "limit":case "name":case "pattern":case "recursion-limit":case "recursive?":case "reverse?":case "xform":case "multival?":case "ref?":case "component?":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Er,b):$APP.Gf.call(null,$APP.Er,b))?new n1(c,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.Zn,b):$APP.Gf.call(null,$APP.Zn,b))?new n1(this.as,c,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(o1,b):$APP.Gf.call(null,o1,b))?new n1(this.as,this.Lj,c,this.name,
this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.S,b):$APP.Gf.call(null,$APP.S,b))?new n1(this.as,this.Lj,this.rj,c,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(p1,b):$APP.Gf.call(null,p1,b))?new n1(this.as,this.Lj,this.rj,this.name,c,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(q1,b):$APP.Gf.call(null,
q1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,c,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(r1,b):$APP.Gf.call(null,r1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,c,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(t1,b):$APP.Gf.call(null,t1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,c,this.gf,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?
$APP.Gf.g(y1,b):$APP.Gf.call(null,y1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,c,this.yj,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(z1,b):$APP.Gf.call(null,z1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,c,this.Bj,this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(A1,b):$APP.Gf.call(null,A1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,c,
this.xj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(B1,b):$APP.Gf.call(null,B1,b))?new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,c,this.G,this.A,null):new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,12,5,$APP.O,[new $APP.$e($APP.Er,this.as,null),new $APP.$e($APP.Zn,this.Lj,null),new $APP.$e(o1,this.rj,null),new $APP.$e($APP.S,this.name,null),new $APP.$e(p1,this.pattern,null),new $APP.$e(q1,this.zj,null),new $APP.$e(r1,this.Aj,null),new $APP.$e(t1,this.Dj,null),new $APP.$e(y1,this.gf,null),new $APP.$e(z1,this.yj,null),new $APP.$e(A1,this.Bj,null),new $APP.$e(B1,this.xj,null)],null),this.A))};
$APP.m.aa=function(a,b){return new n1(this.as,this.Lj,this.rj,this.name,this.pattern,this.zj,this.Aj,this.Dj,this.gf,this.yj,this.Bj,this.xj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m=C1.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "attrs":return this.ij;case "first-attr":return this.Rj;case "last-attr":return this.Yj;case "reverse-attrs":return this.Qj;case "wildcard?":return this.Fj;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-parser.PullPattern{",", ","}",c,$APP.V.g(new $APP.M(null,5,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[D1,this.ij],null),new $APP.M(null,2,5,$APP.O,[F1,this.Rj],null),new $APP.M(null,2,5,$APP.O,[G1,this.Yj],null),new $APP.M(null,2,5,$APP.O,[I1,this.Qj],null),new $APP.M(null,2,5,$APP.O,[J1,this.Fj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,5,new $APP.M(null,5,5,$APP.O,[D1,F1,G1,I1,J1],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new C1(this.ij,this.Rj,this.Yj,this.Qj,this.Fj,this.G,this.A,this.F)};$APP.m.fa=function(){return 5+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-795554044^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.ij,b.ij)&&$APP.B.g(this.Rj,b.Rj)&&$APP.B.g(this.Yj,b.Yj)&&$APP.B.g(this.Qj,b.Qj)&&$APP.B.g(this.Fj,b.Fj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,5,[I1,null,F1,null,D1,null,J1,null,G1,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new C1(this.ij,this.Rj,this.Yj,this.Qj,this.Fj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "attrs":case "first-attr":case "last-attr":case "reverse-attrs":case "wildcard?":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(D1,b):$APP.Gf.call(null,D1,b))?new C1(c,this.Rj,this.Yj,this.Qj,this.Fj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(F1,b):$APP.Gf.call(null,F1,b))?new C1(this.ij,c,this.Yj,this.Qj,this.Fj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(G1,b):$APP.Gf.call(null,G1,b))?new C1(this.ij,this.Rj,c,this.Qj,this.Fj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(I1,b):$APP.Gf.call(null,I1,b))?new C1(this.ij,this.Rj,this.Yj,c,this.Fj,this.G,this.A,
null):$APP.p($APP.Gf.g?$APP.Gf.g(J1,b):$APP.Gf.call(null,J1,b))?new C1(this.ij,this.Rj,this.Yj,this.Qj,c,this.G,this.A,null):new C1(this.ij,this.Rj,this.Yj,this.Qj,this.Fj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,5,5,$APP.O,[new $APP.$e(D1,this.ij,null),new $APP.$e(F1,this.Rj,null),new $APP.$e(G1,this.Yj,null),new $APP.$e(I1,this.Qj,null),new $APP.$e(J1,this.Fj,null)],null),this.A))};
$APP.m.aa=function(a,b){return new C1(this.ij,this.Rj,this.Yj,this.Qj,this.Fj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};var eua=Sta(new $APP.n(null,3,[$APP.S,g1,$APP.Er,g1,y1,$APP.of],null)),Wta=Tta(new $APP.n(null,1,[D1,new $APP.J(null,eua,null,1,null)],null)),Xta=$APP.Vi.j(Wta,J1,!0);$APP.m=$1.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "db":return this.db;case "visitor":return this.ik;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-api.Context{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.UC,this.db],null),new $APP.M(null,2,5,$APP.O,[qua,this.ik],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.UC,qua],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new $1(this.db,this.ik,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1727735959^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.db,b.db)&&$APP.B.g(this.ik,b.ik)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.UC,null,qua,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new $1(this.db,this.ik,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "db":case "visitor":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.UC,b):$APP.Gf.call(null,$APP.UC,b))?new $1(c,this.ik,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(qua,b):$APP.Gf.call(null,qua,b))?new $1(this.db,c,this.G,this.A,null):new $1(this.db,this.ik,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.UC,this.db,null),new $APP.$e(qua,this.ik,null)],null),this.A))};
$APP.m.aa=function(a,b){return new $1(this.db,this.ik,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m=a2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "value":return this.value;case "datoms":return this.jj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-api.ResultFrame{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.hJ,this.value],null),new $APP.M(null,2,5,$APP.O,[g0,this.jj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.hJ,g0],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new a2(this.value,this.jj,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=836381841^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.value,b.value)&&$APP.B.g(this.jj,b.jj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.hJ,null,g0,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new a2(this.value,this.jj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "value":case "datoms":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.hJ,b):$APP.Gf.call(null,$APP.hJ,b))?new a2(c,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(g0,b):$APP.Gf.call(null,g0,b))?new a2(this.value,c,this.G,this.A,null):new a2(this.value,this.jj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.hJ,this.value,null),new $APP.$e(g0,this.jj,null)],null),this.A))};$APP.m.aa=function(a,b){return new a2(this.value,this.jj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m=b2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "acc":return this.tb;case "attr":return this.ab;case "datoms":return this.jj;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-api.MultivalAttrFrame{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[T5,this.tb],null),new $APP.M(null,2,5,$APP.O,[U5,this.ab],null),new $APP.M(null,2,5,$APP.O,[g0,this.jj],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[T5,U5,g0],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new b2(this.tb,this.ab,this.jj,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1829867699^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.tb,b.tb)&&$APP.B.g(this.ab,b.ab)&&$APP.B.g(this.jj,b.jj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[T5,null,g0,null,U5,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new b2(this.tb,this.ab,this.jj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "acc":case "attr":case "datoms":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(T5,b):$APP.Gf.call(null,T5,b))?new b2(c,this.ab,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(U5,b):$APP.Gf.call(null,U5,b))?new b2(this.tb,c,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(g0,b):$APP.Gf.call(null,g0,b))?new b2(this.tb,this.ab,c,this.G,this.A,null):new b2(this.tb,this.ab,this.jj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e(T5,this.tb,null),new $APP.$e(U5,this.ab,null),new $APP.$e(g0,this.jj,null)],null),this.A))};$APP.m.aa=function(a,b){return new b2(this.tb,this.ab,this.jj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};
$APP.m.mk=function(){for(var a=this,b=a.tb,c=a.jj;;){var d=Y1(c);if(null==d||$APP.Ui.g(d.a,a.ab.name))return new $APP.M(null,1,5,$APP.O,[new a2(function(){var g=$APP.ig($APP.Zc(b)),k=a.ab.gf;return k.h?k.h(g):k.call(null,g)}(),function(){var g=c;return $APP.p(g)?g:$APP.Pd}(),null,null,null)],null);if($APP.p(function(){var g=a.ab.rj;return $APP.p(g)?$APP.le(b)>=a.ab.rj:g}()))for(var e=c;;){d=Y1(e);if(null==d||$APP.Ui.g(d.a,a.ab.name))return new $APP.M(null,1,5,$APP.O,[new a2($APP.Zc(b),function(){var g=
e;return $APP.p(g)?g:$APP.Pd}(),null,null,null)],null);e=Z1(e)}else{d=$APP.kh.g(b,d.v);var f=Z1(c);b=d;c=f}}};$APP.m=c2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "seen":return this.lg;case "recursion-limits":return this.kj;case "acc":return this.tb;case "pattern":return this.pattern;case "attr":return this.ab;case "datoms":return this.jj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-api.MultivalRefAttrFrame{",", ","}",c,$APP.V.g(new $APP.M(null,6,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[c6,this.lg],null),new $APP.M(null,2,5,$APP.O,[D6,this.kj],null),new $APP.M(null,2,5,$APP.O,[T5,this.tb],null),new $APP.M(null,2,5,$APP.O,[p1,this.pattern],null),new $APP.M(null,2,5,$APP.O,[U5,this.ab],null),new $APP.M(null,2,5,$APP.O,[g0,this.jj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,6,new $APP.M(null,6,5,$APP.O,[c6,D6,T5,p1,U5,g0],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new c2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.jj,this.G,this.A,this.F)};$APP.m.fa=function(){return 6+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1769511936^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.lg,b.lg)&&$APP.B.g(this.kj,b.kj)&&$APP.B.g(this.tb,b.tb)&&$APP.B.g(this.pattern,b.pattern)&&$APP.B.g(this.ab,b.ab)&&$APP.B.g(this.jj,b.jj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,6,[T5,null,c6,null,D6,null,g0,null,p1,null,U5,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new c2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.jj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "datoms":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(c6,b):$APP.Gf.call(null,c6,b))?new c2(c,this.kj,this.tb,this.pattern,this.ab,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(D6,b):$APP.Gf.call(null,D6,b))?new c2(this.lg,c,this.tb,this.pattern,this.ab,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(T5,b):$APP.Gf.call(null,T5,b))?new c2(this.lg,this.kj,c,this.pattern,this.ab,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(p1,b):$APP.Gf.call(null,p1,b))?new c2(this.lg,
this.kj,this.tb,c,this.ab,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(U5,b):$APP.Gf.call(null,U5,b))?new c2(this.lg,this.kj,this.tb,this.pattern,c,this.jj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(g0,b):$APP.Gf.call(null,g0,b))?new c2(this.lg,this.kj,this.tb,this.pattern,this.ab,c,this.G,this.A,null):new c2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.jj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,6,5,$APP.O,[new $APP.$e(c6,this.lg,null),new $APP.$e(D6,this.kj,null),new $APP.$e(T5,this.tb,null),new $APP.$e(p1,this.pattern,null),new $APP.$e(U5,this.ab,null),new $APP.$e(g0,this.jj,null)],null),this.A))};$APP.m.aa=function(a,b){return new c2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.jj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};
$APP.m.tk=function(a,b){a=this.lg;var c=this.kj,d=this.tb;b=b.value;b=null==b?d:$APP.kh.g(d,b);return new c2(a,c,b,this.pattern,this.ab,Z1(this.jj),null,null,null)};
$APP.m.mk=function(a,b){var c=this;a=Y1(c.jj);if(null==a||$APP.Ui.g(a.a,c.ab.name))return new $APP.M(null,1,5,$APP.O,[new a2(function(){var e=$APP.ig($APP.Zc(c.tb)),f=c.ab.gf;return f.h?f.h(e):f.call(null,e)}(),function(){var e=c.jj;return $APP.p(e)?e:$APP.Pd}(),null,null,null)],null);if($APP.p(function(){var e=c.ab.rj;return $APP.p(e)?$APP.le(c.tb)>=c.ab.rj:e}()))for(var d=c.jj;;){b=Y1(d);if(null==b||$APP.Ui.g(b.a,c.ab.name))return new $APP.M(null,1,5,$APP.O,[new a2($APP.Zc(c.tb),function(){var e=
d;return $APP.p(e)?e:$APP.Pd}(),null,null,null)],null);d=Z1(d)}else return a=$APP.p(c.ab.Dj)?a.e:a.v,new $APP.M(null,2,5,$APP.O,[this,f2.ja?f2.ja(b,c.lg,c.kj,c.pattern,c.ab,a):f2.call(null,b,c.lg,c.kj,c.pattern,c.ab,a)],null)};$APP.m=d2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "seen":return this.lg;case "recursion-limits":return this.kj;case "acc":return this.tb;case "pattern":return this.pattern;case "attr":return this.ab;case "attrs":return this.ij;case "datoms":return this.jj;case "id":return this.id;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-api.AttrsFrame{",", ","}",c,$APP.V.g(new $APP.M(null,8,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[c6,this.lg],null),new $APP.M(null,2,5,$APP.O,[D6,this.kj],null),new $APP.M(null,2,5,$APP.O,[T5,this.tb],null),new $APP.M(null,2,5,$APP.O,[p1,this.pattern],null),new $APP.M(null,2,5,$APP.O,[U5,this.ab],null),new $APP.M(null,2,5,$APP.O,[D1,this.ij],null),new $APP.M(null,2,5,$APP.O,[g0,this.jj],null),
new $APP.M(null,2,5,$APP.O,[$APP.Or,this.id],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,8,new $APP.M(null,8,5,$APP.O,[c6,D6,T5,p1,U5,D1,g0,$APP.Or],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new d2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.jj,this.id,this.G,this.A,this.F)};$APP.m.fa=function(){return 8+$APP.le(this.A)};
$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1127179791^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.lg,b.lg)&&$APP.B.g(this.kj,b.kj)&&$APP.B.g(this.tb,b.tb)&&$APP.B.g(this.pattern,b.pattern)&&$APP.B.g(this.ab,b.ab)&&$APP.B.g(this.ij,b.ij)&&$APP.B.g(this.jj,b.jj)&&$APP.B.g(this.id,b.id)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,8,[T5,null,c6,null,$APP.Or,null,D6,null,D1,null,g0,null,p1,null,U5,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new d2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.jj,this.id,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "datoms":case "id":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(c6,b):$APP.Gf.call(null,c6,b))?new d2(c,this.kj,this.tb,this.pattern,this.ab,this.ij,this.jj,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(D6,b):$APP.Gf.call(null,D6,b))?new d2(this.lg,c,this.tb,this.pattern,this.ab,this.ij,this.jj,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(T5,b):$APP.Gf.call(null,T5,b))?new d2(this.lg,this.kj,c,this.pattern,this.ab,this.ij,this.jj,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(p1,
b):$APP.Gf.call(null,p1,b))?new d2(this.lg,this.kj,this.tb,c,this.ab,this.ij,this.jj,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(U5,b):$APP.Gf.call(null,U5,b))?new d2(this.lg,this.kj,this.tb,this.pattern,c,this.ij,this.jj,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(D1,b):$APP.Gf.call(null,D1,b))?new d2(this.lg,this.kj,this.tb,this.pattern,this.ab,c,this.jj,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(g0,b):$APP.Gf.call(null,g0,b))?new d2(this.lg,this.kj,this.tb,this.pattern,
this.ab,this.ij,c,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.Or,b):$APP.Gf.call(null,$APP.Or,b))?new d2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.jj,c,this.G,this.A,null):new d2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.jj,this.id,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,8,5,$APP.O,[new $APP.$e(c6,this.lg,null),new $APP.$e(D6,this.kj,null),new $APP.$e(T5,this.tb,null),new $APP.$e(p1,this.pattern,null),new $APP.$e(U5,this.ab,null),new $APP.$e(D1,this.ij,null),new $APP.$e(g0,this.jj,null),new $APP.$e($APP.Or,this.id,null)],null),this.A))};$APP.m.aa=function(a,b){return new d2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.jj,this.id,b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.tk=function(a,b){a=this.lg;var c=this.kj;var d=this.tb;var e=b.value;d=null==e?d:$APP.Yh.j(d,this.ab.as,e);e=this.pattern;var f=Y1(this.ij),g=Z1(this.ij);b=b.jj;b=$APP.p(b)?b:Z1(this.jj);return new d2(a,c,d,e,f,g,$APP.ig(b),this.id,null,null,null)};
$APP.m.mk=function(a,b){var c=this,d=c.tb,e=c.ab;a=c.ij;for(var f=c.jj;;){if(null==f&&null==e)return new $APP.M(null,1,5,$APP.O,[function(){var u=c.lg,C=c.kj,F=d,N=c.pattern,Q=Y1(c.pattern.Qj),T=Z1(c.pattern.Qj),X=c.id;return mua.Ha?mua.Ha(u,C,F,N,Q,T,X):mua.call(null,u,C,F,N,Q,T,X)}()],null);if(null!=e&&$APP.B.g(g1,e.name)){var g=$APP.Yh.j(d,e.as,function(){var u=e.gf;return u.h?u.h(c.id):u.call(null,c.id)}()),k=Y1(a);a=Z1(a);d=g;e=k}else{var l=Y1(f),h=$APP.p(function(){var u=l;return $APP.p(u)?
e:u}())?$APP.bf(e.name,l.a):null,r=function(){var u=null==e;if(u)return u;u=h;return $APP.p(u)?0<h:u}(),q=function(){var u=null==l;if(u)return u;u=h;return $APP.p(u)?0>h:u}();if($APP.p(function(){var u=c.pattern.Fj;return $APP.p(u)?(u=null!=l)?r:u:u}()))k=Rqa(nsa(b.db).Hj,l.a,function(u,C,F,N,Q){return function(){return Yta(b.db,Q.a)}}(d,e,a,f,l,h,r,q,this)),g=d,a=$APP.p(e)?iua(a,e):null,d=g,e=k;else if($APP.p(r))g=d,k=e,f=Z1(f),d=g,e=k;else if(jua(b,Ixa,c.id,e.name,null),$APP.p(function(){var u=
q;return $APP.p(u)?null==e:u}()))g=d,k=Y1(a),a=Z1(a),d=g,e=k;else if($APP.p(function(){var u=q;return $APP.p(u)?null!=$APP.Zn.h(e):u}()))g=$APP.Yh.j(d,e.as,$APP.Zn.h(e)),k=Y1(a),a=Z1(a),d=g,e=k;else if($APP.p(q))g=function(){var u=e.gf;return u.h?u.h(null):u.call(null,null)}(),null==g?(g=d,k=Y1(a),a=Z1(a),d=g,e=k):(g=$APP.Yh.j(d,e.as,g),k=Y1(a),a=Z1(a),d=g,e=k);else{if($APP.p(function(){var u=e.yj;return $APP.p(u)?e.Bj:u}()))return new $APP.M(null,2,5,$APP.O,[new d2(c.lg,c.kj,d,c.pattern,e,a,f,c.id,
null,null,null),new c2(c.lg,c.kj,$APP.Xc($APP.qh),c.pattern,e,f,null,null,null)],null);if($APP.p(e.yj))return new $APP.M(null,2,5,$APP.O,[new d2(c.lg,c.kj,d,c.pattern,e,a,f,c.id,null,null,null),new b2($APP.Xc($APP.qh),e,f,null,null,null)],null);if($APP.p(e.Bj))return new $APP.M(null,2,5,$APP.O,[new d2(c.lg,c.kj,d,c.pattern,e,a,f,c.id,null,null,null),function(){var u=c.lg,C=c.kj,F=c.pattern,N=e,Q=l.v;return f2.ja?f2.ja(b,u,C,F,N,Q):f2.call(null,b,u,C,F,N,Q)}()],null);g=$APP.Yh.j(d,e.as,function(){var u=
l.v,C=e.gf;return C.h?C.h(u):C.call(null,u)}());k=Y1(a);a=Z1(a);f=Z1(f);d=g;e=k}}}};$APP.m=e2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "seen":return this.lg;case "recursion-limits":return this.kj;case "acc":return this.tb;case "pattern":return this.pattern;case "attr":return this.ab;case "attrs":return this.ij;case "id":return this.id;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.pull-api.ReverseAttrsFrame{",", ","}",c,$APP.V.g(new $APP.M(null,7,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[c6,this.lg],null),new $APP.M(null,2,5,$APP.O,[D6,this.kj],null),new $APP.M(null,2,5,$APP.O,[T5,this.tb],null),new $APP.M(null,2,5,$APP.O,[p1,this.pattern],null),new $APP.M(null,2,5,$APP.O,[U5,this.ab],null),new $APP.M(null,2,5,$APP.O,[D1,this.ij],null),new $APP.M(null,2,5,$APP.O,[$APP.Or,
this.id],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,7,new $APP.M(null,7,5,$APP.O,[c6,D6,T5,p1,U5,D1,$APP.Or],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new e2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.id,this.G,this.A,this.F)};$APP.m.fa=function(){return 7+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=470210558^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.lg,b.lg)&&$APP.B.g(this.kj,b.kj)&&$APP.B.g(this.tb,b.tb)&&$APP.B.g(this.pattern,b.pattern)&&$APP.B.g(this.ab,b.ab)&&$APP.B.g(this.ij,b.ij)&&$APP.B.g(this.id,b.id)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,7,[T5,null,c6,null,$APP.Or,null,D6,null,D1,null,p1,null,U5,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new e2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.id,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "id":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(c6,b):$APP.Gf.call(null,c6,b))?new e2(c,this.kj,this.tb,this.pattern,this.ab,this.ij,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(D6,b):$APP.Gf.call(null,D6,b))?new e2(this.lg,c,this.tb,this.pattern,this.ab,this.ij,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(T5,b):$APP.Gf.call(null,T5,b))?new e2(this.lg,this.kj,c,this.pattern,this.ab,this.ij,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(p1,b):$APP.Gf.call(null,
p1,b))?new e2(this.lg,this.kj,this.tb,c,this.ab,this.ij,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(U5,b):$APP.Gf.call(null,U5,b))?new e2(this.lg,this.kj,this.tb,this.pattern,c,this.ij,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(D1,b):$APP.Gf.call(null,D1,b))?new e2(this.lg,this.kj,this.tb,this.pattern,this.ab,c,this.id,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.Or,b):$APP.Gf.call(null,$APP.Or,b))?new e2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,c,this.G,
this.A,null):new e2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.id,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,7,5,$APP.O,[new $APP.$e(c6,this.lg,null),new $APP.$e(D6,this.kj,null),new $APP.$e(T5,this.tb,null),new $APP.$e(p1,this.pattern,null),new $APP.$e(U5,this.ab,null),new $APP.$e(D1,this.ij,null),new $APP.$e($APP.Or,this.id,null)],null),this.A))};
$APP.m.aa=function(a,b){return new e2(this.lg,this.kj,this.tb,this.pattern,this.ab,this.ij,this.id,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.tk=function(a,b){a=this.lg;var c=this.kj,d=this.tb;b=b.value;b=null==b?d:$APP.Yh.j(d,this.ab.as,b);return new e2(a,c,b,this.pattern,Y1(this.ij),Z1(this.ij),this.id,null,null,null)};
$APP.m.mk=function(a,b){var c=this.tb;a=this.ab;for(var d=this.ij;;){if(null==a)return new $APP.M(null,1,5,$APP.O,[new a2($APP.ig($APP.Zc(c)),null,null,null,null)],null);var e=a.name,f=b.db;f=f instanceof l_?TY(f.Cj,gZ.B(0,e,this.id,536870912),gZ.B(2147483647,e,this.id,2147483647)):WZ(f,new $APP.M(null,3,5,$APP.O,[null,e,this.id],null));jua(b,Wxa,null,e,this.id);if($APP.Ee(f)&&null!=$APP.Zn.h(a))c=$APP.Yh.j(c,a.as,$APP.Zn.h(a)),a=Y1(d),d=e=Z1(d);else if($APP.Ee(f))a=Y1(d),d=e=Z1(d);else{if($APP.p(a.xj)){e=
$APP.O;c=new e2(this.lg,this.kj,c,this.pattern,a,d,this.id,null,null,null);d=this.lg;var g=this.kj,k=this.pattern;f=Y1(f).e;b=f2.ja?f2.ja(b,d,g,k,a,f):f2.call(null,b,d,g,k,a,f);b=new $APP.M(null,2,5,e,[c,b],null)}else b=new $APP.M(null,2,5,$APP.O,[new e2(this.lg,this.kj,c,this.pattern,a,d,this.id,null,null,null),new c2(this.lg,this.kj,$APP.Xc($APP.qh),this.pattern,a,f,null,null,null)],null);return b}}};
var M6=function M6(a){switch(arguments.length){case 3:return M6.j(arguments[0],arguments[1],arguments[2]);case 4:return M6.B(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};M6.j=function(a,b,c){return M6.B(a,b,c,$APP.gg)};M6.B=function(a,b,c,d){a=rua(a,b,d);return pua(a,c)};M6.o=4;
var N6=function N6(a){switch(arguments.length){case 3:return N6.j(arguments[0],arguments[1],arguments[2]);case 4:return N6.B(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};N6.j=function(a,b,c){return N6.B(a,b,c,$APP.gg)};N6.B=function(a,b,c,d){var e=rua(a,b,d);return $APP.ep.g(function(f){return pua(e,f)},c)};N6.o=4;var O6=function O6(a){switch(arguments.length){case 1:return O6.h(arguments[0]);case 2:return O6.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};O6.h=function(a){return Aua(a,$APP.gg)};O6.g=function(a,b){return Aua(a,b)};O6.o=2;var R6=function R6(a){switch(arguments.length){case 1:return R6.h(arguments[0]);case 2:return R6.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};
R6.h=function(a){return R6.g(a,$APP.gg)};
R6.g=function(a,b){b=$APP.hg(b);var c=$APP.Xe.j(b,rya,$APP.XT);b=$APP.Xe.j(b,Hya,xua);var d=g2(a,"tx0"),e=function(){var h=g2(a,"schema");return c.h?c.h(h):c.call(null,h)}();(function(){var h=new $APP.Kd(function(){return vsa},zxa,$APP.Ai([$APP.Mx,$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[!0,F6,Lya,"datascript/db.cljc",23,1,726,726,$APP.P(new $APP.M(null,1,5,$APP.O,[i6],null)),null,$APP.p(vsa)?vsa.S:null]));return h.h?h.h(e):h.call(null,e)})();var f=$APP.ep.g(b,
g2(a,"attrs")),g=$APP.ep.g(b,g2(a,"keywords")),k=tua(function(h){var r=sua(h,0),q=$APP.E.g(f,sua(h,1)),u=sua(h,2);if("number"===typeof u)var C=u;else if("string"===typeof u)C=u;else if($APP.Pe(u))C=u;else if($APP.Ab(u)||$APP.Le(u))C=function(){var F=sua(u,0);if($APP.p($APP.Il.g?$APP.Il.g(0,F):$APP.Il.call(null,0,F)))return $APP.E.g(g,sua(u,1));if($APP.p($APP.Il.g?$APP.Il.g(1,F):$APP.Il.call(null,1,F)))return F=sua(u,1),c.h?c.h(F):c.call(null,F);if($APP.p($APP.Il.g?$APP.Il.g(2,F):$APP.Il.call(null,
2,F)))return Infinity;if($APP.p($APP.Il.g?$APP.Il.g(3,F):$APP.Il.call(null,3,F)))return-Infinity;if($APP.p($APP.Il.g?$APP.Il.g(4,F):$APP.Il.call(null,4,F)))return NaN;throw $APP.Gm.g(["Unexpected value marker ",$APP.bk.l($APP.I([F]))," in ",$APP.bk.l($APP.I([$APP.bk.l($APP.I([u]))]))].join(""),new $APP.n(null,2,[$APP.SF,Fya,$APP.hJ,u],null));}();else throw $APP.Gm.g(["Unexpected value type ",$APP.bk.l($APP.I([$APP.Fb(u)]))," (",$APP.bk.l($APP.I([$APP.bk.l($APP.I([u]))])),")"].join(""),new $APP.n(null,
2,[$APP.SF,Fya,$APP.hJ,u],null));h=d+sua(h,3);return gZ.B(r,q,C,h)},g2(a,"eavt"));b=function(){var h=g2(a,"aevt");return null==h?null:tua(function(r){return k[r]},h)}();var l=function(){var h=g2(a,"avet");return null==h?null:tua(function(r){return k[r]},h)}();return msa($APP.Ai([m_,t_,C_,q_,$Z,r_,o_,w_,v_,u_],[e,g2(a,"max-tx"),$APP.fk.h(0),Ara(Xra,b),Ara(Yra,l),g2(a,"max-eid"),Ara(Wra,k),JY(),JY(),function(){var h=$APP.tm.l($APP.I([new $APP.n(null,1,[Isa,new $APP.n(null,1,[E_,F_],null)],null),e])),
r=new $APP.Kd(function(){return tsa},aza,$APP.Ai([$APP.Mx,$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[!0,F6,hya,"datascript/db.cljc",15,1,694,694,$APP.P(new $APP.M(null,1,5,$APP.O,[i6],null)),":db/unique           \x3d\x3e #{attr ...}\n   :db.unique/identity  \x3d\x3e #{attr ...}\n   :db.unique/value     \x3d\x3e #{attr ...}\n   :db/index            \x3d\x3e #{attr ...}\n   :db.cardinality/many \x3d\x3e #{attr ...}\n   :db.type/ref         \x3d\x3e #{attr ...}\n   :db/isComponent      \x3d\x3e #{attr ...}\n   :db.type/tuple       \x3d\x3e #{attr ...}\n   :db/attrTuples       \x3d\x3e {attr \x3d\x3e {tuple-attr \x3d\x3e idx}}",
$APP.p(tsa)?tsa.S:null]));return r.h?r.h(h):r.call(null,h)}()]))};R6.o=2;$APP.m=Iua.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){return $APP.Xe.j(this.A,b,c)};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Placeholder{",", ","}",c,$APP.V.g($APP.qh,this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,0,$APP.qh,$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new Iua(this.G,this.A,this.F)};$APP.m.fa=function(){return 0+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-528488587^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze($APP.Zi,b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new Iua(this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){return $APP.Ze(this.A,b)};$APP.m.ia=function(a,b,c){return new Iua(this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g($APP.qh,this.A))};$APP.m.aa=function(a,b){return new Iua(b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return c};$APP.m.qj=function(a,b){return b};$APP.m=k2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "symbol":return this.mj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Variable{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Hn,this.mj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[$APP.Hn],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new k2(this.mj,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=736891289^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.mj,b.mj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[$APP.Hn,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new k2(this.mj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "symbol":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Hn,b):$APP.Gf.call(null,$APP.Hn,b))?new k2(c,this.G,this.A,null):new k2(this.mj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e($APP.Hn,this.mj,null)],null),this.A))};$APP.m.aa=function(a,b){return new k2(this.mj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;
$APP.m.pj=function(a,b,c){return i2(b,this.mj,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.mj):F4.call(null,b,this.mj)};$APP.m=l2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "symbol":return this.mj;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.SrcVar{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Hn,this.mj],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[$APP.Hn],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new l2(this.mj,this.G,this.A,this.F)};
$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1648766309^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.mj,b.mj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[$APP.Hn,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new l2(this.mj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "symbol":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Hn,b):$APP.Gf.call(null,$APP.Hn,b))?new l2(c,this.G,this.A,null):new l2(this.mj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e($APP.Hn,this.mj,null)],null),this.A))};$APP.m.aa=function(a,b){return new l2(this.mj,b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.mj,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.mj):F4.call(null,b,this.mj)};$APP.m=Jua.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){return $APP.Xe.j(this.A,b,c)};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.DefaultSrc{",", ","}",c,$APP.V.g($APP.qh,this.A))};$APP.m.ua=function(){return new $APP.Jh(this,0,$APP.qh,$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new Jua(this.G,this.A,this.F)};$APP.m.fa=function(){return 0+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-350962559^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze($APP.Zi,b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new Jua(this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){return $APP.Ze(this.A,b)};
$APP.m.ia=function(a,b,c){return new Jua(this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g($APP.qh,this.A))};$APP.m.aa=function(a,b){return new Jua(b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return c};$APP.m.qj=function(a,b){return b};$APP.m=N2.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){return $APP.Xe.j(this.A,b,c)};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.RulesVar{",", ","}",c,$APP.V.g($APP.qh,this.A))};$APP.m.ua=function(){return new $APP.Jh(this,0,$APP.qh,$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new N2(this.G,this.A,this.F)};$APP.m.fa=function(){return 0+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1504050517^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze($APP.Zi,b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new N2(this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){return $APP.Ze(this.A,b)};
$APP.m.ia=function(a,b,c){return new N2(this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g($APP.qh,this.A))};$APP.m.aa=function(a,b){return new N2(b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return c};$APP.m.qj=function(a,b){return b};$APP.m=k3.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "value":return this.value;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Constant{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.hJ,this.value],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[$APP.hJ],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new k3(this.value,this.G,this.A,this.F)};
$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-812884714^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.value,b.value)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[$APP.hJ,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new k3(this.value,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "value":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.hJ,b):$APP.Gf.call(null,$APP.hJ,b))?new k3(c,this.G,this.A,null):new k3(this.value,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e($APP.hJ,this.value,null)],null),this.A))};$APP.m.aa=function(a,b){return new k3(this.value,b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.value,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.value):F4.call(null,b,this.value)};$APP.m=o3.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "symbol":return this.mj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.PlainSymbol{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Hn,this.mj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[$APP.Hn],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new o3(this.mj,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1509921913^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.mj,b.mj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[$APP.Hn,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new o3(this.mj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "symbol":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Hn,b):$APP.Gf.call(null,$APP.Hn,b))?new o3(c,this.G,this.A,null):new o3(this.mj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e($APP.Hn,this.mj,null)],null),this.A))};$APP.m.aa=function(a,b){return new o3(this.mj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;
$APP.m.pj=function(a,b,c){return i2(b,this.mj,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.mj):F4.call(null,b,this.mj)};$APP.m=E3.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "required":return this.required;case "free":return this.fk;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.RuleVars{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[F3,this.required],null),new $APP.M(null,2,5,$APP.O,[G3,this.fk],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[F3,G3],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new E3(this.required,this.fk,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=892963297^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.required,b.required)&&$APP.B.g(this.fk,b.fk)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[G3,null,F3,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new E3(this.required,this.fk,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "required":case "free":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(F3,b):$APP.Gf.call(null,F3,b))?new E3(c,this.fk,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(G3,b):$APP.Gf.call(null,G3,b))?new E3(this.required,c,this.G,this.A,null):new E3(this.required,this.fk,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e(F3,this.required,null),new $APP.$e(G3,this.fk,null)],null),this.A))};$APP.m.aa=function(a,b){return new E3(this.required,this.fk,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.fk,i2(b,this.required,c))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.required):F4.call(null,b,this.required);b=this.fk;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=Vua.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){return $APP.Xe.j(this.A,b,c)};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.BindIgnore{",", ","}",c,$APP.V.g($APP.qh,this.A))};$APP.m.ua=function(){return new $APP.Jh(this,0,$APP.qh,$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new Vua(this.G,this.A,this.F)};$APP.m.fa=function(){return 0+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-890522983^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze($APP.Zi,b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new Vua(this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){return $APP.Ze(this.A,b)};$APP.m.ia=function(a,b,c){return new Vua(this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g($APP.qh,this.A))};$APP.m.aa=function(a,b){return new Vua(b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return c};$APP.m.qj=function(a,b){return b};$APP.m=L3.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "variable":return this.tj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.BindScalar{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[U4,this.tj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[U4],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new L3(this.tj,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1522792445^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.tj,b.tj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[U4,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new L3(this.tj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "variable":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(U4,b):$APP.Gf.call(null,U4,b))?new L3(c,this.G,this.A,null):new L3(this.tj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e(U4,this.tj,null)],null),this.A))};$APP.m.aa=function(a,b){return new L3(this.tj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.tj,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.tj):F4.call(null,b,this.tj)};$APP.m=m4.prototype;
$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "bindings":return this.Ge;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.BindTuple{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Mr,this.Ge],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[$APP.Mr],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new m4(this.Ge,this.G,this.A,this.F)};
$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1637239347^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.Ge,b.Ge)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[$APP.Mr,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new m4(this.Ge,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "bindings":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Mr,b):$APP.Gf.call(null,$APP.Mr,b))?new m4(c,this.G,this.A,null):new m4(this.Ge,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e($APP.Mr,this.Ge,null)],null),this.A))};$APP.m.aa=function(a,b){return new m4(this.Ge,b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.Ge,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.Ge):F4.call(null,b,this.Ge)};$APP.m=n4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "binding":return this.sj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.BindColl{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[k6,this.sj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[k6],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new n4(this.sj,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1930368089^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.sj,b.sj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[k6,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new n4(this.sj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "binding":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(k6,b):$APP.Gf.call(null,k6,b))?new n4(c,this.G,this.A,null):new n4(this.sj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e(k6,this.sj,null)],null),this.A))};$APP.m.aa=function(a,b){return new n4(this.sj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.sj,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.sj):F4.call(null,b,this.sj)};
k2.prototype.sk=function(){return new $APP.M(null,1,5,$APP.O,[this.mj],null)};$APP.m=p4.prototype;$APP.m.sk=function(){return $ua($APP.ue(this.$d))};$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "fn":return this.wa;case "args":return this.$d;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Aggregate{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Kq,this.wa],null),new $APP.M(null,2,5,$APP.O,[$APP.oI,this.$d],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.Kq,$APP.oI],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new p4(this.wa,this.$d,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-91097383^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.wa,b.wa)&&$APP.B.g(this.$d,b.$d)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.oI,null,$APP.Kq,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new p4(this.wa,this.$d,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "fn":case "args":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Kq,b):$APP.Gf.call(null,$APP.Kq,b))?new p4(c,this.$d,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.oI,b):$APP.Gf.call(null,$APP.oI,b))?new p4(this.wa,c,this.G,this.A,null):new p4(this.wa,this.$d,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.Kq,this.wa,null),new $APP.$e($APP.oI,this.$d,null)],null),this.A))};$APP.m.aa=function(a,b){return new p4(this.wa,this.$d,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.$d,i2(b,this.wa,c))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.wa):F4.call(null,b,this.wa);b=this.$d;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=q4.prototype;$APP.m.sk=function(){return $ua(this.tj)};$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "source":return this.source;case "variable":return this.tj;case "pattern":return this.pattern;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Pull{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.sm,this.source],null),new $APP.M(null,2,5,$APP.O,[U4,this.tj],null),new $APP.M(null,2,5,$APP.O,[p1,this.pattern],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[$APP.sm,U4,p1],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new q4(this.source,this.tj,this.pattern,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-2108867663^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.source,b.source)&&$APP.B.g(this.tj,b.tj)&&$APP.B.g(this.pattern,b.pattern)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[U4,null,$APP.sm,null,p1,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new q4(this.source,this.tj,this.pattern,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "source":case "variable":case "pattern":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.sm,b):$APP.Gf.call(null,$APP.sm,b))?new q4(c,this.tj,this.pattern,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(U4,b):$APP.Gf.call(null,U4,b))?new q4(this.source,c,this.pattern,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(p1,b):$APP.Gf.call(null,p1,b))?new q4(this.source,this.tj,c,this.G,this.A,null):new q4(this.source,this.tj,this.pattern,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e($APP.sm,this.source,null),new $APP.$e(U4,this.tj,null),new $APP.$e(p1,this.pattern,null)],null),this.A))};$APP.m.aa=function(a,b){return new q4(this.source,this.tj,this.pattern,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.pattern,i2(b,this.tj,i2(b,this.source,c)))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.source):F4.call(null,b,this.source);b=this.tj;a=F4.g?F4.g(a,b):F4.call(null,a,b);b=this.pattern;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=r4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "elements":return this.elements;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.FindRel{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[b6,this.elements],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[b6],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new r4(this.elements,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=744809563^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.elements,b.elements)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[b6,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new r4(this.elements,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.lk=function(){return this.elements};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "elements":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(b6,b):$APP.Gf.call(null,b6,b))?new r4(c,this.G,this.A,null):new r4(this.elements,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e(b6,this.elements,null)],null),this.A))};$APP.m.aa=function(a,b){return new r4(this.elements,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;
$APP.m.pj=function(a,b,c){return i2(b,this.elements,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.elements):F4.call(null,b,this.elements)};$APP.m=s4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "element":return this.element;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.FindColl{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[h6,this.element],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[h6],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new s4(this.element,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=124241361^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.element,b.element)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[h6,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new s4(this.element,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.lk=function(){return new $APP.M(null,1,5,$APP.O,[this.element],null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "element":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(h6,b):$APP.Gf.call(null,h6,b))?new s4(c,this.G,this.A,null):new s4(this.element,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e(h6,this.element,null)],null),this.A))};$APP.m.aa=function(a,b){return new s4(this.element,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;
$APP.m.pj=function(a,b,c){return i2(b,this.element,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.element):F4.call(null,b,this.element)};$APP.m=t4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "element":return this.element;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.FindScalar{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[h6,this.element],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[h6],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new t4(this.element,this.G,this.A,this.F)};
$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-661542332^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.element,b.element)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[h6,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new t4(this.element,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.lk=function(){return new $APP.M(null,1,5,$APP.O,[this.element],null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "element":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(h6,b):$APP.Gf.call(null,h6,b))?new t4(c,this.G,this.A,null):new t4(this.element,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e(h6,this.element,null)],null),this.A))};
$APP.m.aa=function(a,b){return new t4(this.element,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.element,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.element):F4.call(null,b,this.element)};$APP.m=u4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "elements":return this.elements;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.FindTuple{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[b6,this.elements],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[b6],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new u4(this.elements,this.G,this.A,this.F)};
$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=681530371^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.elements,b.elements)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[b6,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new u4(this.elements,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.lk=function(){return this.elements};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "elements":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(b6,b):$APP.Gf.call(null,b6,b))?new u4(c,this.G,this.A,null):new u4(this.elements,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e(b6,this.elements,null)],null),this.A))};$APP.m.aa=function(a,b){return new u4(this.elements,b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.elements,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.elements):F4.call(null,b,this.elements)};$APP.m=v4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "type":return this.type;case "symbols":return this.gk;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.ReturnMap{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Am,this.type],null),new $APP.M(null,2,5,$APP.O,[P4,this.gk],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.Am,P4],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new v4(this.type,this.gk,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-2025547471^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.type,b.type)&&$APP.B.g(this.gk,b.gk)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.Am,null,P4,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new v4(this.type,this.gk,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "type":case "symbols":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Am,b):$APP.Gf.call(null,$APP.Am,b))?new v4(c,this.gk,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(P4,b):$APP.Gf.call(null,P4,b))?new v4(this.type,c,this.G,this.A,null):new v4(this.type,this.gk,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.Am,this.type,null),new $APP.$e(P4,this.gk,null)],null),this.A))};$APP.m.aa=function(a,b){return new v4(this.type,this.gk,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.gk,i2(b,this.type,c))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.type):F4.call(null,b,this.type);b=this.gk;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=w4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "source":return this.source;case "pattern":return this.pattern;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Pattern{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.sm,this.source],null),new $APP.M(null,2,5,$APP.O,[p1,this.pattern],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.sm,p1],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new w4(this.source,this.pattern,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=575220587^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.source,b.source)&&$APP.B.g(this.pattern,b.pattern)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.sm,null,p1,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new w4(this.source,this.pattern,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "source":case "pattern":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.sm,b):$APP.Gf.call(null,$APP.sm,b))?new w4(c,this.pattern,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(p1,b):$APP.Gf.call(null,p1,b))?new w4(this.source,c,this.G,this.A,null):new w4(this.source,this.pattern,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.sm,this.source,null),new $APP.$e(p1,this.pattern,null)],null),this.A))};$APP.m.aa=function(a,b){return new w4(this.source,this.pattern,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.pattern,i2(b,this.source,c))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.source):F4.call(null,b,this.source);b=this.pattern;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=x4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "fn":return this.wa;case "args":return this.$d;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Predicate{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Kq,this.wa],null),new $APP.M(null,2,5,$APP.O,[$APP.oI,this.$d],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.Kq,$APP.oI],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new x4(this.wa,this.$d,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-1523376880^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.wa,b.wa)&&$APP.B.g(this.$d,b.$d)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.oI,null,$APP.Kq,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new x4(this.wa,this.$d,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "fn":case "args":return!0;default:return $APP.Ze(this.A,b)}};$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Kq,b):$APP.Gf.call(null,$APP.Kq,b))?new x4(c,this.$d,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.oI,b):$APP.Gf.call(null,$APP.oI,b))?new x4(this.wa,c,this.G,this.A,null):new x4(this.wa,this.$d,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.Kq,this.wa,null),new $APP.$e($APP.oI,this.$d,null)],null),this.A))};$APP.m.aa=function(a,b){return new x4(this.wa,this.$d,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.$d,i2(b,this.wa,c))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.wa):F4.call(null,b,this.wa);b=this.$d;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=y4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "fn":return this.wa;case "args":return this.$d;case "binding":return this.sj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Function{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Kq,this.wa],null),new $APP.M(null,2,5,$APP.O,[$APP.oI,this.$d],null),new $APP.M(null,2,5,$APP.O,[k6,this.sj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[$APP.Kq,$APP.oI,k6],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new y4(this.wa,this.$d,this.sj,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=589494199^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.wa,b.wa)&&$APP.B.g(this.$d,b.$d)&&$APP.B.g(this.sj,b.sj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[$APP.oI,null,$APP.Kq,null,k6,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new y4(this.wa,this.$d,this.sj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "fn":case "args":case "binding":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.Kq,b):$APP.Gf.call(null,$APP.Kq,b))?new y4(c,this.$d,this.sj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.oI,b):$APP.Gf.call(null,$APP.oI,b))?new y4(this.wa,c,this.sj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(k6,b):$APP.Gf.call(null,k6,b))?new y4(this.wa,this.$d,c,this.G,this.A,null):new y4(this.wa,this.$d,this.sj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e($APP.Kq,this.wa,null),new $APP.$e($APP.oI,this.$d,null),new $APP.$e(k6,this.sj,null)],null),this.A))};$APP.m.aa=function(a,b){return new y4(this.wa,this.$d,this.sj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.sj,i2(b,this.$d,i2(b,this.wa,c)))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.wa):F4.call(null,b,this.wa);b=this.$d;a=F4.g?F4.g(a,b):F4.call(null,a,b);b=this.sj;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=z4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "source":return this.source;case "name":return this.name;case "args":return this.$d;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.RuleExpr{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.sm,this.source],null),new $APP.M(null,2,5,$APP.O,[$APP.S,this.name],null),new $APP.M(null,2,5,$APP.O,[$APP.oI,this.$d],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[$APP.sm,$APP.S,$APP.oI],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new z4(this.source,this.name,this.$d,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-444662011^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.source,b.source)&&$APP.B.g(this.name,b.name)&&$APP.B.g(this.$d,b.$d)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[$APP.oI,null,$APP.S,null,$APP.sm,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new z4(this.source,this.name,this.$d,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "source":case "name":case "args":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.sm,b):$APP.Gf.call(null,$APP.sm,b))?new z4(c,this.name,this.$d,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.S,b):$APP.Gf.call(null,$APP.S,b))?new z4(this.source,c,this.$d,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.oI,b):$APP.Gf.call(null,$APP.oI,b))?new z4(this.source,this.name,c,this.G,this.A,null):new z4(this.source,this.name,this.$d,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e($APP.sm,this.source,null),new $APP.$e($APP.S,this.name,null),new $APP.$e($APP.oI,this.$d,null)],null),this.A))};$APP.m.aa=function(a,b){return new z4(this.source,this.name,this.$d,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.$d,i2(b,this.name,i2(b,this.source,c)))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.source):F4.call(null,b,this.source);b=this.name;a=F4.g?F4.g(a,b):F4.call(null,a,b);b=this.$d;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=A4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "source":return this.source;case "vars":return this.uj;case "clauses":return this.lj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Not{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.sm,this.source],null),new $APP.M(null,2,5,$APP.O,[D4,this.uj],null),new $APP.M(null,2,5,$APP.O,[$APP.KT,this.lj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[$APP.sm,D4,$APP.KT],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new A4(this.source,this.uj,this.lj,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1394671061^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.source,b.source)&&$APP.B.g(this.uj,b.uj)&&$APP.B.g(this.lj,b.lj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[$APP.sm,null,$APP.KT,null,D4,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new A4(this.source,this.uj,this.lj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "source":case "vars":case "clauses":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.sm,b):$APP.Gf.call(null,$APP.sm,b))?new A4(c,this.uj,this.lj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(D4,b):$APP.Gf.call(null,D4,b))?new A4(this.source,c,this.lj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.KT,b):$APP.Gf.call(null,$APP.KT,b))?new A4(this.source,this.uj,c,this.G,this.A,null):new A4(this.source,this.uj,this.lj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e($APP.sm,this.source,null),new $APP.$e(D4,this.uj,null),new $APP.$e($APP.KT,this.lj,null)],null),this.A))};$APP.m.aa=function(a,b){return new A4(this.source,this.uj,this.lj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.lj,i2(b,this.uj,i2(b,this.source,c)))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.source):F4.call(null,b,this.source);b=this.uj;a=F4.g?F4.g(a,b):F4.call(null,a,b);b=this.lj;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=B4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "source":return this.source;case "rule-vars":return this.Zj;case "clauses":return this.lj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Or{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.sm,this.source],null),new $APP.M(null,2,5,$APP.O,[tva,this.Zj],null),new $APP.M(null,2,5,$APP.O,[$APP.KT,this.lj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[$APP.sm,tva,$APP.KT],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new B4(this.source,this.Zj,this.lj,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1461934571^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.source,b.source)&&$APP.B.g(this.Zj,b.Zj)&&$APP.B.g(this.lj,b.lj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[tva,null,$APP.sm,null,$APP.KT,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new B4(this.source,this.Zj,this.lj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "source":case "rule-vars":case "clauses":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.sm,b):$APP.Gf.call(null,$APP.sm,b))?new B4(c,this.Zj,this.lj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(tva,b):$APP.Gf.call(null,tva,b))?new B4(this.source,c,this.lj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.KT,b):$APP.Gf.call(null,$APP.KT,b))?new B4(this.source,this.Zj,c,this.G,this.A,null):new B4(this.source,this.Zj,this.lj,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e($APP.sm,this.source,null),new $APP.$e(tva,this.Zj,null),new $APP.$e($APP.KT,this.lj,null)],null),this.A))};$APP.m.aa=function(a,b){return new B4(this.source,this.Zj,this.lj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.lj,i2(b,this.Zj,i2(b,this.source,c)))};
$APP.m.qj=function(a,b){a=F4.g?F4.g(b,this.source):F4.call(null,b,this.source);b=this.Zj;a=F4.g?F4.g(a,b):F4.call(null,a,b);b=this.lj;return F4.g?F4.g(a,b):F4.call(null,a,b)};$APP.m=nva.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "clauses":return this.lj;default:return $APP.Xe.j(this.A,b,c)}};
$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.And{",", ","}",c,$APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.KT,this.lj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,1,new $APP.M(null,1,5,$APP.O,[$APP.KT],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new nva(this.lj,this.G,this.A,this.F)};$APP.m.fa=function(){return 1+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-131856804^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.lj,b.lj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,1,[$APP.KT,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new nva(this.lj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "clauses":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.KT,b):$APP.Gf.call(null,$APP.KT,b))?new nva(c,this.G,this.A,null):new nva(this.lj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,1,5,$APP.O,[new $APP.$e($APP.KT,this.lj,null)],null),this.A))};$APP.m.aa=function(a,b){return new nva(this.lj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;
$APP.m.pj=function(a,b,c){return i2(b,this.lj,c)};$APP.m.qj=function(a,b){return F4.g?F4.g(b,this.lj):F4.call(null,b,this.lj)};var F4=function F4(a,b){return b instanceof k2?$APP.Af.g(a,b):b instanceof A4?$APP.Vh.g(a,b.uj):b instanceof B4?(b=b.Zj,F4.g?F4.g(a,b):F4.call(null,a,b)):(null!=b?$APP.Cd===b.oj||(b.Rd?0:$APP.Eb(Bua,b)):$APP.Eb(Bua,b))?Dua(b,a):$APP.Ie(b)?$APP.jf.j(F4,a,b):a};$APP.m=G4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "vars":return this.uj;case "clauses":return this.lj;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.RuleBranch{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[D4,this.uj],null),new $APP.M(null,2,5,$APP.O,[$APP.KT,this.lj],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[D4,$APP.KT],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new G4(this.uj,this.lj,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1024755006^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.uj,b.uj)&&$APP.B.g(this.lj,b.lj)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.KT,null,D4,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new G4(this.uj,this.lj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "vars":case "clauses":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(D4,b):$APP.Gf.call(null,D4,b))?new G4(c,this.lj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g($APP.KT,b):$APP.Gf.call(null,$APP.KT,b))?new G4(this.uj,c,this.G,this.A,null):new G4(this.uj,this.lj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e(D4,this.uj,null),new $APP.$e($APP.KT,this.lj,null)],null),this.A))};
$APP.m.aa=function(a,b){return new G4(this.uj,this.lj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.lj,i2(b,this.uj,c))};$APP.m.qj=function(a,b){return F4(F4(b,this.uj),this.lj)};$APP.m=H4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "name":return this.name;case "branches":return this.ek;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Rule{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.S,this.name],null),new $APP.M(null,2,5,$APP.O,[Jya,this.ek],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[$APP.S,Jya],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new H4(this.name,this.ek,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=-900273052^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.name,b.name)&&$APP.B.g(this.ek,b.ek)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[$APP.S,null,Jya,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new H4(this.name,this.ek,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "name":case "branches":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g($APP.S,b):$APP.Gf.call(null,$APP.S,b))?new H4(c,this.ek,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(Jya,b):$APP.Gf.call(null,Jya,b))?new H4(this.name,c,this.G,this.A,null):new H4(this.name,this.ek,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e($APP.S,this.name,null),new $APP.$e(Jya,this.ek,null)],null),this.A))};
$APP.m.aa=function(a,b){return new H4(this.name,this.ek,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.ek,i2(b,this.name,c))};$APP.m.qj=function(a,b){return F4(F4(b,this.name),this.ek)};$APP.m=I4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "qfind":return this.Sj;case "qwith":return this.Wj;case "qreturn-map":return this.Uj;case "qin":return this.Tj;case "qwhere":return this.Vj;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.parser.Query{",", ","}",c,$APP.V.g(new $APP.M(null,5,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[J4,this.Sj],null),new $APP.M(null,2,5,$APP.O,[K4,this.Wj],null),new $APP.M(null,2,5,$APP.O,[L4,this.Uj],null),new $APP.M(null,2,5,$APP.O,[M4,this.Tj],null),new $APP.M(null,2,5,$APP.O,[N4,this.Vj],null)],null),this.A))};
$APP.m.ua=function(){return new $APP.Jh(this,5,new $APP.M(null,5,5,$APP.O,[J4,K4,L4,M4,N4],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};$APP.m.da=function(){return new I4(this.Sj,this.Wj,this.Uj,this.Tj,this.Vj,this.G,this.A,this.F)};$APP.m.fa=function(){return 5+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=181307977^$APP.Vd(this)};
$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.Sj,b.Sj)&&$APP.B.g(this.Wj,b.Wj)&&$APP.B.g(this.Uj,b.Uj)&&$APP.B.g(this.Tj,b.Tj)&&$APP.B.g(this.Vj,b.Vj)&&$APP.B.g(this.A,b.A)};$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,5,[J4,null,N4,null,M4,null,K4,null,L4,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new I4(this.Sj,this.Wj,this.Uj,this.Tj,this.Vj,this.G,$APP.ig($APP.um.g(this.A,b)),null)};
$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "qfind":case "qwith":case "qreturn-map":case "qin":case "qwhere":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(J4,b):$APP.Gf.call(null,J4,b))?new I4(c,this.Wj,this.Uj,this.Tj,this.Vj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(K4,b):$APP.Gf.call(null,K4,b))?new I4(this.Sj,c,this.Uj,this.Tj,this.Vj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(L4,b):$APP.Gf.call(null,L4,b))?new I4(this.Sj,this.Wj,c,this.Tj,this.Vj,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(M4,b):$APP.Gf.call(null,M4,b))?new I4(this.Sj,this.Wj,this.Uj,c,this.Vj,this.G,this.A,
null):$APP.p($APP.Gf.g?$APP.Gf.g(N4,b):$APP.Gf.call(null,N4,b))?new I4(this.Sj,this.Wj,this.Uj,this.Tj,c,this.G,this.A,null):new I4(this.Sj,this.Wj,this.Uj,this.Tj,this.Vj,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,5,5,$APP.O,[new $APP.$e(J4,this.Sj,null),new $APP.$e(K4,this.Wj,null),new $APP.$e(L4,this.Uj,null),new $APP.$e(M4,this.Tj,null),new $APP.$e(N4,this.Vj,null)],null),this.A))};
$APP.m.aa=function(a,b){return new I4(this.Sj,this.Wj,this.Uj,this.Tj,this.Vj,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m.oj=$APP.Cd;$APP.m.pj=function(a,b,c){return i2(b,this.Vj,i2(b,this.Tj,i2(b,this.Uj,i2(b,this.Wj,i2(b,this.Sj,c)))))};$APP.m.qj=function(a,b){return F4(F4(F4(F4(F4(b,this.Sj),this.Wj),this.Uj),this.Tj),this.Vj)};var nza=JY();$APP.m=Q4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "rels":return this.hk;case "sources":return this.sources;case "rules":return this.rules;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.query.Context{",", ","}",c,$APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[X4,this.hk],null),new $APP.M(null,2,5,$APP.O,[V4,this.sources],null),new $APP.M(null,2,5,$APP.O,[W4,this.rules],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,3,new $APP.M(null,3,5,$APP.O,[X4,V4,W4],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new Q4(this.hk,this.sources,this.rules,this.G,this.A,this.F)};$APP.m.fa=function(){return 3+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1014232958^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.hk,b.hk)&&$APP.B.g(this.sources,b.sources)&&$APP.B.g(this.rules,b.rules)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,3,[V4,null,W4,null,X4,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new Q4(this.hk,this.sources,this.rules,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "rels":case "sources":case "rules":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(X4,b):$APP.Gf.call(null,X4,b))?new Q4(c,this.sources,this.rules,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(V4,b):$APP.Gf.call(null,V4,b))?new Q4(this.hk,c,this.rules,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(W4,b):$APP.Gf.call(null,W4,b))?new Q4(this.hk,this.sources,c,this.G,this.A,null):new Q4(this.hk,this.sources,this.rules,this.G,$APP.Vi.j(this.A,b,c),null)};
$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,3,5,$APP.O,[new $APP.$e(X4,this.hk,null),new $APP.$e(V4,this.sources,null),new $APP.$e(W4,this.rules,null)],null),this.A))};$APP.m.aa=function(a,b){return new Q4(this.hk,this.sources,this.rules,b,this.A,this.F)};$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};$APP.m=R4.prototype;$APP.m.ma=function(a,b){return this.O(null,b,null)};
$APP.m.O=function(a,b,c){switch(b instanceof $APP.K?b.ba:null){case "attrs":return this.ij;case "tuples":return this.jk;default:return $APP.Xe.j(this.A,b,c)}};$APP.m.pb=function(a,b,c){return $APP.jf.j(function(d,e){var f=$APP.E.j(e,0,null);e=$APP.E.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.m.R=function(a,b,c){return $APP.wj(b,function(d){return $APP.wj(b,$APP.Cj,""," ","",c,d)},"#datascript.query.Relation{",", ","}",c,$APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[D1,this.ij],null),new $APP.M(null,2,5,$APP.O,[Z4,this.jk],null)],null),this.A))};$APP.m.ua=function(){return new $APP.Jh(this,2,new $APP.M(null,2,5,$APP.O,[D1,Z4],null),$APP.p(this.A)?$APP.rd(this.A):$APP.mg())};$APP.m.W=function(){return this.G};
$APP.m.da=function(){return new R4(this.ij,this.jk,this.G,this.A,this.F)};$APP.m.fa=function(){return 2+$APP.le(this.A)};$APP.m.X=function(){var a=this.F;return null!=a?a:this.F=a=1107093117^$APP.Vd(this)};$APP.m.N=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.B.g(this.ij,b.ij)&&$APP.B.g(this.jk,b.jk)&&$APP.B.g(this.A,b.A)};
$APP.m.vb=function(a,b){return $APP.Ze(new $APP.Yi(null,new $APP.n(null,2,[Z4,null,D1,null],null),null),b)?$APP.um.g($APP.yc($APP.Vh.g($APP.gg,this),this.G),b):new R4(this.ij,this.jk,this.G,$APP.ig($APP.um.g(this.A,b)),null)};$APP.m.Pa=function(a,b){switch(b instanceof $APP.K?b.ba:null){case "attrs":case "tuples":return!0;default:return $APP.Ze(this.A,b)}};
$APP.m.ia=function(a,b,c){return $APP.p($APP.Gf.g?$APP.Gf.g(D1,b):$APP.Gf.call(null,D1,b))?new R4(c,this.jk,this.G,this.A,null):$APP.p($APP.Gf.g?$APP.Gf.g(Z4,b):$APP.Gf.call(null,Z4,b))?new R4(this.ij,c,this.G,this.A,null):new R4(this.ij,this.jk,this.G,$APP.Vi.j(this.A,b,c),null)};$APP.m.ca=function(){return $APP.x($APP.V.g(new $APP.M(null,2,5,$APP.O,[new $APP.$e(D1,this.ij,null),new $APP.$e(Z4,this.jk,null)],null),this.A))};$APP.m.aa=function(a,b){return new R4(this.ij,this.jk,b,this.A,this.F)};
$APP.m.ha=function(a,b){return $APP.Le(b)?this.ia(null,$APP.we(b,0),$APP.we(b,1)):$APP.jf.j($APP.Tb,this,b)};
var T4=function T4(a,b){return $APP.B.g($APP.aI,a)?!0:$APP.B.g(new $APP.M(null,1,5,$APP.O,[$APP.QH],null),a)?$APP.Ie(b):a instanceof $APP.w?$APP.B.g(b,a):$APP.Ie(a)?$APP.B.g($APP.ue(a),$APP.QH)?$APP.Ie(b)&&$APP.Ag(function(d){var e=$APP.E.j(d,0,null);d=$APP.E.j(d,1,null);return T4.g?T4.g(e,d):T4.call(null,e,d)},$APP.Dj.j($APP.Wt,$APP.dj(a),b)):$APP.Ie(b)&&$APP.B.g($APP.le(b),$APP.le(a))&&$APP.Ag(function(d){var e=$APP.E.j(d,0,null);d=$APP.E.j(d,1,null);return T4.g?T4.g(e,d):T4.call(null,e,d)},$APP.Dj.j($APP.Wt,
a,b)):a.h?a.h(b):a.call(null,b)},C5=function C5(a,b){var d=$APP.hg(a),e=$APP.Xe.g(d,D1);d=$APP.Xe.g(d,Z4);var f=$APP.hg(b),g=$APP.Xe.g(f,D1);f=$APP.Xe.g(f,Z4);if($APP.B.g(e,g))return new R4(e,$APP.Vh.g($APP.rh(d),f),null,null,null);if(Sva(e,g)){if($APP.Ag($APP.Hba,$APP.Si(e))){var k=$APP.rh(function(){return function u(q){return new $APP.Pf(null,function(){for(;;){var C=$APP.x(q);if(C){if($APP.Me(C)){var F=$APP.hd(C),N=$APP.le(F),Q=$APP.Sf(N);a:for(var T=0;;)if(T<N){var X=$APP.we(F,T),da=$APP.E.j(X,
0,null);X=$APP.E.j(X,1,null);$APP.Wf(Q,new $APP.M(null,2,5,$APP.O,[X,e.h?e.h(da):e.call(null,da)],null));T+=1}else{F=!0;break a}return F?$APP.Vf($APP.Xf(Q),u($APP.id(C))):$APP.Vf($APP.Xf(Q),null)}F=$APP.y(C);Q=$APP.E.j(F,0,null);F=$APP.E.j(F,1,null);return $APP.Df(new $APP.M(null,2,5,$APP.O,[F,e.h?e.h(Q):e.call(null,Q)],null),u($APP.Qd(C)))}return null}},null,null)}(g)}()),l=$APP.jf.g($APP.ip,$APP.Si(e))+1;b=$APP.Zc($APP.jf.j(function(r,q){for(var u=Array(l),C=$APP.x(k),F=null,N=0,Q=0;;)if(Q<N){var T=
F.Y(null,Q),X=$APP.E.j(T,0,null);T=$APP.E.j(T,1,null);u[T]=q[X];Q+=1}else if(C=$APP.x(C))$APP.Me(C)?(N=$APP.hd(C),C=$APP.id(C),F=N,N=$APP.le(N)):(N=$APP.y(C),F=$APP.E.j(N,0,null),N=$APP.E.j(N,1,null),u[N]=q[F],C=$APP.z(C),F=null,N=0),Q=0;else break;return $APP.kh.g(r,u)},$APP.Xc($APP.rh(d)),f));return new R4(e,b,null,null,null)}var h=$APP.fj($APP.Qi($APP.tm.l($APP.I([e,g]))),$APP.Os.s());d=function(){var r=new R4(h,$APP.qh,null,null,null);return C5.g?C5.g(r,a):C5.call(null,r,a)}();return C5.g?C5.g(d,
b):C5.call(null,d,b)}throw $APP.Gm.g(["Can’t sum relations with different attrs: ",$APP.bk.l($APP.I([e]))," and ",$APP.bk.l($APP.I([g]))].join(""),new $APP.n(null,1,[$APP.SF,a5],null));},$4=function $4(a){switch(arguments.length){case 0:return $4.s();case 2:return $4.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};$4.s=function(){return new R4($APP.gg,new $APP.M(null,1,5,$APP.O,[[]],null),null,null,null)};
$4.g=function(a,b){var c=$APP.Qi(D1.h(a)),d=$APP.Qi(D1.h(b)),e=$APP.Yf($APP.Dj.g(D1.h(a),c)),f=$APP.Yf($APP.Dj.g(D1.h(b),d));return new R4($APP.fj($APP.V.g(c,d),$APP.Os.s()),$APP.Zc($APP.jf.j(function(g,k){return $APP.jf.j(function(l,h){return $APP.kh.g(l,Wva(k,e,h,f))},g,Z4.h(b))},$APP.Xc($APP.qh),Z4.h(a))),null,null,null)};$4.o=2;Vua.prototype.nk=function(){return $4.s()};
L3.prototype.nk=function(a,b){return new R4($APP.fg([$APP.Mp.g(this,new $APP.M(null,2,5,$APP.O,[U4,$APP.Hn],null)),0]),new $APP.M(null,1,5,$APP.O,[$APP.kq.h(new $APP.M(null,1,5,$APP.O,[b],null))],null),null,null,null)};
n4.prototype.nk=function(a,b){var c=this;if(Cra(b))return $APP.Ee(b)?Xva(c):$APP.jf.g(C5,$APP.Dj.g(function(d){return Yva(c.sj,d)},b));throw $APP.Gm.g(["Cannot bind value ",$APP.bk.l($APP.I([b]))," to collection ",$APP.bk.l($APP.I([Hua(c)]))].join(""),new $APP.n(null,3,[$APP.SF,Iya,$APP.hJ,b,k6,Hua(c)],null));};
m4.prototype.nk=function(a,b){if(Cra(b)){if($APP.le(b)<$APP.le(this.Ge))throw $APP.Gm.g(["Not enough elements in a collection ",$APP.bk.l($APP.I([b]))," to bind tuple ",$APP.bk.l($APP.I([Hua(this)]))].join(""),new $APP.n(null,3,[$APP.SF,Iya,$APP.hJ,b,k6,Hua(this)],null));return $APP.jf.g($4,$APP.Dj.j(function(c,d){return Yva(c,d)},this.Ge,b))}throw $APP.Gm.g(["Cannot bind value ",$APP.bk.l($APP.I([b]))," to tuple ",$APP.bk.l($APP.I([Hua(this)]))].join(""),new $APP.n(null,3,[$APP.SF,Iya,$APP.hJ,b,
k6,Hua(this)],null));};var cwa=null,Y4=null,uwa=$APP.fk.h(0),G5=function G5(a){switch(arguments.length){case 2:return G5.g(arguments[0],arguments[1]);case 3:return G5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};G5.g=function(a,b){return G5.j(a,b,b)};
G5.j=function(a,b,c){for(;;){var d=T4,e=b;if($APP.p(function(){var X=new $APP.M(null,1,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Fd,$APP.QH],null)],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}()))return Mwa(Lwa(a),$APP.Xg.g(S4,$APP.Jba(b)),b),rwa(a,b);if($APP.p(function(){var X=new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[$APP.Fd,$APP.QH],null),$APP.aI],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}()))return Mwa(Lwa(a),$APP.Xg.g(S4,$APP.Jba(b)),b),swa(a,b);if($APP.p(function(){var X=
new $APP.M(null,2,5,$APP.O,[Tva,$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}())){var f=$APP.x(b);c=$APP.y(f);f=$APP.z(f);var g=Y4;Y4=$APP.Xe.g(V4.h(a),c);try{return G5.j(a,f,b)}finally{Y4=g}}else{if($APP.p(function(){var X=new $APP.M(null,2,5,$APP.O,[$APP.lx,$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}())){var k=b,l=$APP.x(k),h=$APP.y(l),r=$APP.z(l);f=h;g=r;var q=Nwa(Lwa(a),g,b),u=$APP.Dj.g(function(X){return function(da){return K5.g?K5.g(X,da):K5.call(null,X,da)}}(a,
b,c,k,l,h,r,f,g,q,d,e),g);b=$APP.Dj.g(function(){return function(X){return $APP.jf.g(gwa,X4.h(X))}}(a,b,c,k,l,h,r,f,g,q,u,d,e),u);return $APP.Vi.j($APP.y(u),X4,new $APP.M(null,1,5,$APP.O,[$APP.jf.g(C5,b)],null))}if($APP.p(function(){var X=new $APP.M(null,3,5,$APP.O,[yva,new $APP.M(null,2,5,$APP.O,[new $APP.M(null,1,5,$APP.O,[$APP.QH],null),$APP.QH],null),$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}())){g=$APP.x(b);f=$APP.y(g);g=$APP.z(g);k=$APP.y(g);f=$APP.z(g);k=$APP.x(k);g=$APP.y(k);
k=$APP.z(k);q=g;g=f;f=Lwa(a);Mwa(f,q,c);Owa(f,k,g);c=$APP.Yt.j(yva,$APP.V.g(q,k),g);f=b;b=c;c=f;continue}else{if($APP.p(function(){var X=new $APP.M(null,3,5,$APP.O,[yva,new $APP.M(null,1,5,$APP.O,[$APP.QH],null),$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}())){h=b;r=$APP.x(h);var C=$APP.y(r),F=$APP.z(r);f=C;var N=$APP.y(F),Q=$APP.z(F);k=N;g=Q;var T=$APP.cj(k);q=Owa(Lwa(a),T,g);l=Kwa(a,T);u=$APP.Dj.g(function(X,da,ha,ka,Y,D,A,ba,G,H,aa,ea,fa,ma,sa){return function(ta){return Kwa(K5.g?
K5.g(sa,ta):K5.call(null,sa,ta),fa)}}(a,b,c,h,r,C,F,f,N,Q,k,g,T,q,l,d,e),g);b=$APP.Dj.g(function(){return function(X){return $APP.jf.g(gwa,X4.h(X))}}(a,b,c,h,r,C,F,f,N,Q,k,g,T,q,l,u,d,e),u);b=$APP.jf.g(C5,b);return $APP.Ir.B(a,X4,lwa,b)}if($APP.p(function(){var X=new $APP.M(null,2,5,$APP.O,[$APP.hx,$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}()))return c=$APP.x(b),b=$APP.y(c),c=$APP.z(c),f=b,b=c,$APP.jf.j(K5,a,b);if($APP.p(function(){var X=new $APP.M(null,2,5,$APP.O,[$APP.RJ,$APP.QH],
null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}())){f=$APP.x(b);b=$APP.y(f);g=$APP.z(f);f=b;b=g;f=Lwa(a);g=$APP.cj(zwa(b));if($APP.Ee($APP.WU.g(f,g)))throw $APP.Gm.g(["Insufficient bindings: none of ",$APP.bk.l($APP.I([g]))," is bound in ",$APP.bk.l($APP.I([c]))].join(""),new $APP.n(null,2,[$APP.SF,a5,$APP.QG,c],null));q=null;a=$APP.Vi.j(a,X4,new $APP.M(null,1,5,$APP.O,[$APP.jf.g(gwa,X4.h(a))],null));b=$APP.jf.j(K5,a,b);b=hwa($APP.y(X4.h(a)),$APP.jf.g(gwa,X4.h(b)));return $APP.Vi.j(a,X4,new $APP.M(null,
1,5,$APP.O,[b],null))}if($APP.p(function(){var X=new $APP.M(null,3,5,$APP.O,[wva,new $APP.M(null,1,5,$APP.O,[$APP.QH],null),$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}()))return b=$APP.x(b),f=$APP.y(b),b=$APP.z(b),f=$APP.y(b),b=$APP.z(b),k=f,f=Lwa(a),q=Mwa(f,k,c),a=$APP.Vi.j(a,X4,new $APP.M(null,1,5,$APP.O,[$APP.jf.g(gwa,X4.h(a))],null)),l=Kwa(a,k),b=Kwa($APP.jf.j(K5,l,b),k),b=hwa($APP.y(X4.h(a)),$APP.jf.g(gwa,X4.h(b))),$APP.Vi.j(a,X4,new $APP.M(null,1,5,$APP.O,[b],null));if($APP.p(function(){var X=
new $APP.M(null,1,5,$APP.O,[$APP.QH],null),da=e;return d.g?d.g(X,da):d.call(null,X,da)}())){c=Y4;b=Iwa(c,b);f=kwa(c,b);g=cwa;cwa=(null!=c?$APP.Cd===c.vk||(c.Rd?0:$APP.Eb(lsa,c)):$APP.Eb(lsa,c))?Jwa(c,b):cwa;try{return $APP.Ir.B(a,X4,lwa,f)}finally{cwa=g}}else throw Error(["No matching clause: ",$APP.t.h(e)].join(""));}}break}};G5.o=3;
var K5=function K5(a,b){if(twa(a,b))if(Tva($APP.y(b))){var d=Y4;Y4=$APP.Xe.g(V4.h(a),$APP.y(b));try{var e=$APP.z(b);return K5.g?K5.g(a,e):K5.call(null,a,e)}finally{Y4=d}}else return $APP.Ir.B(a,X4,lwa,Hwa(a,b));else return G5.g(a,b)};k2.prototype.pk=function(a,b){return nwa(b,this.mj)};l2.prototype.pk=function(a,b){return $APP.Mp.g(b,new $APP.M(null,2,5,$APP.O,[V4,this.mj],null))};o3.prototype.pk=function(){var a=$APP.Xe.g(mza,this.mj);return $APP.p(a)?a:null};k3.prototype.pk=function(){return this.value};
r4.prototype.qk=function(a,b,c){return null==b?c:Wwa(b,c)};s4.prototype.qk=function(a,b,c){return $APP.Vh.j($APP.qh,$APP.Dj.h($APP.y),c)};t4.prototype.qk=function(a,b,c){return $APP.re(c)};u4.prototype.qk=function(a,b,c){return null!=b?$APP.y(Wwa(b,new $APP.M(null,1,5,$APP.O,[$APP.y(c)],null))):$APP.y(c)};var V6=function V6(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return V6.l(arguments[0],1<c.length?new $APP.Md(c.slice(1),0,null):null)};
V6.l=function(a,b){var c=Rqa(nza,a,function(){return Qva(a)}),d=J4.h(c),e=ava(d),f=$APP.Vg.l($ua,$APP.I([ava(d)])),g=$APP.le(e),k=K4.h(c);k=$APP.V.g(f,$APP.Dj.g($APP.Hn,k));f=$APP.Ie(a)?Gva(a):a;var l=Mva.h(f);b=bwa(new Q4($APP.qh,$APP.gg,$APP.gg,null,null,null),M4.h(c),b);k=Rwa(Pwa(b,l),k);f=$APP.p(Nva.h(f))?$APP.ep.g(function(h){return $APP.rh($APP.Jl.j(h,0,g))},k):k;f=$APP.p($APP.Bg(bva,e))?Uwa(e,b,f):f;e=$APP.p($APP.Bg(cva,e))?Ywa(e,b,f):f;return Xwa(d,L4.h(c),e)};V6.o=1;
V6.P=function(a){var b=$APP.y(a);a=$APP.z(a);return this.l(b,a)};S5.g=function(a,b){return S5.j(a,b,null)};S5.j=function(a,b,c){if(a instanceof D_)throw $APP.Gm.g("Filtered DB cannot be modified",new $APP.n(null,1,[$APP.SF,Qya],null));return kta(Esa(new $APP.n(null,5,[G0,a,H0,a,I0,$APP.qh,J0,$APP.gg,O0,c],null)),b)};S5.o=3;
var W6=function W6(a){switch(arguments.length){case 2:return W6.g(arguments[0],arguments[1]);case 3:return W6.j(arguments[0],arguments[1],arguments[2]);case 4:return W6.B(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return W6.J(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return W6.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};
W6.g=function(a,b){return YZ(a,b,$APP.qh)};W6.j=function(a,b,c){return YZ(a,b,new $APP.M(null,1,5,$APP.O,[c],null))};W6.B=function(a,b,c,d){return YZ(a,b,new $APP.M(null,2,5,$APP.O,[c,d],null))};W6.J=function(a,b,c,d,e){return YZ(a,b,new $APP.M(null,3,5,$APP.O,[c,d,e],null))};W6.ja=function(a,b,c,d,e,f){return YZ(a,b,new $APP.M(null,4,5,$APP.O,[c,d,e,f],null))};W6.o=6;
var Y6=function Y6(a){switch(arguments.length){case 1:return Y6.h(arguments[0]);case 2:return Y6.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};Y6.h=function(a){return cxa(h0.h?h0.h(a):h0.call(null,a))};Y6.g=function(a,b){return cxa(h0.g?h0.g(a,b):h0.call(null,a,b))};Y6.o=2;
var a7=function a7(a){switch(arguments.length){case 0:return a7.s();case 1:return a7.h(arguments[0]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};a7.s=function(){return cxa(H6.s?H6.s():H6.call(null))};a7.h=function(a){return cxa(H6.h?H6.h(a):H6.call(null,a))};a7.o=1;
var f7=function f7(a){switch(arguments.length){case 2:return f7.g(arguments[0],arguments[1]);case 3:return f7.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};f7.g=function(a,b){return f7.j(a,b,null)};
f7.j=function(a,b,c){b=dxa(a,b,c);a=bxa.h($APP.Be(a));a=null==a?null:$APP.v(a);a=$APP.x(a);c=null;for(var d=0,e=0;;)if(e<d){var f=c.Y(null,e);$APP.E.j(f,0,null);f=$APP.E.j(f,1,null);f.h?f.h(b):f.call(null,b);e+=1}else if(a=$APP.x(a))$APP.Me(a)?(d=$APP.hd(a),a=$APP.id(a),c=d,d=$APP.le(d)):(c=$APP.y(a),$APP.E.j(c,0,null),c=$APP.E.j(c,1,null),c.h?c.h(b):c.call(null,b),a=$APP.z(a),c=null,d=0),e=0;else break;return b};f7.o=3;
var g7=function g7(a){switch(arguments.length){case 2:return g7.g(arguments[0],arguments[1]);case 3:return g7.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};g7.g=function(a,b){return g7.j(a,b,null)};
g7.j=function(a,b,c){c=Esa(new $APP.n(null,4,[G0,$APP.v(a),H0,b,I0,$APP.V.g($APP.Dj.g(function(l){return $APP.Vi.j(l,Kra,!1)},W6.g($APP.v(a),o_)),W6.g(b,o_)),O0,c],null));$APP.Hg(a,b);for(var d=$APP.x(function(){var l=bxa.h($APP.Be(a));return null==l?null:$APP.v(l)}()),e=null,f=0,g=0;;)if(g<f){var k=e.Y(null,g);$APP.E.j(k,0,null);k=$APP.E.j(k,1,null);k.h?k.h(c):k.call(null,c);g+=1}else if(d=$APP.x(d))$APP.Me(d)?(f=$APP.hd(d),d=$APP.id(d),e=f,f=$APP.le(f)):(e=$APP.y(d),$APP.E.j(e,0,null),e=$APP.E.j(e,
1,null),e.h?e.h(c):e.call(null,c),d=$APP.z(d),e=null,f=0),g=0;else break;return b};g7.o=3;var u9=function u9(a){switch(arguments.length){case 2:return u9.g(arguments[0],arguments[1]);case 3:return u9.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};u9.g=function(a,b){return u9.j(a,$APP.pB.s(),b)};u9.j=function(a,b,c){$APP.gk.B(bxa.h($APP.Be(a)),$APP.Vi,b,c);return b};u9.o=3;
for(var oza=$APP.x(new $APP.n(null,2,[ixa,Sra,Xya,Bsa],null)),pza=null,qza=0,rza=0;;)if(rza<qza){var sza=pza.Y(null,rza),tza=$APP.E.j(sza,0,null),uza=$APP.E.j(sza,1,null),vza=tza,wza=uza;$APP.Xe.g($APP.v($APP.qU),vza);$APP.gk.B($APP.qU,$APP.Vi,vza,wza);rza+=1}else{var xza=$APP.x(oza);if(xza){var yza=xza;if($APP.Me(yza)){var zza=$APP.hd(yza),Aza=$APP.id(yza),Bza=zza,Cza=$APP.le(zza);oza=Aza;pza=Bza;qza=Cza}else{var Dza=$APP.y(yza),Eza=$APP.E.j(Dza,0,null),Fza=$APP.E.j(Dza,1,null),Gza=Eza,Hza=Fza;$APP.Xe.g($APP.v($APP.qU),
Gza);$APP.gk.B($APP.qU,$APP.Vi,Gza,Hza);oza=$APP.z(yza);pza=null;qza=0}rza=0}else break}$APP.fk.h(-1E6);var Q$=function Q$(a){switch(arguments.length){case 0:return Q$.s();case 1:return Q$.h(arguments[0]);default:throw Error(["Invalid arity: ",$APP.t.h(arguments.length)].join(""));}};Q$.s=function(){return Q$.h((new Date).getTime())};
Q$.h=function(a){return $APP.hca([$APP.t.h(fxa(a/1E3|0,8)),"-",$APP.t.h(fxa($APP.ik(65536),4)),"-",$APP.t.h(fxa($APP.ik(65536)&4095|16384,4)),"-",$APP.t.h(fxa($APP.ik(65536)&16383|32768,4)),"-",$APP.t.h(fxa($APP.ik(65536),4)),$APP.t.h(fxa($APP.ik(65536),4)),$APP.t.h(fxa($APP.ik(65536),4))].join(""))};Q$.o=1;var R$=$APP.Uo(l6,null),Iza=$APP.Uo(F6,null),Jza=$APP.Ai([iya,cza,xxa,Qxa,uya,Eya,vya,Bya,eza,nya,Oxa,Pya,n0,qya,Rya,$ya,Vya,Kxa,Cya,Zya,$APP.qR,C6,dva,gya],[function(){var a=new $APP.Kd(function(){return S5},Gxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,iya,"datascript/core.cljc",11,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,3,$APP.tR,3,$APP.IP,new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[n0,j6],null),new $APP.M(null,3,5,$APP.O,[n0,j6,
G6],null)],null),$APP.W,$APP.P(new $APP.M(null,2,5,$APP.O,[n0,j6],null),new $APP.M(null,3,5,$APP.O,[n0,j6,G6],null)),$APP.eS,$APP.P(null,null)],null),1,256,256,$APP.P(new $APP.M(null,2,5,$APP.O,[n0,j6],null),new $APP.M(null,3,5,$APP.O,[n0,j6,G6],null)),"Same as [[transact!]], but applies to an immutable database value. Returns transaction report (see [[transact!]]).",$APP.p(S5)?S5.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,
$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return N6},dza,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,cza,"datascript/core.cljc",12,1,120,130,$APP.Pd,'Same as [[pull]], but accepts sequence of ids and returns sequence of maps.\n\n             Usage:\n\n             ```\n             (pull-many db [:db/id :name] [1 2])\n             ; \x3d\x3e [{:db/id 1, :name "Ivan"}\n             ;     {:db/id 2, :name "Oleg"}]\n             ```',
$APP.p(N6)?N6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return i1},mya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,xxa,"datascript/core.cljc",9,1,23,72,$APP.Pd,"Retrieves an entity by its id from database. Entities are lazy map-like structures to navigate DataScript database content.\n\n             For `eid` pass entity id or lookup attr:\n             \n                 (entity db 1)\n                 (entity db [:unique-attr :value])\n            \n             If entity does not exist, `nil` is returned:\n\n                 (entity db 100500) ; \x3d\x3e nil\n\n             Creating an entity by id is very cheap, almost no-op, as attr access is on-demand:\n\n                 (entity db 1) ; \x3d\x3e {:db/id 1}\n\n             Entity attributes can be lazily accessed through key lookups:\n             \n                 (:attr (entity db 1)) ; \x3d\x3e :value\n                 (get (entity db 1) :attr) ; \x3d\x3e :value\n\n             Cardinality many attributes are returned sequences:\n\n                 (:attrs (entity db 1)) ; \x3d\x3e [:v1 :v2 :v3]\n\n             Reference attributes are returned as another entities:\n\n                 (:ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n                 (:ns/ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n\n             References can be walked backwards by prepending `_` to name part of an attribute:\n\n                 (:_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n                 (:ns/_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n             \n             Reverse reference lookup returns sequence of entities unless attribute is marked as `:db/isComponent`:\n\n                 (:_component-ref (entity db 2)) ; \x3d\x3e {:db/id 1}\n\n             Entity gotchas:\n               \n             - Entities print as map, but are not exactly maps (they have compatible get interface though).\n             - Entities are effectively immutable “views” into a particular version of a database.\n             - Entities retain reference to the whole database.\n             - You can’t change database through entities, only read.\n             - Creating an entity by id is very cheap, almost no-op (attributes are looked up on demand).\n             - Comparing entities just compares their ids. Be careful when comparing entities taken from different dbs or from different versions of the same db.\n             - Accessed entity attributes are cached on entity itself (except backward references).\n             - When printing, only cached attributes (the ones you have accessed before) are printed. See [[touch]].",
$APP.p(i1)?i1.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return V6},uxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Qxa,"datascript/core.cljc",4,1,135,147,$APP.Pd,'Executes a datalog query. See [docs.datomic.com/on-prem/query.html](https://docs.datomic.com/on-prem/query.html).\n\n          Usage:\n          \n          ```\n          (q \'[:find ?value\n               :where [_ :likes ?value]]\n             db)\n          ; \x3d\x3e #{["fries"] ["candy"] ["pie"] ["pizza"]}\n          ```',
$APP.p(V6)?V6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return u9},Oya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,uya,"datascript/core.cljc",14,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,3,$APP.tR,3,
$APP.IP,new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[u6,$APP.Bca],null),new $APP.M(null,3,5,$APP.O,[u6,$APP.JD,$APP.Bca],null)],null),$APP.W,$APP.P(new $APP.M(null,2,5,$APP.O,[u6,$APP.Bca],null),new $APP.M(null,3,5,$APP.O,[u6,$APP.JD,$APP.Bca],null)),$APP.eS,$APP.P(null,null)],null),1,592,592,$APP.P(new $APP.M(null,2,5,$APP.O,[u6,$APP.Bca],null),new $APP.M(null,3,5,$APP.O,[u6,$APP.JD,$APP.Bca],null)),"Listen for changes on the given connection. Whenever a transaction is applied to the database via [[transact!]], the callback is called\n   with the transaction report. `key` is any opaque unique value.\n   \n   Idempotent. Calling [[listen!]] with the same key twice will override old callback with the new value.\n   \n   Returns the key under which this listener is registered. See also [[unlisten!]].",
$APP.p(u9)?u9.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return gZ},Gya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Eya,"datascript/core.cljc",8,1,172,178,$APP.Pd,"Low-level fn to create raw datoms.\n\n             Optionally with transaction id (number) and `added` flag (`true` for addition, `false` for retraction).\n\n             See also [[init-db]].",
$APP.p(gZ)?gZ.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return $wa},Yya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,vya,"datascript/core.cljc",14,1,271,271,$APP.P(new $APP.M(null,2,5,$APP.O,[n0,j6],null)),
"Applies transaction to an immutable db value, returning new immutable db value. Same as `(:db-after (with db tx-data))`.",$APP.p($wa)?$wa.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return axa},Mya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,
$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Bya,"datascript/core.cljc",18,1,405,405,$APP.P(new $APP.M(null,4,5,$APP.O,[n0,Txa,$APP.Aca,$APP.Tca],null)),'Returns part of `:avet` index between `[_ attr start]` and `[_ attr end]` in AVET sort order.\n  \n   Same properties as [[datoms]].\n   \n   `attr` must be a reference, unique attribute or marked as `:db/index true`.\n   \n   Usage:\n\n       (index-range db :likes "a" "zzzzzzzzz")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n        \n       (index-range db :likes "egg" "pineapple")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"])\n           \n   Useful patterns:\n     \n       ; find all entities with age in a specific range (inclusive)\n       (-\x3e\x3e (index-range db :age 18 60) (map :e))',
$APP.p(axa)?axa.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return cxa},Jxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,eza,"datascript/core.cljc",19,1,444,444,$APP.P(new $APP.M(null,1,5,$APP.O,[n0],null)),
"Creates a mutable reference to a given immutable database. See [[create-conn]].",$APP.p(cxa)?cxa.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return g7},Fxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],
[l6,nya,"datascript/core.cljc",18,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,3,$APP.tR,3,$APP.IP,new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[u6,n0],null),new $APP.M(null,3,5,$APP.O,[u6,n0,G6],null)],null),$APP.W,$APP.P(new $APP.M(null,2,5,$APP.O,[u6,n0],null),new $APP.M(null,3,5,$APP.O,[u6,n0,G6],null)),$APP.eS,$APP.P(null,null)],null),1,570,570,$APP.P(new $APP.M(null,2,5,$APP.O,[u6,n0],null),new $APP.M(null,3,5,$APP.O,[u6,n0,G6],null)),"Forces underlying `conn` value to become `db`. Will generate a tx-report that will remove everything from old value and insert everything from the new one.",
$APP.p(g7)?g7.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return f7},dya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Oxa,"datascript/core.cljc",16,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,3,$APP.tR,3,
$APP.IP,new $APP.M(null,2,5,$APP.O,[new $APP.M(null,2,5,$APP.O,[u6,j6],null),new $APP.M(null,3,5,$APP.O,[u6,j6,G6],null)],null),$APP.W,$APP.P(new $APP.M(null,2,5,$APP.O,[u6,j6],null),new $APP.M(null,3,5,$APP.O,[u6,j6,G6],null)),$APP.eS,$APP.P(null,null)],null),1,476,476,$APP.P(new $APP.M(null,2,5,$APP.O,[u6,j6],null),new $APP.M(null,3,5,$APP.O,[u6,j6,G6],null)),'Applies transaction the underlying database value and atomically updates connection reference to point to the result of that transaction, new db value.\n  \n   Returns transaction report, a map:\n\n       { :db-before ...       ; db value before transaction\n         :db-after  ...       ; db value after transaction\n         :tx-data   [...]     ; plain datoms that were added/retracted from db-before\n         :tempids   {...}     ; map of tempid from tx-data \x3d\x3e assigned entid in db-after\n         :tx-meta   tx-meta } ; the exact value you passed as `tx-meta`\n\n  Note! `conn` will be updated in-place and is not returned from [[transact!]].\n  \n  Usage:\n\n      ; add a single datom to an existing entity (1)\n      (transact! conn [[:db/add 1 :name "Ivan"]])\n  \n      ; retract a single datom\n      (transact! conn [[:db/retract 1 :name "Ivan"]])\n  \n      ; retract single entity attribute\n      (transact! conn [[:db.fn/retractAttribute 1 :name]])\n  \n      ; ... or equivalently (since Datomic changed its API to support this):\n      (transact! conn [[:db/retract 1 :name]])\n      \n      ; retract all entity attributes (effectively deletes entity)\n      (transact! conn [[:db.fn/retractEntity 1]])\n  \n      ; create a new entity (`-1`, as any other negative value, is a tempid\n      ; that will be replaced with DataScript to a next unused eid)\n      (transact! conn [[:db/add -1 :name "Ivan"]])\n  \n      ; check assigned id (here `*1` is a result returned from previous `transact!` call)\n      (def report *1)\n      (:tempids report) ; \x3d\x3e {-1 296}\n  \n      ; check actual datoms inserted\n      (:tx-data report) ; \x3d\x3e [#datascript/Datom [296 :name "Ivan"]]\n  \n      ; tempid can also be a string\n      (transact! conn [[:db/add "ivan" :name "Ivan"]])\n      (:tempids *1) ; \x3d\x3e {"ivan" 297}\n  \n      ; reference another entity (must exist)\n      (transact! conn [[:db/add -1 :friend 296]])\n  \n      ; create an entity and set multiple attributes (in a single transaction\n      ; equal tempids will be replaced with the same yet unused entid)\n      (transact! conn [[:db/add -1 :name "Ivan"]\n                       [:db/add -1 :likes "fries"]\n                       [:db/add -1 :likes "pizza"]\n                       [:db/add -1 :friend 296]])\n  \n      ; create an entity and set multiple attributes (alternative map form)\n      (transact! conn [{:db/id  -1\n                        :name   "Ivan"\n                        :likes  ["fries" "pizza"]\n                        :friend 296}])\n      \n      ; update an entity (alternative map form). Can’t retract attributes in\n      ; map form. For cardinality many attrs, value (fish in this example)\n      ; will be added to the list of existing values\n      (transact! conn [{:db/id  296\n                        :name   "Oleg"\n                        :likes  ["fish"]}])\n\n      ; ref attributes can be specified as nested map, that will create nested entity as well\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :friend {:db/id -2\n                                 :name "Sergey"}}])\n                                 \n      ; reverse attribute name can be used if you want created entity to become\n      ; a value in another entity reference\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :_friend 296}])\n      ; equivalent to\n      (transact! conn [{:db/id  -1, :name   "Oleg"}\n                       {:db/id 296, :friend -1}])\n      ; equivalent to\n      (transact! conn [[:db/add  -1 :name   "Oleg"]\n                       [:db/add 296 :friend -1]])',
$APP.p(f7)?f7.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return Q$},jxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Pya,"datascript/core.cljc",13,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,1,$APP.tR,1,
$APP.IP,new $APP.M(null,2,5,$APP.O,[$APP.qh,new $APP.M(null,1,5,$APP.O,[qxa],null)],null),$APP.W,$APP.P($APP.qh,new $APP.M(null,1,5,$APP.O,[qxa],null)),$APP.eS,$APP.P(null,null)],null),1,728,728,$APP.P($APP.qh,new $APP.M(null,1,5,$APP.O,[qxa],null)),"Generates a UUID that grow with time. Such UUIDs will always go to the end  of the index and that will minimize insertions in the middle.\n  \n   Consist of 64 bits of current UNIX timestamp (in seconds) and 64 random bits (2^64 different unique values per second).",
$APP.p(Q$)?Q$.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return exa},Lxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,n0,"datascript/core.cljc",9,1,654,654,$APP.P(new $APP.M(null,1,5,$APP.O,[u6],null)),"Returns the underlying immutable database value from a connection.\n   \n   Exists for Datomic API compatibility. Prefer using `@conn` directly if possible.",
$APP.p(exa)?exa.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return O6},Pxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,qya,"datascript/core.cljc",15,1,195,207,$APP.Pd,"Converts db into a data structure (not string!) that can be fed to serializer\n             of your choice (e.g. `js/JSON.stringify` in CLJS, `cheshire.core/generate-string`\n             or `jsonista.core/write-value-as-string` in CLJ).\n\n             On JVM, `serializable` holds a global lock that prevents any two serializations\n             to run in parallel (an implementation constraint, be aware).\n\n             Options:\n\n             `:freeze-fn` Non-primitive values will be serialized using this. Optional.\n             `pr-str` by default.",
$APP.p(O6)?O6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return Y6},wya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Rya,"datascript/core.cljc",23,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,2,$APP.tR,2,
$APP.IP,new $APP.M(null,2,5,$APP.O,[new $APP.M(null,1,5,$APP.O,[C6],null),new $APP.M(null,2,5,$APP.O,[C6,i6],null)],null),$APP.W,$APP.P(new $APP.M(null,1,5,$APP.O,[C6],null),new $APP.M(null,2,5,$APP.O,[C6,i6],null)),$APP.eS,$APP.P(null,null)],null),1,450,450,$APP.P(new $APP.M(null,1,5,$APP.O,[C6],null),new $APP.M(null,2,5,$APP.O,[C6,i6],null)),"Creates an empty DB and a mutable reference to it. See [[create-conn]].",$APP.p(Y6)?Y6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),
d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return R6},txa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,$ya,"datascript/core.cljc",20,1,210,218,$APP.Pd,"Creates db from a data structure (not string!) produced by serializable.\n\n             Opts:\n\n             `:thaw-fn` Non-primitive values will be deserialized using this.\n             Must match :freeze-fn from serializable. Optional. `clojure.edn/read-string`\n             by default.",
$APP.p(R6)?R6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return H6},oxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Vya,"datascript/core.cljc",11,1,152,164,$APP.Pd,"Creates an empty database with an optional schema.\n\n             Usage:\n             \n             ```\n             (empty-db) ; \x3d\x3e #datascript/DB {:schema {}, :datoms []}\n  \n             (empty-db {:likes {:db/cardinality :db.cardinality/many}})\n             ; \x3d\x3e #datascript/DB {:schema {:likes {:db/cardinality :db.cardinality/many}}\n             ;                    :datoms []}\n             ```",
$APP.p(H6)?H6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return h0},Bxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Kxa,"datascript/core.cljc",10,1,186,192,$APP.Pd,"Low-level fn for creating database quickly from a trusted sequence of datoms.\n\n             Does no validation on inputs, so `datoms` must be well-formed and match schema.\n\n             Used internally in db (de)serialization. See also [[datom]].",
$APP.p(h0)?h0.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return k1},Cxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,Cya,"datascript/core.cljc",8,1,91,100,$APP.Pd,"Forces all entity attributes to be eagerly fetched and cached. Only usable for debug output.\n\n             Usage:\n\n             ```\n             (entity db 1) ; \x3d\x3e {:db/id 1}\n             (touch (entity db 1)) ; \x3d\x3e {:db/id 1, :dislikes [:pie], :likes [:pizza]}\n             ```",
$APP.p(k1)?k1.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return 536870912},lya,$APP.Ai([$APP.RQ,$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.DE,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[!0,l6,Zya,"datascript/core.cljc",26,1,!0,18,18,$APP.Pd,null,$APP.p(536870912)?
(536870912).S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return Zwa},sxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,$APP.qR,"datascript/core.cljc",13,1,235,235,$APP.P(new $APP.M(null,2,5,$APP.O,[n0,$APP.paa],
null)),"Returns a view over database that has same interface but only includes datoms for which the `(pred db datom)` is true. Can be applied multiple times.\n   \n   Filtered DB gotchas:\n\n   - All operations on filtered database are proxied to original DB, then filter pred is applied.\n   - Not cached. You pay filter penalty every time.\n   - Supports entities, pull, queries, index access.\n   - Does not support [[with]] and [[db-with]].",$APP.p(Zwa)?Zwa.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=
$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return W6},jya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,C6,"datascript/core.cljc",13,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,6,$APP.tR,6,$APP.IP,new $APP.M(null,5,5,$APP.O,[new $APP.M(null,2,5,
$APP.O,[n0,$APP.rS],null),new $APP.M(null,3,5,$APP.O,[n0,$APP.rS,m6],null),new $APP.M(null,4,5,$APP.O,[n0,$APP.rS,m6,q6],null),new $APP.M(null,5,5,$APP.O,[n0,$APP.rS,m6,q6,zya],null),new $APP.M(null,6,5,$APP.O,[n0,$APP.rS,m6,q6,zya,Aya],null)],null),$APP.W,$APP.P(new $APP.M(null,2,5,$APP.O,[n0,$APP.rS],null),new $APP.M(null,3,5,$APP.O,[n0,$APP.rS,m6],null),new $APP.M(null,4,5,$APP.O,[n0,$APP.rS,m6,q6],null),new $APP.M(null,5,5,$APP.O,[n0,$APP.rS,m6,q6,zya],null),new $APP.M(null,6,5,$APP.O,[n0,$APP.rS,
m6,q6,zya,Aya],null)),$APP.eS,$APP.P(null,null,null,null,null)],null),1,280,280,$APP.P(new $APP.M(null,2,5,$APP.O,[n0,$APP.rS],null),new $APP.M(null,3,5,$APP.O,[n0,$APP.rS,m6],null),new $APP.M(null,4,5,$APP.O,[n0,$APP.rS,m6,q6],null),new $APP.M(null,5,5,$APP.O,[n0,$APP.rS,m6,q6,zya],null),new $APP.M(null,6,5,$APP.O,[n0,$APP.rS,m6,q6,zya,Aya],null)),'Index lookup. Returns a sequence of datoms (lazy iterator over actual DB index) which components (e, a, v) match passed arguments.\n\n   Datoms are sorted in index sort order. Possible `index` values are: `:eavt`, `:aevt`, `:avet`.\n\n   Usage:\n\n       ; find all datoms for entity id \x3d\x3d 1 (any attrs and values)\n       ; sort by attribute, then value\n       (datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"])\n  \n       ; find all datoms for entity id \x3d\x3d 1 and attribute \x3d\x3d :likes (any values)\n       ; sorted by value\n       (datoms db :eavt 1 :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"])\n       \n       ; find all datoms for entity id \x3d\x3d 1, attribute \x3d\x3d :likes and value \x3d\x3d "pizza"\n       (datoms db :eavt 1 :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"])\n  \n       ; find all datoms for attribute \x3d\x3d :likes (any entity ids and values)\n       ; sorted by entity id, then value\n       (datoms db :aevt :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n  \n       ; find all datoms that have attribute \x3d\x3d `:likes` and value \x3d\x3d `"pizza"` (any entity id)\n       ; `:likes` must be a unique attr, reference or marked as `:db/index true`\n       (datoms db :avet :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n  \n       ; find all datoms sorted by entity id, then attribute, then value\n       (datoms db :eavt) ; \x3d\x3e (...)\n\n   Useful patterns:\n\n       ; get all values of :db.cardinality/many attribute\n       (-\x3e\x3e (datoms db :eavt eid attr) (map :v))\n  \n       ; lookup entity ids by attribute value\n       (-\x3e\x3e (datoms db :avet attr value) (map :e))\n  \n       ; find all entities with a specific attribute\n       (-\x3e\x3e (datoms db :aevt attr) (map :e))\n  \n       ; find “singleton” entity by its attr\n       (-\x3e\x3e (datoms db :aevt attr) first :e)\n  \n       ; find N entities with lowest attr value (e.g. 10 earliest posts)\n       (-\x3e\x3e (datoms db :avet attr) (take N))\n  \n       ; find N entities with highest attr value (e.g. 10 latest posts)\n       (-\x3e\x3e (datoms db :avet attr) (reverse) (take N))\n\n   Gotchas:\n   \n   - Index lookup is usually more efficient than doing a query with a single clause.\n   - Resulting iterator is calculated in constant time and small constant memory overhead.\n   - Iterator supports efficient `first`, `next`, `reverse`, `seq` and is itself a sequence.\n   - Will not return datoms that are not part of the index (e.g. attributes with no `:db/index` in schema when querying `:avet` index).\n     - `:eavt` and `:aevt` contain all datoms.\n     - `:avet` only contains datoms for references, `:db/unique` and `:db/index` attributes.',
$APP.p(W6)?W6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return M6},Rxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,dva,"datascript/core.cljc",7,1,105,117,$APP.Pd,'Fetches data from database using recursive declarative description. See [docs.datomic.com/on-prem/pull.html](https://docs.datomic.com/on-prem/pull.html).\n\n             Unlike [[entity]], returns plain Clojure map (not lazy).\n\n             Usage:\n\n                 (pull db [:db/id, :name, :likes, {:friends [:db/id :name]}] 1)\n                 ; \x3d\x3e {:db/id   1,\n                 ;     :name    "Ivan"\n                 ;     :likes   [:pizza]\n                 ;     :friends [{:db/id 2, :name "Oleg"}]}',
$APP.p(M6)?M6.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),function(){var a=new $APP.Kd(function(){return a7},kxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[l6,gya,"datascript/core.cljc",18,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,1,$APP.tR,1,
$APP.IP,new $APP.M(null,2,5,$APP.O,[$APP.qh,new $APP.M(null,1,5,$APP.O,[i6],null)],null),$APP.W,$APP.P($APP.qh,new $APP.M(null,1,5,$APP.O,[i6],null)),$APP.eS,$APP.P(null,null)],null),1,456,456,$APP.P($APP.qh,new $APP.M(null,1,5,$APP.O,[i6],null)),"Creates a mutable reference (a “connection”) to an empty immutable database.\n\n   Connections are lightweight in-memory structures (~atoms) with direct support of transaction listeners ([[listen!]], [[unlisten!]]) and other handy DataScript APIs ([[transact!]], [[reset-conn!]], [[db]]).\n\n   To access underlying immutable DB value, deref: `@conn`.",
$APP.p(a7)?a7.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,R$,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}()]),Kza=new $APP.n(null,7,[Xxa,function(){var a=new $APP.Kd(function(){return Bsa},sya,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[F6,Xxa,"datascript/db.cljc",21,1,885,885,$APP.P(new $APP.M(null,
1,5,$APP.O,[new $APP.n(null,1,[$APP.YC,new $APP.M(null,2,5,$APP.O,[i6,C6],null)],null)],null)),null,$APP.p(Bsa)?Bsa.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),Nxa,function(){var a=new $APP.Kd(function(){return Sra},Uxa,$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.Mn,
$APP.W,$APP.Z,$APP.wS],[F6,Nxa,"datascript/db.cljc",31,1,297,297,oya,$APP.P(new $APP.M(null,1,5,$APP.O,[$APP.BP],null)),null,$APP.p(Sra)?Sra.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),rxa,function(){var a=new $APP.Kd(function(){return UY},Hxa,$APP.Ai([$APP.zt,$APP.Ro,$APP.S,$APP.Dm,$APP.zD,
$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[lxa,F6,rxa,"datascript/db.cljc",15,1,154,156,$APP.P(new $APP.M(null,1,5,$APP.O,[$APP.jma],null)),null,$APP.p(UY)?UY.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),nxa,function(){var a=new $APP.Kd(function(){return Fra},eya,$APP.Ai([$APP.zt,$APP.Ro,
$APP.S,$APP.Dm,$APP.zD,$APP.ao,$APP.Em,$APP.lU,$APP.W,$APP.Z,$APP.wS],[lxa,F6,nxa,"datascript/db.cljc",12,1,154,155,$APP.P(new $APP.M(null,1,5,$APP.O,[$APP.jma],null)),null,$APP.p(Fra)?Fra.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),Eya,function(){var a=new $APP.Kd(function(){return gZ},Dxa,
$APP.Ai([$APP.Ro,$APP.S,$APP.Dm,$APP.zD,$APP.IJ,$APP.ao,$APP.Em,$APP.lU,$APP.Mn,$APP.W,$APP.Z,$APP.wS],[F6,Eya,"datascript/db.cljc",19,new $APP.n(null,6,[$APP.RE,!1,$APP.Mv,5,$APP.tR,5,$APP.IP,new $APP.M(null,3,5,$APP.O,[new $APP.M(null,3,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI],null),new $APP.M(null,4,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI,kya],null),new $APP.M(null,5,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI,kya,vxa],null)],null),$APP.W,$APP.P(new $APP.M(null,3,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI],null),new $APP.M(null,
4,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI,kya],null),new $APP.M(null,5,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI,kya,vxa],null)),$APP.eS,$APP.P(null,null,null)],null),1,233,233,oya,$APP.P(new $APP.M(null,3,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI],null),new $APP.M(null,4,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI,kya],null),new $APP.M(null,5,5,$APP.O,[$APP.iI,$APP.dI,$APP.lI,kya,vxa],null)),null,$APP.p(gZ)?gZ.S:null])),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,
$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),Vxa,function(){var a=new $APP.Kd(function(){return l_},Sya,new $APP.n(null,8,[$APP.Ro,F6,$APP.Z,null,$APP.Dm,"datascript/db.cljc",$APP.Em,499,$APP.ao,22,$APP.S,Vxa,$APP.wS,$APP.p(l_)?l_.S:null,$APP.W,$APP.Pd],null)),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?
$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,b,d):$APP.By(c,b,d)}(),oya,function(){var a=new $APP.Kd(function(){return WY},Wya,new $APP.n(null,8,[$APP.Ro,F6,$APP.Z,null,$APP.Dm,"datascript/db.cljc",$APP.Em,160,$APP.ao,10,$APP.S,oya,$APP.wS,$APP.p(WY)?WY.S:null,$APP.W,$APP.Pd],null)),b=$APP.v(a);a=$APP.Be(a);var c=$APP.p(null)?null:$APP.S.h(a),d=new $APP.n(null,4,[$APP.Ro,Iza,$APP.S,c,$APP.W,$APP.W.h(a),$APP.Z,$APP.Z.h(a)],null);return $APP.p($APP.vs.h(a))?$APP.Cy(c,b,d):$APP.p($APP.tr.h(a))?$APP.Dy(c,
b,d):$APP.By(c,b,d)}()],null);$APP.Zy(new $APP.n(null,1,[$APP.Tr,new $APP.n(null,2,[l6,Jza,F6,Kza],null)],null));
}).call(this);